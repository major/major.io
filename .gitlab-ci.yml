variables:
  GIT_SUBMODULE_STRATEGY: recursive

pages:
  image: monachus/hugo
  script:
    - ./build-site.sh
  artifacts:
    paths:
      - public
  only:
    - master

firebase_deploy:
  image: node:latest
  script:
    - ./build-site.sh
    - npm install -g firebase-tools
    - npm install -g bower
    - npm install
    - bower install --allow-root
    - firebase use --token $FIREBASE_TOKEN major-io-1f024
    - firebase deploy -m "GitLab Pipeline $CI_PIPELINE_ID, build $CI_BUILD_ID" --non-interactive --token $FIREBASE_TOKEN
