<!doctype html><html lang=en-us><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://major.io/favicon.ico><title>PHP CLI memory limit is different between users and root | Major Hayden's Blog ðŸ¤ </title><meta name=title content="PHP CLI memory limit is different between users and root"><meta name=description content="If you find that memory limits differ between root and other users when PHP scripts are run from the command line, there may be an issue with your php.ini or your script. To verify that it isn&rsquo;t your script, try this:
$ echo &#34;<? var_dump(ini_get('memory_limit')); ?>&#34; >> memtest.php $ php -f memtest.php string(3) &#34;8M&#34; $ su - # php -f memtest.php string(3) &#34;64M&#34; If you get the same two values from both users, there&rsquo;s probably a problem with your script."><meta name=keywords content="command line,"><meta property="og:title" content="PHP CLI memory limit is different between users and root"><meta property="og:description" content="If you find that memory limits differ between root and other users when PHP scripts are run from the command line, there may be an issue with your php.ini or your script. To verify that it isn&rsquo;t your script, try this:
$ echo &#34;<? var_dump(ini_get('memory_limit')); ?>&#34; >> memtest.php $ php -f memtest.php string(3) &#34;8M&#34; $ su - # php -f memtest.php string(3) &#34;64M&#34; If you get the same two values from both users, there&rsquo;s probably a problem with your script."><meta property="og:type" content="article"><meta property="og:url" content="https://major.io/2007/06/14/php-cli-memory-limit-is-different-between-users-and-root/"><meta property="og:image" content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2007-06-14T22:53:33+00:00"><meta property="article:modified_time" content="2007-06-14T22:53:33+00:00"><meta property="og:site_name" content="Major Hayden's Blog ðŸ¤ "><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta name=twitter:title content="PHP CLI memory limit is different between users and root"><meta name=twitter:description content="If you find that memory limits differ between root and other users when PHP scripts are run from the command line, there may be an issue with your php.ini or your script. To verify that it isn&rsquo;t your script, try this:
$ echo &#34;<? var_dump(ini_get('memory_limit')); ?>&#34; >> memtest.php $ php -f memtest.php string(3) &#34;8M&#34; $ su - # php -f memtest.php string(3) &#34;64M&#34; If you get the same two values from both users, there&rsquo;s probably a problem with your script."><meta name=twitter:site content="@mhayden"><meta itemprop=name content="PHP CLI memory limit is different between users and root"><meta itemprop=description content="If you find that memory limits differ between root and other users when PHP scripts are run from the command line, there may be an issue with your php.ini or your script. To verify that it isn&rsquo;t your script, try this:
$ echo &#34;<? var_dump(ini_get('memory_limit')); ?>&#34; >> memtest.php $ php -f memtest.php string(3) &#34;8M&#34; $ su - # php -f memtest.php string(3) &#34;64M&#34; If you get the same two values from both users, there&rsquo;s probably a problem with your script."><meta itemprop=datePublished content="2007-06-14T22:53:33+00:00"><meta itemprop=dateModified content="2007-06-14T22:53:33+00:00"><meta itemprop=wordCount content="213"><meta itemprop=image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta itemprop=keywords content="command line,"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:820px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px}div.highlight code{background-color:unset;color:initial}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style></head><body><header><a href=../../../../ class=title><h2>Major Hayden's Blog ðŸ¤ </h2></a><nav><a href=../../../../>Home</a>
<a href=../../../../ham-radio-faq>Ham Radio</a>
<a href=../../../../icanhazip-com-faq>icanhazip FAQ</a>
<a href=../../../../posts>Posts</a></nav></header><main><h1>PHP CLI memory limit is different between users and root</h1><i><time datetime=2007-06-14 pubdate>2007-06-14</time></i>
<content><p>If you find that memory limits differ between root and other users when PHP scripts are run from the command line, there may be an issue with your php.ini or your script. To verify that it isn&rsquo;t your script, try this:</p><pre><code>$ echo &quot;&lt;? var_dump(ini_get('memory_limit')); ?&gt;&quot; &gt;&gt; memtest.php
$ php -f memtest.php
string(3) &quot;8M&quot;
$ su -
# php -f memtest.php
string(3) &quot;64M&quot;
</code></pre><p>If you get the same two values from both users, there&rsquo;s probably a problem with your script. Make sure that there&rsquo;s no <code>ini_set()</code> functions in your script that are overriding the php.ini file.</p><p>However, if you get results like the ones above, check the permissions on /etc/php.ini:</p><pre><code># ls -al /etc/php.ini
-rw-------  1 root root 27 Jun  6 18:39 /etc/php.ini
</code></pre><p>As you can see, php.ini is only readable to root, which prevents PHP&rsquo;s command line parser from accessing your custom memory_limit directive in the php.ini. PHP&rsquo;s general default is 8M for a memory limit if nothing is specified anywhere else, and that&rsquo;s why normal users cannot get the higher memory limit that&rsquo;s set in your php.ini file.</p><p>Simply set the permissions on the file to 644 and you should be set to go:</p><pre><code># chmod 644 /etc/php.ini
# ls -al /etc/php.ini
-rw-r--r--  1 root root 45022 Jun  6 23:00 /etc/php.ini
</code></pre></content><p><a href=https://major.io/tags/command-line/>#command line</a></p></main><footer><hr>CC-BY-SA 4.0 &#187;
Made with <a href=https://gohugo.io/>Hugo</a> &#187;
Theme based on <a href=https://github.com/janraasch/hugo-bearblog/>Hugo Ê•â€¢á´¥â€¢Ê” Bear</a><br><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "aca54cb1322647b89c43a40751f02ce4"}'></script></footer></body></html>