<!doctype html><html lang=en-us><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://major.io/favicon.ico><title>DB function failed with error number 1033 | Major Hayden's Blog ðŸ¤ </title><meta name=title content="DB function failed with error number 1033"><meta name=description content="One of these errors might appear on your website without warning:
Warning: DB function failed with error number 1033 Incorrect information in file: './database_name/table_name.frm' SQL=SELECT col1, col2 FROM table_name WHERE col3 = 'some_value' ORDER BY col1 ASC MySQL is telling you that the table structure it has within data files doesn&rsquo;t match the structure in the .frm file that&rsquo;s on the disk. There&rsquo;s only a few scenarios where this can happen:"><meta name=keywords content="database,emergency,"><meta property="og:title" content="DB function failed with error number 1033"><meta property="og:description" content="One of these errors might appear on your website without warning:
Warning: DB function failed with error number 1033 Incorrect information in file: './database_name/table_name.frm' SQL=SELECT col1, col2 FROM table_name WHERE col3 = 'some_value' ORDER BY col1 ASC MySQL is telling you that the table structure it has within data files doesn&rsquo;t match the structure in the .frm file that&rsquo;s on the disk. There&rsquo;s only a few scenarios where this can happen:"><meta property="og:type" content="article"><meta property="og:url" content="https://major.io/2007/08/25/182/"><meta property="og:image" content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2007-08-25T23:18:37+00:00"><meta property="article:modified_time" content="2020-02-12T16:36:14-06:00"><meta property="og:site_name" content="Major Hayden's Blog ðŸ¤ "><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta name=twitter:title content="DB function failed with error number 1033"><meta name=twitter:description content="One of these errors might appear on your website without warning:
Warning: DB function failed with error number 1033 Incorrect information in file: './database_name/table_name.frm' SQL=SELECT col1, col2 FROM table_name WHERE col3 = 'some_value' ORDER BY col1 ASC MySQL is telling you that the table structure it has within data files doesn&rsquo;t match the structure in the .frm file that&rsquo;s on the disk. There&rsquo;s only a few scenarios where this can happen:"><meta name=twitter:site content="@mhayden"><meta itemprop=name content="DB function failed with error number 1033"><meta itemprop=description content="One of these errors might appear on your website without warning:
Warning: DB function failed with error number 1033 Incorrect information in file: './database_name/table_name.frm' SQL=SELECT col1, col2 FROM table_name WHERE col3 = 'some_value' ORDER BY col1 ASC MySQL is telling you that the table structure it has within data files doesn&rsquo;t match the structure in the .frm file that&rsquo;s on the disk. There&rsquo;s only a few scenarios where this can happen:"><meta itemprop=datePublished content="2007-08-25T23:18:37+00:00"><meta itemprop=dateModified content="2020-02-12T16:36:14-06:00"><meta itemprop=wordCount content="260"><meta itemprop=image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta itemprop=keywords content="database,emergency,"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:820px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px}div.highlight code{background-color:unset;color:initial}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style></head><body><header><a href=../../../../ class=title><h2>Major Hayden's Blog ðŸ¤ </h2></a><nav><a href=../../../../>Home</a>
<a href=../../../../ham-radio-faq>Ham Radio</a>
<a href=../../../../icanhazip-com-faq>icanhazip FAQ</a>
<a href=../../../../posts>Posts</a></nav><script async src=https://media.ethicalads.io/media/client/ethicalads.min.js></script><div class="adaptive raised" data-ea-publisher=major-io data-ea-type=text></div></header><main><h1>DB function failed with error number 1033</h1><i><time datetime=2007-08-25 pubdate>2007-08-25</time></i>
<content><p>One of these errors might appear on your website without warning:</p><pre><code>Warning:  DB function failed with error number 1033
Incorrect information in file: './database_name/table_name.frm' SQL=SELECT col1, col2 FROM table_name WHERE col3 = 'some_value' ORDER BY col1 ASC
</code></pre><p>MySQL is telling you that the table structure it has within data files doesn&rsquo;t match the structure in the <code>.frm</code> file that&rsquo;s on the disk. There&rsquo;s only a few scenarios where this can happen:</p><p><strong>Different version of the .frm files</strong></p><p>If the .frm files from an older or later version of the table are placed in MySQL&rsquo;s data directory, MySQL will become confused and it won&rsquo;t be able to determine the proper database structure.</p><p><strong>Pending table alteration</strong></p><p>A pending database operation that ran an <code>ALTER TABLE</code> may not have written changes to the disk. MySQL may have stopped running abruptly or the entire server may have crashed. The normal operation for MySQL is to make changes in memory first and then perform disk operations.</p><p><strong>Complete wierdness</strong></p><p>I cannot explain it, and I can&rsquo;t figure out the logic that would allow it to happen, but some web application vulnerabilities can cause this problem. I&rsquo;ve seen it happen with Joomla! sites running on fairly secure servers, and there was no Apache privilege escalation used to modify the .frm files directly.</p><p>How is it fixed? The only way to repair it is to import the table again from a mysqldump backup, find the correct .frm file and restore it on the server, or run an <code>ALTER TABLE</code> to bring the table back to its original state.</p></content><p><a href=https://major.io/tags/database/>#database</a>
<a href=https://major.io/tags/emergency/>#emergency</a></p></main><footer><hr>CC-BY-SA 4.0 &#187;
Made with <a href=https://gohugo.io/>Hugo</a> &#187;
Theme based on <a href=https://github.com/janraasch/hugo-bearblog/>Hugo Ê•â€¢á´¥â€¢Ê” Bear</a> &#187;
<a href=https://github.com/major/major.io/commit/84372fb2198913a5e498b8d32ffc77fb813f0a48>84372fb2</a></footer></body></html>