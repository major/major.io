<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="Major Hayden"><meta name=description content="By default, views in MySQL 5.x are created with a security definer set to the root user. However, Plesk drops the root user from MySQL and replaces it with the admin user. When this happens, your views cannot by dumped by mysqldump since the root user (the security definer for the view) doesn&amp;rsquo;t exist in the mysql.user table.
You receive an error similar to the following:
mysqldump: Couldn't execute 'SHOW FIELDS FROM `some_tablename`': There is no 'root'@'localhost' registered (1449) Usually, if you run a SHOW CREATE VIEW tablename, you&amp;rsquo;ll see something like this:"><meta name=keywords content=",database,plesk"><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://major.io/2007/08/18/issues-with-mysqldump-and-views-in-plesk/><title>Issues with mysqldump and views in Plesk :: Major Hayden ðŸ¤  â€” Words of wisdom from a social nerd</title><link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css rel=stylesheet type=text/css><link rel=stylesheet href=../../../../main.89fa80e2143f71bd5c96a7c94e531dec3276a367e22f87e74a76026ab64680bf.css><link rel=apple-touch-icon sizes=180x180 href=../../../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../../../favicon-16x16.png><link rel=manifest href=../../../../site.webmanifest><link rel=mask-icon href=../../../../safari-pinned-tab.svg color=#252627><link rel="shortcut icon" href=../../../../favicon.ico><meta name=msapplication-TileColor content="#252627"><meta name=theme-color content="#252627"><meta itemprop=name content="Issues with mysqldump and views in Plesk"><meta itemprop=description content="By default, views in MySQL 5.x are created with a security definer set to the root user. However, Plesk drops the root user from MySQL and replaces it with the admin user. When this happens, your views cannot by dumped by mysqldump since the root user (the security definer for the view) doesn&rsquo;t exist in the mysql.user table.
You receive an error similar to the following:
mysqldump: Couldn't execute 'SHOW FIELDS FROM `some_tablename`': There is no 'root'@'localhost' registered (1449) Usually, if you run a SHOW CREATE VIEW tablename, you&rsquo;ll see something like this:"><meta itemprop=datePublished content="2007-08-18T17:40:00+00:00"><meta itemprop=dateModified content="2007-08-18T17:40:00+00:00"><meta itemprop=wordCount content="162"><meta itemprop=image content="https://major.io"><meta itemprop=keywords content="database,plesk,"><meta property="article:published_time" content="2007-08-18 17:40:00 +0000 UTC"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Issues with mysqldump and views in Plesk :: Major Hayden ðŸ¤ "><meta name=twitter:description content><meta name=twitter:site content="https://major.io"><meta name=twitter:creator content="Major Hayden"><meta name=twitter:image content><style type=text/css>html{letter-spacing:unset}</style></head><body class=dark-theme><div class=container><header class=header><span class=header__inner><a href=../../../../ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>$ echo major.io</span>
<span class=logo__cursor style=visibility:hidden></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=../../../../ham-radio-faq>hamradio</a></li><li><a href=../../../../icanhazip-com-faq>icanhazip</a></li><li><a href=../../../../posts/>posts</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info></p></div><article><h2 class=post-title><a href=https://major.io/2007/08/18/issues-with-mysqldump-and-views-in-plesk/>Issues with mysqldump and views in Plesk</a></h2><div class=post-content><p>By default, views in MySQL 5.x are created with a security definer set to the root user. However, Plesk drops the root user from MySQL and replaces it with the admin user. When this happens, your views cannot by dumped by mysqldump since the root user (the security definer for the view) doesn&rsquo;t exist in the mysql.user table.</p><p>You receive an error similar to the following:</p><pre><code>mysqldump: Couldn't execute 'SHOW FIELDS FROM `some_tablename`': There is no 'root'@'localhost' registered (1449)
</code></pre><p>Usually, if you run a <code>SHOW CREATE VIEW tablename</code>, you&rsquo;ll see something like this:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#719e07>CREATE</span> ALGORITHM<span style=color:#719e07>=</span>UNDEFINED <span style=color:#719e07>DEFINER</span><span style=color:#719e07>=`</span>root<span style=color:#719e07>`@`</span>localhost<span style=color:#719e07>`</span> <span style=color:#719e07>SQL</span> <span style=color:#719e07>SECURITY</span> <span style=color:#719e07>DEFINER</span> <span style=color:#719e07>VIEW</span> <span style=color:#719e07>`</span>some_tablename<span style=color:#719e07>`</span> <span style=color:#719e07>AS</span> <span style=color:#719e07>select</span> <span style=color:#719e07>distinct</span> <span style=color:#719e07>`</span>some_database<span style=color:#719e07>`</span>.<span style=color:#719e07>`</span>some_tablename<span style=color:#719e07>`</span>.<span style=color:#719e07>`</span>some_column<span style=color:#719e07>`</span> <span style=color:#719e07>AS</span> <span style=color:#719e07>`</span><span style=color:#719e07>alias</span><span style=color:#719e07>`</span> <span style=color:#719e07>from</span> <span style=color:#719e07>`</span>some_tablename<span style=color:#719e07>`</span>
</code></pre></div><p>You have two options in this situation:</p><ul><li>Change the security definer for each of your views to &lsquo;admin&rsquo;@&lsquo;localhost&rsquo;. Any new views you create will need to be adjusted as well.</li><li>Create a root user in MySQL with the same privileges as the admin user and use the root user&rsquo;s login to run mysqldump.</li></ul></div></article><hr><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://major.io/tags/database/>database</a></span>
<span class=tag><a href=https://major.io/tags/plesk/>plesk</a></span></p></div></main></div><footer class=footer><div class=footer__inner><div class=footer__content><span>&copy; 2021</span>
<span><a href=https://major.io>Major Hayden</a></span>
<span><a href=https://creativecommons.org/licenses/by-sa/2.0/ target=_blank rel=noopener>CC BY-SA 2.0</a></span><span><a href=https://major.io/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></span></div></div><div class=footer__inner><div class=footer__content><span>Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>Made with &#10084; by <a href=https://github.com/rhazdon>Djordje Atlialp</a></span></div></div></footer></div><script type=text/javascript src=../../../../bundle.min.e9f93b80e78a22e6f04cbb5f73e0f9c4ba60ff73a2a0ef85965c688f93dd1f2722a282e30e485603e4c65b1b346720e35f213435ec5556e196a97a68d097c80f.js integrity="sha512-6fk7gOeKIubwTLtfc+D5xLpg/3OioO+Fllxoj5PdHyciooLjDkhWA+TGWxs0ZyDjXyE0NexVVuGWqXpo0JfIDw=="></script></body></html>