<!doctype html><html lang=en-us><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://major.io/favicon.ico><title>Issues with mysqldump and views in Plesk | Major Hayden's Blog ðŸ¤ </title><meta name=title content="Issues with mysqldump and views in Plesk"><meta name=description content="By default, views in MySQL 5.x are created with a security definer set to the root user. However, Plesk drops the root user from MySQL and replaces it with the admin user. When this happens, your views cannot by dumped by mysqldump since the root user (the security definer for the view) doesn&rsquo;t exist in the mysql.user table.
You receive an error similar to the following:
mysqldump: Couldn't execute 'SHOW FIELDS FROM `some_tablename`': There is no 'root'@'localhost' registered (1449) Usually, if you run a SHOW CREATE VIEW tablename, you&rsquo;ll see something like this:"><meta name=keywords content="database,plesk,"><meta property="og:title" content="Issues with mysqldump and views in Plesk"><meta property="og:description" content="By default, views in MySQL 5.x are created with a security definer set to the root user. However, Plesk drops the root user from MySQL and replaces it with the admin user. When this happens, your views cannot by dumped by mysqldump since the root user (the security definer for the view) doesn&rsquo;t exist in the mysql.user table.
You receive an error similar to the following:
mysqldump: Couldn't execute 'SHOW FIELDS FROM `some_tablename`': There is no 'root'@'localhost' registered (1449) Usually, if you run a SHOW CREATE VIEW tablename, you&rsquo;ll see something like this:"><meta property="og:type" content="article"><meta property="og:url" content="https://major.io/2007/08/18/issues-with-mysqldump-and-views-in-plesk/"><meta property="og:image" content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2007-08-18T17:40:00+00:00"><meta property="article:modified_time" content="2007-08-18T17:40:00+00:00"><meta property="og:site_name" content="Major Hayden's Blog ðŸ¤ "><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta name=twitter:title content="Issues with mysqldump and views in Plesk"><meta name=twitter:description content="By default, views in MySQL 5.x are created with a security definer set to the root user. However, Plesk drops the root user from MySQL and replaces it with the admin user. When this happens, your views cannot by dumped by mysqldump since the root user (the security definer for the view) doesn&rsquo;t exist in the mysql.user table.
You receive an error similar to the following:
mysqldump: Couldn't execute 'SHOW FIELDS FROM `some_tablename`': There is no 'root'@'localhost' registered (1449) Usually, if you run a SHOW CREATE VIEW tablename, you&rsquo;ll see something like this:"><meta name=twitter:site content="@mhayden"><meta itemprop=name content="Issues with mysqldump and views in Plesk"><meta itemprop=description content="By default, views in MySQL 5.x are created with a security definer set to the root user. However, Plesk drops the root user from MySQL and replaces it with the admin user. When this happens, your views cannot by dumped by mysqldump since the root user (the security definer for the view) doesn&rsquo;t exist in the mysql.user table.
You receive an error similar to the following:
mysqldump: Couldn't execute 'SHOW FIELDS FROM `some_tablename`': There is no 'root'@'localhost' registered (1449) Usually, if you run a SHOW CREATE VIEW tablename, you&rsquo;ll see something like this:"><meta itemprop=datePublished content="2007-08-18T17:40:00+00:00"><meta itemprop=dateModified content="2007-08-18T17:40:00+00:00"><meta itemprop=wordCount content="162"><meta itemprop=image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta itemprop=keywords content="database,plesk,"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:820px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px}div.highlight code{background-color:unset;color:initial}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style></head><body><header><a href=../../../../ class=title><h2>Major Hayden's Blog ðŸ¤ </h2></a><nav><a href=../../../../>Home</a>
<a href=../../../../ham-radio-faq>Ham Radio</a>
<a href=../../../../icanhazip-com-faq>icanhazip FAQ</a>
<a href=../../../../posts>Posts</a></nav></header><main><h1>Issues with mysqldump and views in Plesk</h1><i><time datetime=2007-08-18 pubdate>2007-08-18</time></i>
<content><p>By default, views in MySQL 5.x are created with a security definer set to the root user. However, Plesk drops the root user from MySQL and replaces it with the admin user. When this happens, your views cannot by dumped by mysqldump since the root user (the security definer for the view) doesn&rsquo;t exist in the mysql.user table.</p><p>You receive an error similar to the following:</p><pre><code>mysqldump: Couldn't execute 'SHOW FIELDS FROM `some_tablename`': There is no 'root'@'localhost' registered (1449)
</code></pre><p>Usually, if you run a <code>SHOW CREATE VIEW tablename</code>, you&rsquo;ll see something like this:</p><div class=highlight><pre style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#859900>CREATE</span> <span style=color:#268bd2>ALGORITHM</span>=<span style=color:#268bd2>UNDEFINED</span> <span style=color:#859900>DEFINER</span>=`<span style=color:#268bd2>root</span>`@`<span style=color:#268bd2>localhost</span>` <span style=color:#859900>SQL</span> <span style=color:#859900>SECURITY</span> <span style=color:#859900>DEFINER</span> <span style=color:#859900>VIEW</span> `<span style=color:#268bd2>some_tablename</span>` <span style=color:#859900>AS</span> <span style=color:#859900>select</span> <span style=color:#859900>distinct</span> `<span style=color:#268bd2>some_database</span>`.`<span style=color:#268bd2>some_tablename</span>`.`<span style=color:#268bd2>some_column</span>` <span style=color:#859900>AS</span> `<span style=color:#859900>alias</span>` <span style=color:#859900>from</span> `<span style=color:#268bd2>some_tablename</span>`
</code></pre></div><p>You have two options in this situation:</p><ul><li>Change the security definer for each of your views to &lsquo;admin&rsquo;@&lsquo;localhost&rsquo;. Any new views you create will need to be adjusted as well.</li><li>Create a root user in MySQL with the same privileges as the admin user and use the root user&rsquo;s login to run mysqldump.</li></ul></content><p><a href=https://major.io/tags/database/>#database</a>
<a href=https://major.io/tags/plesk/>#plesk</a></p></main><footer><hr>CC-BY-SA 4.0 &#187;
Made with <a href=https://gohugo.io/>Hugo</a> &#187;
Theme based on <a href=https://github.com/janraasch/hugo-bearblog/>Hugo Ê•â€¢á´¥â€¢Ê” Bear</a><br></footer></body></html>