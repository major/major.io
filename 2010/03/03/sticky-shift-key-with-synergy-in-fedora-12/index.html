<!doctype html><html lang=en-us><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://major.io/favicon.ico><title>Sticky shift key with synergy in Fedora 12 | Major Hayden's Blog ðŸ¤ </title><meta name=title content="Sticky shift key with synergy in Fedora 12"><meta name=description content="My synergy setup at work is relatively simple. I have a MacBook Pro running Snow Leopard that acts as a synergy server and a desktop running Fedora 12 as a synergy client. On the Mac, I use SynergyKM to manage the synergy server. The Fedora box uses my gdm strategy for starting synergy at the login screen and in GNOME.
I kept having an issue where the shift key would become stuck regardless of the settings I set for the client or server."><meta name=keywords content="fedora,gdm,keyboard,mac,synergy,"><meta property="og:title" content="Sticky shift key with synergy in Fedora 12"><meta property="og:description" content="My synergy setup at work is relatively simple. I have a MacBook Pro running Snow Leopard that acts as a synergy server and a desktop running Fedora 12 as a synergy client. On the Mac, I use SynergyKM to manage the synergy server. The Fedora box uses my gdm strategy for starting synergy at the login screen and in GNOME.
I kept having an issue where the shift key would become stuck regardless of the settings I set for the client or server."><meta property="og:type" content="article"><meta property="og:url" content="https://major.io/2010/03/03/sticky-shift-key-with-synergy-in-fedora-12/"><meta property="og:image" content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2010-03-04T02:44:12+00:00"><meta property="article:modified_time" content="2010-03-04T02:44:12+00:00"><meta property="og:site_name" content="Major Hayden's Blog ðŸ¤ "><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta name=twitter:title content="Sticky shift key with synergy in Fedora 12"><meta name=twitter:description content="My synergy setup at work is relatively simple. I have a MacBook Pro running Snow Leopard that acts as a synergy server and a desktop running Fedora 12 as a synergy client. On the Mac, I use SynergyKM to manage the synergy server. The Fedora box uses my gdm strategy for starting synergy at the login screen and in GNOME.
I kept having an issue where the shift key would become stuck regardless of the settings I set for the client or server."><meta name=twitter:site content="@mhayden"><meta itemprop=name content="Sticky shift key with synergy in Fedora 12"><meta itemprop=description content="My synergy setup at work is relatively simple. I have a MacBook Pro running Snow Leopard that acts as a synergy server and a desktop running Fedora 12 as a synergy client. On the Mac, I use SynergyKM to manage the synergy server. The Fedora box uses my gdm strategy for starting synergy at the login screen and in GNOME.
I kept having an issue where the shift key would become stuck regardless of the settings I set for the client or server."><meta itemprop=datePublished content="2010-03-04T02:44:12+00:00"><meta itemprop=dateModified content="2010-03-04T02:44:12+00:00"><meta itemprop=wordCount content="373"><meta itemprop=image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta itemprop=keywords content="fedora,gdm,keyboard,mac,synergy,"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:820px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px}div.highlight code{background-color:unset;color:initial}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style></head><body><header><a href=../../../../ class=title><h2>Major Hayden's Blog ðŸ¤ </h2></a><nav><a href=../../../../>Home</a>
<a href=../../../../ham-radio-faq>Ham Radio</a>
<a href=../../../../icanhazip-com-faq>icanhazip FAQ</a>
<a href=../../../../posts>Posts</a></nav><script async src=https://media.ethicalads.io/media/client/ethicalads.min.js></script><div data-ea-publisher=major-io data-ea-type=text></div></header><main><h1>Sticky shift key with synergy in Fedora 12</h1><i><time datetime=2010-03-04 pubdate>2010-03-04</time></i>
<content><p>My synergy setup at work is relatively simple. I have a MacBook Pro running Snow Leopard that acts as a synergy server and a desktop running Fedora 12 as a synergy client. On the Mac, I use SynergyKM to manage the synergy server. The Fedora box uses <a href=http://rackerhacker.com/2008/07/30/automatically-starting-synergy-in-gdm-in-ubuntufedora/>my gdm strategy</a> for starting synergy at the login screen and in GNOME.</p><p>I kept having an issue where the shift key would become stuck regardless of the settings I set for the client or server. The <code>halfDuplexCapsLock</code> <a href=http://synergy2.sourceforge.net/configuration.html>configuration option</a> had no effect. After installing <code>xkeycaps</code>, I found that both shift keys were getting stuck if I brought the mouse back and forth between Mac and Fedora twice.</p><p>I decided to run a test. I started the client with the debug argument and moved the mouse to my Fedora box. At that point, I pressed the letter &lsquo;a&rsquo; and saw:</p><pre><code>DEBUG1: CXWindowsKeyState.cpp,195:   032 (00000000) up
DEBUG1: CXWindowsKeyState.cpp,195:   03e (00000000) up
DEBUG1: CXWindowsKeyState.cpp,195:   026 (00000000) down
DEBUG1: CXWindowsKeyState.cpp,195:   032 (00000000) down
DEBUG1: CXWindowsKeyState.cpp,195:   03e (00000000) down
DEBUG1: CXWindowsKeyState.cpp,195:   026 (00000000) up
</code></pre><p>I brought the mouse back to the Mac and then back to Fedora. I pressed &lsquo;a&rsquo; again and saw:</p><pre><code>DEBUG1: CXWindowsKeyState.cpp,195:   026 (00000000) down
DEBUG1: CXWindowsKeyState.cpp,195:   026 (00000000) up
DEBUG1: CXWindowsKeyState.cpp,195:   026 (00000000) down
DEBUG1: CXWindowsKeyState.cpp,195:   026 (00000000) up
</code></pre><p>After dumping the keyboard layout with <code>xmodmap</code> I found the keys that corresponded with the key numbers:</p><ul><li>032 - Left shift</li><li>03e - Right shift</li><li>026 - a</li></ul><p>If I tapped the left shift, I could clear the key press, but I couldn&rsquo;t clear the right shift key (it was stuck down according to Fedora&rsquo;s X server). When I hooked up a physical keyboard and mouse, I was able to use them normally without any keybinding problems.</p><p>The root cause: When synergy started in <code>/etc/gdm/PreSession/Default</code> after the gdm login, the keyboard layout wasn&rsquo;t set up properly. The X server was setting up the keyboard layout later in the startup process and this confusion caused the shift keys to get stuck. Fedora 12 uses evdev to probe for keyboards during X&rsquo;s startup and eventually settles on a default layout if none are explicitly defined.</p><p>The fix: I added the synergy startup to the GNOME startup items and it works flawlessly.</p></content><p><a href=https://major.io/tags/fedora/>#fedora</a>
<a href=https://major.io/tags/gdm/>#gdm</a>
<a href=https://major.io/tags/keyboard/>#keyboard</a>
<a href=https://major.io/tags/mac/>#mac</a>
<a href=https://major.io/tags/synergy/>#synergy</a></p></main><footer><hr>CC-BY-SA 4.0 &#187;
Made with <a href=https://gohugo.io/>Hugo</a> &#187;
Theme based on <a href=https://github.com/janraasch/hugo-bearblog/>Hugo Ê•â€¢á´¥â€¢Ê” Bear</a><br></footer></body></html>