<!doctype html><html lang=en-us><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://major.io/favicon.ico><title>Crash course in dsh | Major Hayden's Blog ðŸ¤ </title><meta name=title content="Crash course in dsh"><meta name=description content="Thanks to a recommendation from [Michael][1] and [Florian][2], I&rsquo;ve been using [dsh][3] with a lot of success for quite some time. In short, dsh is a small application which will allow you to run commands across many servers via ssh very quickly.
You may be wondering: &ldquo;Why not just use ssh in a for loop?&rdquo; Sure, you could do something like this in bash:
 But dsh allows you to do this: In addition, dsh allows you to run the commands concurrently (-c) or one after the other (-w)."><meta name=keywords content="command line,dsh,puppet,ssh,sysadmin,"><meta property="og:title" content="Crash course in dsh"><meta property="og:description" content="Thanks to a recommendation from [Michael][1] and [Florian][2], I&rsquo;ve been using [dsh][3] with a lot of success for quite some time. In short, dsh is a small application which will allow you to run commands across many servers via ssh very quickly.
You may be wondering: &ldquo;Why not just use ssh in a for loop?&rdquo; Sure, you could do something like this in bash:
 But dsh allows you to do this: In addition, dsh allows you to run the commands concurrently (-c) or one after the other (-w)."><meta property="og:type" content="article"><meta property="og:url" content="https://major.io/2010/01/20/crash-course-in-dsh/"><meta property="og:image" content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2010-01-20T14:47:56+00:00"><meta property="article:modified_time" content="2010-01-20T14:47:56+00:00"><meta property="og:site_name" content="Major Hayden's Blog ðŸ¤ "><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta name=twitter:title content="Crash course in dsh"><meta name=twitter:description content="Thanks to a recommendation from [Michael][1] and [Florian][2], I&rsquo;ve been using [dsh][3] with a lot of success for quite some time. In short, dsh is a small application which will allow you to run commands across many servers via ssh very quickly.
You may be wondering: &ldquo;Why not just use ssh in a for loop?&rdquo; Sure, you could do something like this in bash:
 But dsh allows you to do this: In addition, dsh allows you to run the commands concurrently (-c) or one after the other (-w)."><meta name=twitter:site content="@mhayden"><meta itemprop=name content="Crash course in dsh"><meta itemprop=description content="Thanks to a recommendation from [Michael][1] and [Florian][2], I&rsquo;ve been using [dsh][3] with a lot of success for quite some time. In short, dsh is a small application which will allow you to run commands across many servers via ssh very quickly.
You may be wondering: &ldquo;Why not just use ssh in a for loop?&rdquo; Sure, you could do something like this in bash:
 But dsh allows you to do this: In addition, dsh allows you to run the commands concurrently (-c) or one after the other (-w)."><meta itemprop=datePublished content="2010-01-20T14:47:56+00:00"><meta itemprop=dateModified content="2010-01-20T14:47:56+00:00"><meta itemprop=wordCount content="371"><meta itemprop=image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta itemprop=keywords content="command line,dsh,puppet,ssh,sysadmin,"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:820px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px}div.highlight code{background-color:unset;color:initial}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style></head><body><header><a href=../../../../ class=title><h2>Major Hayden's Blog ðŸ¤ </h2></a><nav><a href=../../../../>Home</a>
<a href=../../../../ham-radio-faq>Ham Radio</a>
<a href=../../../../icanhazip-com-faq>icanhazip FAQ</a>
<a href=../../../../posts>Posts</a></nav><script async src=https://media.ethicalads.io/media/client/ethicalads.min.js></script><div data-ea-publisher=major-io data-ea-type=text></div></header><main><h1>Crash course in dsh</h1><i><time datetime=2010-01-20 pubdate>2010-01-20</time></i>
<content><p>Thanks to a recommendation from [Michael][1] and [Florian][2], I&rsquo;ve been using [dsh][3] with a lot of success for quite some time. In short, dsh is a small application which will allow you to run commands across many servers via ssh very quickly.</p><p>You may be wondering: &ldquo;Why not just use ssh in a for loop?&rdquo; Sure, you could do something like this in bash:</p><pre><code>

But dsh allows you to do this:

</code></pre><p>In addition, dsh allows you to run the commands concurrently (-c) or one after the other (-w). You can tell it to prepend each line with the machine&rsquo;s name (-M) or it can omit the machine name from the output (-H). If you need to pass extra options, such as which ssh key to use, or an alternative port, you can do that as well (-o). All of these command line options can be tossed into a configuration file if you have a default set of options you prefer.</p><p>Another thing that makes dsh more powerful is the groups feature. Let&rsquo;s say you have three groups of servers - some are in California, others in Texas, and still others in New York. You could make three files for the groups:</p><ul><li>~/.dsh/group/california</li><li>~/.dsh/group/texas</li><li>~/.dsh/group/newyork</li></ul><p>Inside each file, you just need to list the hosts one after the other. Here&rsquo;s the <code>~/.dsh/group/texas</code> group file:</p><pre><code>db1.tx.mydomain.com
db2.tx.mydomain.com
web1.tx.mydomain.com
web2.tx.mydomain.com
#web3.tx.mydomain.com
</code></pre><p>As you can see, dsh handles comments in the hosts file. In the above example, the web3 server will be skipped since it&rsquo;s prepended with a comment. Let&rsquo;s say you want to check the uptime on all of the Texas servers as fast as possible:</p><pre><code>

That will run the `uptime` command on all of the servers in the Texas group concurrently. If you need to run it on two groups at once, just pass another group (eg. `-g texas -g california`) as an argument. You can also run the commands against all of your groups (-a).

The dsh command can really help you if you need to gather information or run simple commands on many remote servers. If you find yourself using it often for systems management, you may want to consider something like [puppet][4].

 [1]: http://twitter.com/mshuler
 [2]: http://twitter.com/pandemicsyn
 [3]: http://www.netfort.gr.jp/~dancer/software/dsh.html.en
 [4]: http://reductivelabs.com/products/puppet/
</code></pre></content><p><a href=https://major.io/tags/command-line/>#command line</a>
<a href=https://major.io/tags/dsh/>#dsh</a>
<a href=https://major.io/tags/puppet/>#puppet</a>
<a href=https://major.io/tags/ssh/>#ssh</a>
<a href=https://major.io/tags/sysadmin/>#sysadmin</a></p></main><footer><hr>CC-BY-SA 4.0 &#187;
Made with <a href=https://gohugo.io/>Hugo</a> &#187;
Theme based on <a href=https://github.com/janraasch/hugo-bearblog/>Hugo Ê•â€¢á´¥â€¢Ê” Bear</a><br></footer></body></html>