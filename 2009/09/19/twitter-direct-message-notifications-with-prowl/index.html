<!doctype html><html lang=en-us><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://major.io/favicon.ico><title>Twitter direct message notifications with Prowl | Major Hayden's Blog ü§†</title><meta name=title content="Twitter direct message notifications with Prowl"><meta name=description content="If you want instant notifications of a direct message on Twitter on your iPhone, you have a few options. You could set up your mobile device to receive SMS messages and get them quickly, but you&rsquo;re stuck paying for all of those incoming SMS messages. However, it&rsquo;s annoying when you follow an account, and then they follow and DM you at 4AM. Twitter allows you to set quiet hours, but then you don&rsquo;t see any notifications on your phone when you wake up."><meta name=keywords content><meta property="og:title" content="Twitter direct message notifications with Prowl"><meta property="og:description" content="If you want instant notifications of a direct message on Twitter on your iPhone, you have a few options. You could set up your mobile device to receive SMS messages and get them quickly, but you&rsquo;re stuck paying for all of those incoming SMS messages. However, it&rsquo;s annoying when you follow an account, and then they follow and DM you at 4AM. Twitter allows you to set quiet hours, but then you don&rsquo;t see any notifications on your phone when you wake up."><meta property="og:type" content="article"><meta property="og:url" content="https://major.io/2009/09/19/twitter-direct-message-notifications-with-prowl/"><meta property="og:image" content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2009-09-19T17:48:27+00:00"><meta property="article:modified_time" content="2009-09-19T17:48:27+00:00"><meta property="og:site_name" content="Major Hayden's Blog ü§†"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta name=twitter:title content="Twitter direct message notifications with Prowl"><meta name=twitter:description content="If you want instant notifications of a direct message on Twitter on your iPhone, you have a few options. You could set up your mobile device to receive SMS messages and get them quickly, but you&rsquo;re stuck paying for all of those incoming SMS messages. However, it&rsquo;s annoying when you follow an account, and then they follow and DM you at 4AM. Twitter allows you to set quiet hours, but then you don&rsquo;t see any notifications on your phone when you wake up."><meta name=twitter:site content="@mhayden"><meta itemprop=name content="Twitter direct message notifications with Prowl"><meta itemprop=description content="If you want instant notifications of a direct message on Twitter on your iPhone, you have a few options. You could set up your mobile device to receive SMS messages and get them quickly, but you&rsquo;re stuck paying for all of those incoming SMS messages. However, it&rsquo;s annoying when you follow an account, and then they follow and DM you at 4AM. Twitter allows you to set quiet hours, but then you don&rsquo;t see any notifications on your phone when you wake up."><meta itemprop=datePublished content="2009-09-19T17:48:27+00:00"><meta itemprop=dateModified content="2009-09-19T17:48:27+00:00"><meta itemprop=wordCount content="762"><meta itemprop=image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta itemprop=keywords content><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:820px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px}div.highlight code{background-color:unset;color:initial}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style></head><body><header><a href=../../../../ class=title><h2>Major Hayden's Blog ü§†</h2></a><nav><a href=../../../../>Home</a>
<a href=../../../../ham-radio-faq>Ham Radio</a>
<a href=../../../../icanhazip-com-faq>icanhazip FAQ</a>
<a href=../../../../posts>Posts</a></nav></header><main><h1>Twitter direct message notifications with Prowl</h1><i><time datetime=2009-09-19 pubdate>2009-09-19</time></i>
<content><p>If you want instant notifications of a direct message on Twitter on your iPhone, you have a few options. You could set up your mobile device to receive SMS messages and get them quickly, but you&rsquo;re stuck paying for all of those incoming SMS messages. However, it&rsquo;s annoying when you follow an account, and then they follow and DM you at 4AM. Twitter <a href=http://twitter.com/devices>allows you to set quiet hours</a>, but then you don&rsquo;t see any notifications on your phone when you wake up.</p><p>You could always pick up Boxcar [<a href="http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewSoftware?id=321493542&mt=8">iTunes Link</a>] from iTunes and use it&rsquo;s plug-and-play setup routine to begin receiving notifications of direct messages. The downside of the app is that the notifications are fairly delayed (sometimes 5-10 minutes late in my experience) and you&rsquo;re paying $2.99 for an app that can only handle one Twitter account. Also, the app only handles Twitter direct messages and replies ‚Äì nothing else.</p><p>Here&rsquo;s where Prowl [<a href="http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewSoftware?id=320876271&mt=8">iTunes Link</a>] comes in. You can toss anything at the <a href=http://prowl.weks.net/api.php>Prowl API</a> and it comes up on your phone within seconds. The app is $2.99, but you can sent up to 1,000 notifications per hour through the API at no additional cost. <strong>Seriously ‚Äì would you ever need 1,000 notifications per hour?</strong></p><p>First, you&rsquo;ll need two ruby gems for this project. The first of which is the <a href=http://github.com/augustl/ruby-prowl>prowl</a> gem by <a href=http://github.com/augustl>August Lilleaas</a>, and the second is <a href=http://tmail.rubyforge.org/>tmail</a>. If you haven&rsquo;t installed gems from github before, you&rsquo;ll need to run this first:</p><p>Install the gems:</p><p>Once they&rsquo;re installed, you can toss this script into <code>/usr/local/bin/twitterdm-prowl.rb</code>:</p><p>At the beginning of the script, we rope in rubygems, tmail and prowl. We&rsquo;re going to read a message in from standard input (I&rsquo;ll show you how that works in a moment) and then parse it with tmail. The subject and body are stripped down to make it easier to display on your iPhone&rsquo;s screen. Finally, we wrap up by sending the data to the Prowl API with a normal priority.</p><p>As far as customizations go, you&rsquo;ll obviously need to input your Prowl API key for the script to work. You can adjust the regular expressions to include different parts of the e-mail if you need them. Also, feel free to adjust the application name (‚ÄúTWITDM‚Äù) in the script to something else. The priority can run from 2 (OMG emergency) to -2 (I don&rsquo;t care). I chose 0 (normal) for my script.</p><p>Now, make sure the script is executable:</p><p>We&rsquo;ll need to set up an alias in <code>/etc/aliases</code> to feed in this e-mails to our script:</p><p>Run <code>newaliases</code> to ensure that your alias ends up in the hashed aliases table.</p><p>At this point, you&rsquo;ll need to ensure that your emails actually make it into the alias you set up. You&rsquo;ll need something that can filter your e-mails and forward them based on the filter. If you want a strictly Linux solution, you could use procmail for that. If you&rsquo;re e-mail provider has server-side filters that can forward e-mails (<a href=http://www.rackspace.com/email_hosting/>as mine does</a>), that&rsquo;s the easiest method. Twitter provides some great e-mail headers that you can use for filtering:</p><p>I use <code>X-Twitteremailtype: direct_message</code> to filter and forward, but it&rsquo;s up to you on how you do it.</p><p>Now, use another account to send yourself a direct message and you should get a notification pretty quickly (see the image on the right). If you didn&rsquo;t get a notification, try going to the Prowl site and <a href=https://prowl.weks.net/add_notification.php>send yourself a test notification</a>. If the test notification fails, then you may have an issue with Prowl itself (this hasn&rsquo;t ever happened to me).</p><p>If the test notification works, but your Twitter notifications don&rsquo;t, check your mail logs. Your filters may not be sending the direct message e-mails to your alias, your alias may not be configured properly, or the permissions on the ruby script you made may be incorrect.</p><p>If you want to keep testing without sending yourself a ton of direct messages, just send yourself one direct message. Once you receive the e-mail notification from Twitter, open it up and view the source of the message in your e-mail client (command-option-U in Apple Mail). Copy the entire source of the message to your clipboard, paste it into your favorite text editor on your server, and save it. You can call your script with the e-mail just like your mail server would with the following:</p><p>By going that route, you be testing the script itself, and your e-mail server will be removed from the equation.</p><p>If you&rsquo;re still having trouble, let me know and I&rsquo;ll be glad to help!</p></content><p></p></main><footer><hr>CC-BY-SA 4.0 &#187;
Made with <a href=https://gohugo.io/>Hugo</a> &#187;
Theme based on <a href=https://github.com/janraasch/hugo-bearblog/>Hugo  ï‚Ä¢·¥•‚Ä¢ î Bear</a><br><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "aca54cb1322647b89c43a40751f02ce4"}'></script></footer></body></html>