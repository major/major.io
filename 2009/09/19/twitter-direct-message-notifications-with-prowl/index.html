<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="Major Hayden"><meta name=description content="If you want instant notifications of a direct message on Twitter on your iPhone, you have a few options. You could set up your mobile device to receive SMS messages and get them quickly, but you&amp;rsquo;re stuck paying for all of those incoming SMS messages. However, it&amp;rsquo;s annoying when you follow an account, and then they follow and DM you at 4AM. Twitter allows you to set quiet hours, but then you don&amp;rsquo;t see any notifications on your phone when you wake up."><meta name=keywords content><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://major.io/2009/09/19/twitter-direct-message-notifications-with-prowl/><title>Twitter direct message notifications with Prowl :: Major Hayden ü§† ‚Äî Words of wisdom from a social nerd</title><link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css rel=stylesheet type=text/css><link rel=stylesheet href=../../../../main.89fa80e2143f71bd5c96a7c94e531dec3276a367e22f87e74a76026ab64680bf.css><link rel=apple-touch-icon sizes=180x180 href=../../../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../../../favicon-16x16.png><link rel=manifest href=../../../../site.webmanifest><link rel=mask-icon href=../../../../safari-pinned-tab.svg color=#252627><link rel="shortcut icon" href=../../../../favicon.ico><meta name=msapplication-TileColor content="#252627"><meta name=theme-color content="#252627"><meta itemprop=name content="Twitter direct message notifications with Prowl"><meta itemprop=description content="If you want instant notifications of a direct message on Twitter on your iPhone, you have a few options. You could set up your mobile device to receive SMS messages and get them quickly, but you&rsquo;re stuck paying for all of those incoming SMS messages. However, it&rsquo;s annoying when you follow an account, and then they follow and DM you at 4AM. Twitter allows you to set quiet hours, but then you don&rsquo;t see any notifications on your phone when you wake up."><meta itemprop=datePublished content="2009-09-19T17:48:27+00:00"><meta itemprop=dateModified content="2009-09-19T17:48:27+00:00"><meta itemprop=wordCount content="762"><meta itemprop=image content="https://major.io"><meta itemprop=keywords content><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://major.io"><meta name=twitter:title content="Twitter direct message notifications with Prowl"><meta name=twitter:description content="If you want instant notifications of a direct message on Twitter on your iPhone, you have a few options. You could set up your mobile device to receive SMS messages and get them quickly, but you&rsquo;re stuck paying for all of those incoming SMS messages. However, it&rsquo;s annoying when you follow an account, and then they follow and DM you at 4AM. Twitter allows you to set quiet hours, but then you don&rsquo;t see any notifications on your phone when you wake up."><meta name=twitter:site content="@mhayden"><meta property="article:section" content="Blog Posts"><meta property="article:published_time" content="2009-09-19 17:48:27 +0000 UTC"><style type=text/css>html{letter-spacing:unset}</style></head><body><div class=container><header class=header><span class=header__inner><a href=../../../../ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>$ echo major.io</span>
<span class=logo__cursor style=visibility:hidden></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=../../../../ham-radio-faq>hamradio</a></li><li><a href=../../../../icanhazip-com-faq>icanhazip</a></li><li><a href=../../../../posts/>posts</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info></p></div><article><h2 class=post-title><a href=https://major.io/2009/09/19/twitter-direct-message-notifications-with-prowl/>Twitter direct message notifications with Prowl</a></h2><div class=post-content><p>If you want instant notifications of a direct message on Twitter on your iPhone, you have a few options. You could set up your mobile device to receive SMS messages and get them quickly, but you&rsquo;re stuck paying for all of those incoming SMS messages. However, it&rsquo;s annoying when you follow an account, and then they follow and DM you at 4AM. Twitter <a href=http://twitter.com/devices>allows you to set quiet hours</a>, but then you don&rsquo;t see any notifications on your phone when you wake up.</p><p>You could always pick up Boxcar [<a href="http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewSoftware?id=321493542&mt=8">iTunes Link</a>] from iTunes and use it&rsquo;s plug-and-play setup routine to begin receiving notifications of direct messages. The downside of the app is that the notifications are fairly delayed (sometimes 5-10 minutes late in my experience) and you&rsquo;re paying $2.99 for an app that can only handle one Twitter account. Also, the app only handles Twitter direct messages and replies ‚Äì nothing else.</p><p>Here&rsquo;s where Prowl [<a href="http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewSoftware?id=320876271&mt=8">iTunes Link</a>] comes in. You can toss anything at the <a href=http://prowl.weks.net/api.php>Prowl API</a> and it comes up on your phone within seconds. The app is $2.99, but you can sent up to 1,000 notifications per hour through the API at no additional cost. <strong>Seriously ‚Äì would you ever need 1,000 notifications per hour?</strong></p><p>First, you&rsquo;ll need two ruby gems for this project. The first of which is the <a href=http://github.com/augustl/ruby-prowl>prowl</a> gem by <a href=http://github.com/augustl>August Lilleaas</a>, and the second is <a href=http://tmail.rubyforge.org/>tmail</a>. If you haven&rsquo;t installed gems from github before, you&rsquo;ll need to run this first:</p><p>Install the gems:</p><p>Once they&rsquo;re installed, you can toss this script into <code>/usr/local/bin/twitterdm-prowl.rb</code>:</p><p>At the beginning of the script, we rope in rubygems, tmail and prowl. We&rsquo;re going to read a message in from standard input (I&rsquo;ll show you how that works in a moment) and then parse it with tmail. The subject and body are stripped down to make it easier to display on your iPhone&rsquo;s screen. Finally, we wrap up by sending the data to the Prowl API with a normal priority.</p><p>As far as customizations go, you&rsquo;ll obviously need to input your Prowl API key for the script to work. You can adjust the regular expressions to include different parts of the e-mail if you need them. Also, feel free to adjust the application name (‚ÄúTWITDM‚Äù) in the script to something else. The priority can run from 2 (OMG emergency) to -2 (I don&rsquo;t care). I chose 0 (normal) for my script.</p><p>Now, make sure the script is executable:</p><p>We&rsquo;ll need to set up an alias in <code>/etc/aliases</code> to feed in this e-mails to our script:</p><p>Run <code>newaliases</code> to ensure that your alias ends up in the hashed aliases table.</p><p>At this point, you&rsquo;ll need to ensure that your emails actually make it into the alias you set up. You&rsquo;ll need something that can filter your e-mails and forward them based on the filter. If you want a strictly Linux solution, you could use procmail for that. If you&rsquo;re e-mail provider has server-side filters that can forward e-mails (<a href=http://www.rackspace.com/email_hosting/>as mine does</a>), that&rsquo;s the easiest method. Twitter provides some great e-mail headers that you can use for filtering:</p><p>I use <code>X-Twitteremailtype: direct_message</code> to filter and forward, but it&rsquo;s up to you on how you do it.</p><p>Now, use another account to send yourself a direct message and you should get a notification pretty quickly (see the image on the right). If you didn&rsquo;t get a notification, try going to the Prowl site and <a href=https://prowl.weks.net/add_notification.php>send yourself a test notification</a>. If the test notification fails, then you may have an issue with Prowl itself (this hasn&rsquo;t ever happened to me).</p><p>If the test notification works, but your Twitter notifications don&rsquo;t, check your mail logs. Your filters may not be sending the direct message e-mails to your alias, your alias may not be configured properly, or the permissions on the ruby script you made may be incorrect.</p><p>If you want to keep testing without sending yourself a ton of direct messages, just send yourself one direct message. Once you receive the e-mail notification from Twitter, open it up and view the source of the message in your e-mail client (command-option-U in Apple Mail). Copy the entire source of the message to your clipboard, paste it into your favorite text editor on your server, and save it. You can call your script with the e-mail just like your mail server would with the following:</p><p>By going that route, you be testing the script itself, and your e-mail server will be removed from the equation.</p><p>If you&rsquo;re still having trouble, let me know and I&rsquo;ll be glad to help!</p></div></article><hr><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-folder meta-icon"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg><span class=tag><a href=https://major.io/categories/blog-posts/>Blog Posts</a></span></p></div></main></div><footer class=footer><div class=footer__inner><div class=footer__content><span>&copy; 2021</span>
<span><a href=https://major.io>Major Hayden</a></span>
<span><a href=https://creativecommons.org/licenses/by-sa/2.0/ target=_blank rel=noopener>CC BY-SA 2.0</a></span><span><a href=https://major.io/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></span></div></div><div class=footer__inner><div class=footer__content><span>Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>Made with &#10084; by <a href=https://github.com/rhazdon>Djordje Atlialp</a></span></div></div></footer></div><script type=text/javascript src=../../../../bundle.min.e9f93b80e78a22e6f04cbb5f73e0f9c4ba60ff73a2a0ef85965c688f93dd1f2722a282e30e485603e4c65b1b346720e35f213435ec5556e196a97a68d097c80f.js integrity="sha512-6fk7gOeKIubwTLtfc+D5xLpg/3OioO+Fllxoj5PdHyciooLjDkhWA+TGWxs0ZyDjXyE0NexVVuGWqXpo0JfIDw=="></script></body></html>