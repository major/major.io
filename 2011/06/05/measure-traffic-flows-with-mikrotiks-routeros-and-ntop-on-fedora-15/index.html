<!doctype html><html lang=en-us><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://major.io/favicon.ico><title>Measure traffic flows with Mikrotik‚Äôs RouterOS and ntop on Fedora 15 | Major Hayden's Blog ü§†</title><meta name=title content="Measure traffic flows with Mikrotik‚Äôs RouterOS and ntop on Fedora 15"><meta name=description content="It&rsquo;s no secret that I&rsquo;m a big fan of the RouterBoard network devices paired with Mikrotik&rsquo;s RouterOS. I discovered today that these devices offer Cisco NetFlow-compatible statistics gathering which can be directed to a Linux box running ntop. Mikrotik calls it ‚Äútraffic flow‚Äù and it&rsquo;s much more efficient than setting up a mirrored or spanned port and then using ntop to dump traffic on that interface.
These instructions are for Fedora 15, but they should be pretty similar on most other Linux distributions."><meta name=keywords content="fedora,linux,mikrotik,networking,ntop,"><meta property="og:title" content="Measure traffic flows with Mikrotik‚Äôs RouterOS and ntop on Fedora 15"><meta property="og:description" content="It&rsquo;s no secret that I&rsquo;m a big fan of the RouterBoard network devices paired with Mikrotik&rsquo;s RouterOS. I discovered today that these devices offer Cisco NetFlow-compatible statistics gathering which can be directed to a Linux box running ntop. Mikrotik calls it ‚Äútraffic flow‚Äù and it&rsquo;s much more efficient than setting up a mirrored or spanned port and then using ntop to dump traffic on that interface.
These instructions are for Fedora 15, but they should be pretty similar on most other Linux distributions."><meta property="og:type" content="article"><meta property="og:url" content="https://major.io/2011/06/05/measure-traffic-flows-with-mikrotiks-routeros-and-ntop-on-fedora-15/"><meta property="og:image" content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2011-06-05T14:58:26+00:00"><meta property="article:modified_time" content="2011-06-05T14:58:26+00:00"><meta property="og:site_name" content="Major Hayden's Blog ü§†"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta name=twitter:title content="Measure traffic flows with Mikrotik‚Äôs RouterOS and ntop on Fedora 15"><meta name=twitter:description content="It&rsquo;s no secret that I&rsquo;m a big fan of the RouterBoard network devices paired with Mikrotik&rsquo;s RouterOS. I discovered today that these devices offer Cisco NetFlow-compatible statistics gathering which can be directed to a Linux box running ntop. Mikrotik calls it ‚Äútraffic flow‚Äù and it&rsquo;s much more efficient than setting up a mirrored or spanned port and then using ntop to dump traffic on that interface.
These instructions are for Fedora 15, but they should be pretty similar on most other Linux distributions."><meta name=twitter:site content="@mhayden"><meta itemprop=name content="Measure traffic flows with Mikrotik‚Äôs RouterOS and ntop on Fedora 15"><meta itemprop=description content="It&rsquo;s no secret that I&rsquo;m a big fan of the RouterBoard network devices paired with Mikrotik&rsquo;s RouterOS. I discovered today that these devices offer Cisco NetFlow-compatible statistics gathering which can be directed to a Linux box running ntop. Mikrotik calls it ‚Äútraffic flow‚Äù and it&rsquo;s much more efficient than setting up a mirrored or spanned port and then using ntop to dump traffic on that interface.
These instructions are for Fedora 15, but they should be pretty similar on most other Linux distributions."><meta itemprop=datePublished content="2011-06-05T14:58:26+00:00"><meta itemprop=dateModified content="2011-06-05T14:58:26+00:00"><meta itemprop=wordCount content="279"><meta itemprop=image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta itemprop=keywords content="fedora,linux,mikrotik,networking,ntop,"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:820px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px}div.highlight code{background-color:unset;color:initial}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style></head><body><header><a href=../../../../ class=title><h2>Major Hayden's Blog ü§†</h2></a><nav><a href=../../../../>Home</a>
<a href=../../../../ham-radio-faq>Ham Radio</a>
<a href=../../../../icanhazip-com-faq>icanhazip FAQ</a>
<a href=../../../../posts>Posts</a></nav><script async src=https://media.ethicalads.io/media/client/ethicalads.min.js></script><div class="adaptive raised" data-ea-publisher=major-io data-ea-type=text></div></header><main><h1>Measure traffic flows with Mikrotik‚Äôs RouterOS and ntop on Fedora 15</h1><i><time datetime=2011-06-05 pubdate>2011-06-05</time></i>
<content><p>It&rsquo;s no secret that I&rsquo;m a big fan of the <a href=http://www.routerboard.com/>RouterBoard</a> network devices paired with <a href=http://www.mikrotik.com/software.html>Mikrotik&rsquo;s RouterOS</a>. I discovered today that these devices offer Cisco NetFlow-compatible statistics gathering which can be directed to a Linux box running <a href=http://www.ntop.org/>ntop</a>. Mikrotik calls it ‚Äútraffic flow‚Äù and it&rsquo;s much more efficient than setting up a mirrored or spanned port and then using ntop to dump traffic on that interface.</p><p>These instructions are for Fedora 15, but they should be pretty similar on most other Linux distributions. Install ntop first:</p><p>Adjust <code>/etc/ntop.conf</code> so that ntop listens on something other than localhost:</p><p>I had to comment out the <code>sched_yield()</code> option to get ntop to start:</p><p>Set an admin password for ntop:</p><p>Once you set the password, you may need to press CTRL-C to get back to a prompt in some ntop versions.</p><p>Start ntop:</p><p>Open a web browser and open <a href=http://example.com:3000>http://example.com:3000</a> to access the ntop interface. Roll your mouse over the <strong>Plugins</strong> menu, then <strong>NetFlow</strong>, and then click <strong>Activate</strong>. Roll your mouse over the <strong>Plugins</strong> menu again, then <strong>NetFlow</strong>, and then click <strong>Configure</strong>. Click <strong>Add NetFlow Device</strong> and fill in the following:</p><ul><li>Type ‚ÄúMikrotik‚Äù in the <strong>NetFlow Device</strong> section and click <strong>Set Interface Name</strong>.</li><li>Type 2055 in the <strong>Local Collector UDP Port</strong> section and click <strong>Set Port</strong>.</li><li>Type in your router&rsquo;s IP/netmask in the <strong>Virtual NetFlow Interface Network Address</strong> section and click <strong>Set Interface Address</strong>.</li></ul><p>Enabling traffic flow on the Mikrotik can be done with just two configuration lines:</p><p>Wait about a minute and then try reviewing some of the data in the ntop interface. Depending on the amount of traffic on your network, you might see data in as little as 10-15 seconds.</p></content><p><a href=https://major.io/tags/fedora/>#fedora</a>
<a href=https://major.io/tags/linux/>#linux</a>
<a href=https://major.io/tags/mikrotik/>#mikrotik</a>
<a href=https://major.io/tags/networking/>#networking</a>
<a href=https://major.io/tags/ntop/>#ntop</a></p></main><footer><hr>CC-BY-SA 4.0 &#187;
Made with <a href=https://gohugo.io/>Hugo</a> &#187;
Theme based on <a href=https://github.com/janraasch/hugo-bearblog/>Hugo  ï‚Ä¢·¥•‚Ä¢ î Bear</a><br></footer></body></html>