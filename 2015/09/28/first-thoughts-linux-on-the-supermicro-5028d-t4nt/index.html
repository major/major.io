<!doctype html><html lang=en-us><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://major.io/favicon.ico><title>First thoughts: Linux on the Supermicro 5028D-TN4T | Major Hayden's Blog ðŸ¤ </title><meta name=title content="First thoughts: Linux on the Supermicro 5028D-TN4T"><meta name=description content="I&rsquo;ve recently moved over to Rackspace&rsquo;s OpenStack Private Cloud team and the role is full of some great challenges. One of those challenges was figuring out a home lab for testing.
The search My first idea was to pick up some lower-power machines that would give me some infrastructure at a low price with a low power bill as well. I found some Dell Optiplex 3020&rsquo;s on Newegg with Haswell i3&rsquo;s that came in at a good price point."><meta name=keywords content="fedora,linux,networking,supermicro,systemd,"><meta property="og:title" content="First thoughts: Linux on the Supermicro 5028D-TN4T"><meta property="og:description" content="I&rsquo;ve recently moved over to Rackspace&rsquo;s OpenStack Private Cloud team and the role is full of some great challenges. One of those challenges was figuring out a home lab for testing.
The search My first idea was to pick up some lower-power machines that would give me some infrastructure at a low price with a low power bill as well. I found some Dell Optiplex 3020&rsquo;s on Newegg with Haswell i3&rsquo;s that came in at a good price point."><meta property="og:type" content="article"><meta property="og:url" content="https://major.io/2015/09/28/first-thoughts-linux-on-the-supermicro-5028d-t4nt/"><meta property="og:image" content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2015-09-28T12:55:51+00:00"><meta property="article:modified_time" content="2015-09-28T12:55:51+00:00"><meta property="og:site_name" content="Major Hayden's Blog ðŸ¤ "><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta name=twitter:title content="First thoughts: Linux on the Supermicro 5028D-TN4T"><meta name=twitter:description content="I&rsquo;ve recently moved over to Rackspace&rsquo;s OpenStack Private Cloud team and the role is full of some great challenges. One of those challenges was figuring out a home lab for testing.
The search My first idea was to pick up some lower-power machines that would give me some infrastructure at a low price with a low power bill as well. I found some Dell Optiplex 3020&rsquo;s on Newegg with Haswell i3&rsquo;s that came in at a good price point."><meta name=twitter:site content="@mhayden"><meta itemprop=name content="First thoughts: Linux on the Supermicro 5028D-TN4T"><meta itemprop=description content="I&rsquo;ve recently moved over to Rackspace&rsquo;s OpenStack Private Cloud team and the role is full of some great challenges. One of those challenges was figuring out a home lab for testing.
The search My first idea was to pick up some lower-power machines that would give me some infrastructure at a low price with a low power bill as well. I found some Dell Optiplex 3020&rsquo;s on Newegg with Haswell i3&rsquo;s that came in at a good price point."><meta itemprop=datePublished content="2015-09-28T12:55:51+00:00"><meta itemprop=dateModified content="2015-09-28T12:55:51+00:00"><meta itemprop=wordCount content="732"><meta itemprop=image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta itemprop=keywords content="fedora,linux,networking,supermicro,systemd,"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:820px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px}div.highlight code{background-color:unset;color:initial}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style></head><body><header><a href=../../../../ class=title><h2>Major Hayden's Blog ðŸ¤ </h2></a><nav><a href=../../../../>Home</a>
<a href=../../../../ham-radio-faq>Ham Radio</a>
<a href=../../../../icanhazip-com-faq>icanhazip FAQ</a>
<a href=../../../../posts>Posts</a></nav><script async src=https://media.ethicalads.io/media/client/ethicalads.min.js></script><div class="adaptive raised" data-ea-publisher=major-io data-ea-type=text></div></header><main><h1>First thoughts: Linux on the Supermicro 5028D-TN4T</h1><i><time datetime=2015-09-28 pubdate>2015-09-28</time></i>
<content><p>I&rsquo;ve recently moved over to Rackspace&rsquo;s OpenStack Private Cloud team and the role is full of some great challenges. One of those challenges was figuring out a home lab for testing.</p><h2 id=the-search>The search</h2><p>My first idea was to pick up some lower-power machines that would give me some infrastructure at a low price with a low power bill as well. I found some Dell Optiplex 3020&rsquo;s on Newegg with Haswell i3&rsquo;s that came in at a good price point. In addition, they delivered the virtualization extensions that I needed without a high TDP.</p><p>Once I started talking about my search on Twitter, someone piped in with a suggestion:</p><p><img src=../../../../wp-content/uploads/2015/09/SYS-5028D-TN4T_open.jpg alt=1></p><p>Supermicro, eh? I&rsquo;ve had great success with two Supermicro boxes from Silicon Mechanics (and I can&rsquo;t say enough good things about both companies) in my colocation environment. I decided to take a closer look at the <a href=http://www.supermicro.com/products/system/midtower/5028/sys-5028d-tn4t.cfm>Supermicro 5028D-TN4T</a>.</p><p>There&rsquo;s a great review on <a href=http://www.anandtech.com/show/9185/intel-xeon-d-review-performance-per-watt-server-soc-champion/3>AnandTech</a> about the Supermicro 5028D-TN4T. It gets plenty of praise for packing a lot of advanced features into a small, energy-efficient server. AnandTech found that the <a href=http://www.anandtech.com/show/9185/intel-xeon-d-review-performance-per-watt-server-soc-champion/15>idle power draw was around 30 watts</a> and as low as 27 watts in some cases. I haven&rsquo;t tested it with my <a href=http://www.p3international.com/products/p4400.html>Kill A Watt</a> yet, but I intend to do so later this week.</p><h2 id=initial-thoughts>Initial thoughts</h2><p>This chassis is <strong>small</strong>. I snapped a quick photo for some folks who were asking about it on Twitter:</p><p>I&rsquo;ll have better pictures soon in a more detailed review. If you&rsquo;re itching for more photos now, head on over to the AnandTech article I mentioned earlier.</p><p>Installing the RAM was a piece of cake, but I did need to hold a fan shroud out of the way as I installed some of them. There are three spots for installing SSD drives: one for an M.2 SATA drive and two 2.5â€³ drive spots. Routing the cables to the SSD drives is quite easy, but you will have to clip a zip tie or two (<em>carefully</em>).</p><p>The IPMI is fantastic, as expected. If you&rsquo;ve ever used other Supermicro servers with built-in IPMI, then you&rsquo;ll recognize the interface. You have full control over power, fans, and serial output. In addition, the standard iKVM interface is there so you can view the graphical console remotely, attach disks over the network, and power cycle the server. The IPMI was configured to use DHCP out of the box.</p><p>The fan noise is a bit higher than I&rsquo;d like during boot, but it&rsquo;s nothing like your average 1U/2U server. It&rsquo;s louder than my Optiplex 3020 (which is whisper silent) but much quieter than the ASA 5520. The system is very quiet once it finishes booting and it settles down.</p><h2 id=linux-fun>Linux fun</h2><p>As expected, everything worked fine in Linux - except the 10Gb interfaces. It has a X557 controller for the dual 10Gb interfaces:</p><pre><code># lspci | grep Eth
03:00.0 Ethernet controller: Intel Corporation Ethernet Connection X552/X557-AT 10GBASE-T
03:00.1 Ethernet controller: Intel Corporation Ethernet Connection X552/X557-AT 10GBASE-T
05:00.0 Ethernet controller: Intel Corporation I350 Gigabit Network Connection (rev 01)
05:00.1 Ethernet controller: Intel Corporation I350 Gigabit Network Connection (rev 01)
</code></pre><p>The downside here is that the X557 PHY ID wasn&rsquo;t <a href="https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/commit/?id=c2c78d5c35e4f4a9226360bc432dc81b47f163e4">added until Linux 4.2</a>. However, I upgraded the server from Fedora 22 to 23 (and picked up Linux 4.2.1 along the way), and everything worked.</p><p>The onboard 1Gb interfaces showed up as <code>eno1</code> and <code>eno2</code>, as expected, but the 10Gb cards showed up as <code>eth0</code> and <code>eth1</code>. If you&rsquo;ve read my post on <a href=../../../../2015/08/21/understanding-systemds-predictable-network-device-names/>systemd&rsquo;s predictable interface named</a>, you&rsquo;ll notice this is a little unpredictable. The 10Gb interfaces seem to come up as <code>eno1</code> and <code>eno2</code> in udev, but that won&rsquo;t work since the onboard I350 ethernet ports already use those names:</p><pre><code>P: /devices/pci0000:00/0000:00:02.2/0000:03:00.0/net/eth0
E: DEVPATH=/devices/pci0000:00/0000:00:02.2/0000:03:00.0/net/eth0
E: ID_BUS=pci
E: ID_MODEL_FROM_DATABASE=Ethernet Connection X552/X557-AT 10GBASE-T
E: ID_MODEL_ID=0x15ad
E: ID_NET_DRIVER=ixgbe
E: ID_NET_LINK_FILE=/usr/lib/systemd/network/99-default.link
E: ID_NET_NAME=eno1
E: ID_NET_NAME_MAC=enx0cc47a7591c8
E: ID_NET_NAME_ONBOARD=eno1
E: ID_NET_NAME_PATH=enp3s0f0
E: ID_OUI_FROM_DATABASE=Super Micro Computer, Inc.
E: ID_PATH=pci-0000:03:00.0
E: ID_PATH_TAG=pci-0000_03_00_0
E: ID_PCI_CLASS_FROM_DATABASE=Network controller
E: ID_PCI_SUBCLASS_FROM_DATABASE=Ethernet controller
E: ID_VENDOR_FROM_DATABASE=Intel Corporation
E: ID_VENDOR_ID=0x8086
E: IFINDEX=4
E: INTERFACE=eth0
E: SUBSYSTEM=net
E: SYSTEMD_ALIAS=/sys/subsystem/net/devices/eno1
E: TAGS=:systemd:
E: USEC_INITIALIZED=7449982
</code></pre><p>I <a href=https://github.com/systemd/systemd/issues/1390>opened up a Github issue for systemd</a> and it&rsquo;s getting some attention. We&rsquo;ll hopefully see it fixed soon.</p><h2 id=more-to-come>More to come</h2><p>Keep an eye out for a more detailed review once I start throwing some OpenStack workloads on the Supermicro server. I&rsquo;ll also take some more detailed photos and share the additional parts I added to my server.</p></content><p><a href=https://major.io/tags/fedora/>#fedora</a>
<a href=https://major.io/tags/linux/>#linux</a>
<a href=https://major.io/tags/networking/>#networking</a>
<a href=https://major.io/tags/supermicro/>#supermicro</a>
<a href=https://major.io/tags/systemd/>#systemd</a></p></main><footer><hr>CC-BY-SA 4.0 &#187;
Made with <a href=https://gohugo.io/>Hugo</a> &#187;
Theme based on <a href=https://github.com/janraasch/hugo-bearblog/>Hugo Ê•â€¢á´¥â€¢Ê” Bear</a><br></footer></body></html>