<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="Major Hayden"><meta name=description content="I&amp;rsquo;ve recently moved over to Rackspace&amp;rsquo;s OpenStack Private Cloud team and the role is full of some great challenges. One of those challenges was figuring out a home lab for testing.
The search My first idea was to pick up some lower-power machines that would give me some infrastructure at a low price with a low power bill as well. I found some Dell Optiplex 3020&amp;rsquo;s on Newegg with Haswell i3&amp;rsquo;s that came in at a good price point."><meta name=keywords content=",fedora,linux,networking,supermicro,systemd"><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://major.io/2015/09/28/first-thoughts-linux-on-the-supermicro-5028d-t4nt/><title>First thoughts: Linux on the Supermicro 5028D-TN4T :: Major Hayden ðŸ¤  â€” Words of wisdom from a social nerd</title><link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css rel=stylesheet type=text/css><link rel=stylesheet href=../../../../main.89fa80e2143f71bd5c96a7c94e531dec3276a367e22f87e74a76026ab64680bf.css><link rel=apple-touch-icon sizes=180x180 href=../../../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../../../favicon-16x16.png><link rel=manifest href=../../../../site.webmanifest><link rel=mask-icon href=../../../../safari-pinned-tab.svg color=#252627><link rel="shortcut icon" href=../../../../favicon.ico><meta name=msapplication-TileColor content="#252627"><meta name=theme-color content="#252627"><meta itemprop=name content="First thoughts: Linux on the Supermicro 5028D-TN4T"><meta itemprop=description content="I&rsquo;ve recently moved over to Rackspace&rsquo;s OpenStack Private Cloud team and the role is full of some great challenges. One of those challenges was figuring out a home lab for testing.
The search My first idea was to pick up some lower-power machines that would give me some infrastructure at a low price with a low power bill as well. I found some Dell Optiplex 3020&rsquo;s on Newegg with Haswell i3&rsquo;s that came in at a good price point."><meta itemprop=datePublished content="2015-09-28T12:55:51+00:00"><meta itemprop=dateModified content="2015-09-28T12:55:51+00:00"><meta itemprop=wordCount content="732"><meta itemprop=image content="https://major.io"><meta itemprop=keywords content="fedora,linux,networking,supermicro,systemd,"><meta property="article:section" content="Blog Posts"><meta property="article:published_time" content="2015-09-28 12:55:51 +0000 UTC"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="First thoughts: Linux on the Supermicro 5028D-TN4T :: Major Hayden ðŸ¤ "><meta name=twitter:description content><meta name=twitter:site content="https://major.io"><meta name=twitter:creator content="Major Hayden"><meta name=twitter:image content><style type=text/css>html{letter-spacing:unset}</style></head><body class=dark-theme><div class=container><header class=header><span class=header__inner><a href=../../../../ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>$ echo major.io</span>
<span class=logo__cursor style=visibility:hidden></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=../../../../ham-radio-faq>hamradio</a></li><li><a href=../../../../icanhazip-com-faq>icanhazip</a></li><li><a href=../../../../posts/>posts</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info></p></div><article><h2 class=post-title><a href=https://major.io/2015/09/28/first-thoughts-linux-on-the-supermicro-5028d-t4nt/>First thoughts: Linux on the Supermicro 5028D-TN4T</a></h2><div class=post-content><p>I&rsquo;ve recently moved over to Rackspace&rsquo;s OpenStack Private Cloud team and the role is full of some great challenges. One of those challenges was figuring out a home lab for testing.</p><h2 id=the-search>The search</h2><p>My first idea was to pick up some lower-power machines that would give me some infrastructure at a low price with a low power bill as well. I found some Dell Optiplex 3020&rsquo;s on Newegg with Haswell i3&rsquo;s that came in at a good price point. In addition, they delivered the virtualization extensions that I needed without a high TDP.</p><p>Once I started talking about my search on Twitter, someone piped in with a suggestion:</p><p><img src=../../../../wp-content/uploads/2015/09/SYS-5028D-TN4T_open.jpg alt=1></p><p>Supermicro, eh? I&rsquo;ve had great success with two Supermicro boxes from Silicon Mechanics (and I can&rsquo;t say enough good things about both companies) in my colocation environment. I decided to take a closer look at the <a href=http://www.supermicro.com/products/system/midtower/5028/sys-5028d-tn4t.cfm>Supermicro 5028D-TN4T</a>.</p><p>There&rsquo;s a great review on <a href=http://www.anandtech.com/show/9185/intel-xeon-d-review-performance-per-watt-server-soc-champion/3>AnandTech</a> about the Supermicro 5028D-TN4T. It gets plenty of praise for packing a lot of advanced features into a small, energy-efficient server. AnandTech found that the <a href=http://www.anandtech.com/show/9185/intel-xeon-d-review-performance-per-watt-server-soc-champion/15>idle power draw was around 30 watts</a> and as low as 27 watts in some cases. I haven&rsquo;t tested it with my <a href=http://www.p3international.com/products/p4400.html>Kill A Watt</a> yet, but I intend to do so later this week.</p><h2 id=initial-thoughts>Initial thoughts</h2><p>This chassis is <strong>small</strong>. I snapped a quick photo for some folks who were asking about it on Twitter:</p><p>I&rsquo;ll have better pictures soon in a more detailed review. If you&rsquo;re itching for more photos now, head on over to the AnandTech article I mentioned earlier.</p><p>Installing the RAM was a piece of cake, but I did need to hold a fan shroud out of the way as I installed some of them. There are three spots for installing SSD drives: one for an M.2 SATA drive and two 2.5â€³ drive spots. Routing the cables to the SSD drives is quite easy, but you will have to clip a zip tie or two (<em>carefully</em>).</p><p>The IPMI is fantastic, as expected. If you&rsquo;ve ever used other Supermicro servers with built-in IPMI, then you&rsquo;ll recognize the interface. You have full control over power, fans, and serial output. In addition, the standard iKVM interface is there so you can view the graphical console remotely, attach disks over the network, and power cycle the server. The IPMI was configured to use DHCP out of the box.</p><p>The fan noise is a bit higher than I&rsquo;d like during boot, but it&rsquo;s nothing like your average 1U/2U server. It&rsquo;s louder than my Optiplex 3020 (which is whisper silent) but much quieter than the ASA 5520. The system is very quiet once it finishes booting and it settles down.</p><h2 id=linux-fun>Linux fun</h2><p>As expected, everything worked fine in Linux - except the 10Gb interfaces. It has a X557 controller for the dual 10Gb interfaces:</p><pre><code># lspci | grep Eth
03:00.0 Ethernet controller: Intel Corporation Ethernet Connection X552/X557-AT 10GBASE-T
03:00.1 Ethernet controller: Intel Corporation Ethernet Connection X552/X557-AT 10GBASE-T
05:00.0 Ethernet controller: Intel Corporation I350 Gigabit Network Connection (rev 01)
05:00.1 Ethernet controller: Intel Corporation I350 Gigabit Network Connection (rev 01)
</code></pre><p>The downside here is that the X557 PHY ID wasn&rsquo;t <a href="https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/commit/?id=c2c78d5c35e4f4a9226360bc432dc81b47f163e4">added until Linux 4.2</a>. However, I upgraded the server from Fedora 22 to 23 (and picked up Linux 4.2.1 along the way), and everything worked.</p><p>The onboard 1Gb interfaces showed up as <code>eno1</code> and <code>eno2</code>, as expected, but the 10Gb cards showed up as <code>eth0</code> and <code>eth1</code>. If you&rsquo;ve read my post on <a href=../../../../2015/08/21/understanding-systemds-predictable-network-device-names/>systemd&rsquo;s predictable interface named</a>, you&rsquo;ll notice this is a little unpredictable. The 10Gb interfaces seem to come up as <code>eno1</code> and <code>eno2</code> in udev, but that won&rsquo;t work since the onboard I350 ethernet ports already use those names:</p><pre><code>P: /devices/pci0000:00/0000:00:02.2/0000:03:00.0/net/eth0
E: DEVPATH=/devices/pci0000:00/0000:00:02.2/0000:03:00.0/net/eth0
E: ID_BUS=pci
E: ID_MODEL_FROM_DATABASE=Ethernet Connection X552/X557-AT 10GBASE-T
E: ID_MODEL_ID=0x15ad
E: ID_NET_DRIVER=ixgbe
E: ID_NET_LINK_FILE=/usr/lib/systemd/network/99-default.link
E: ID_NET_NAME=eno1
E: ID_NET_NAME_MAC=enx0cc47a7591c8
E: ID_NET_NAME_ONBOARD=eno1
E: ID_NET_NAME_PATH=enp3s0f0
E: ID_OUI_FROM_DATABASE=Super Micro Computer, Inc.
E: ID_PATH=pci-0000:03:00.0
E: ID_PATH_TAG=pci-0000_03_00_0
E: ID_PCI_CLASS_FROM_DATABASE=Network controller
E: ID_PCI_SUBCLASS_FROM_DATABASE=Ethernet controller
E: ID_VENDOR_FROM_DATABASE=Intel Corporation
E: ID_VENDOR_ID=0x8086
E: IFINDEX=4
E: INTERFACE=eth0
E: SUBSYSTEM=net
E: SYSTEMD_ALIAS=/sys/subsystem/net/devices/eno1
E: TAGS=:systemd:
E: USEC_INITIALIZED=7449982
</code></pre><p>I <a href=https://github.com/systemd/systemd/issues/1390>opened up a Github issue for systemd</a> and it&rsquo;s getting some attention. We&rsquo;ll hopefully see it fixed soon.</p><h2 id=more-to-come>More to come</h2><p>Keep an eye out for a more detailed review once I start throwing some OpenStack workloads on the Supermicro server. I&rsquo;ll also take some more detailed photos and share the additional parts I added to my server.</p></div></article><hr><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://major.io/tags/fedora/>fedora</a></span>
<span class=tag><a href=https://major.io/tags/linux/>linux</a></span>
<span class=tag><a href=https://major.io/tags/networking/>networking</a></span>
<span class=tag><a href=https://major.io/tags/supermicro/>supermicro</a></span>
<span class=tag><a href=https://major.io/tags/systemd/>systemd</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-folder meta-icon"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg><span class=tag><a href=https://major.io/categories/blog-posts/>Blog Posts</a></span></p></div></main></div><footer class=footer><div class=footer__inner><div class=footer__content><span>&copy; 2021</span>
<span><a href=https://major.io>Major Hayden</a></span>
<span><a href=https://creativecommons.org/licenses/by-sa/2.0/ target=_blank rel=noopener>CC BY-SA 2.0</a></span><span><a href=https://major.io/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></span></div></div><div class=footer__inner><div class=footer__content><span>Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>Made with &#10084; by <a href=https://github.com/rhazdon>Djordje Atlialp</a></span></div></div></footer></div><script type=text/javascript src=../../../../bundle.min.e9f93b80e78a22e6f04cbb5f73e0f9c4ba60ff73a2a0ef85965c688f93dd1f2722a282e30e485603e4c65b1b346720e35f213435ec5556e196a97a68d097c80f.js integrity="sha512-6fk7gOeKIubwTLtfc+D5xLpg/3OioO+Fllxoj5PdHyciooLjDkhWA+TGWxs0ZyDjXyE0NexVVuGWqXpo0JfIDw=="></script></body></html>