<!doctype html><html lang=en-us><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://major.io/favicon.ico><title>Keep old kernels with yum and dnf | Major Hayden's Blog ðŸ¤ </title><meta name=title content="Keep old kernels with yum and dnf"><meta name=description content="When you upgrade packages on Red Hat, CentOS and Fedora systems, the newer package replaces the older package. That means that files managed by RPM from the old package are removed and replaced with files from the newer package.
There&rsquo;s one exception here: kernel packages.
Upgrading a kernel package with yum and dnf leaves the older kernel package on the system just in case you need it again. This is handy if the new kernel introduces a bug on your system or if you need to work through a compile of a custom kernel module."><meta name=keywords content="centos,dnf,fedora,kernel,red hat,yum,"><meta property="og:title" content="Keep old kernels with yum and dnf"><meta property="og:description" content="When you upgrade packages on Red Hat, CentOS and Fedora systems, the newer package replaces the older package. That means that files managed by RPM from the old package are removed and replaced with files from the newer package.
There&rsquo;s one exception here: kernel packages.
Upgrading a kernel package with yum and dnf leaves the older kernel package on the system just in case you need it again. This is handy if the new kernel introduces a bug on your system or if you need to work through a compile of a custom kernel module."><meta property="og:type" content="article"><meta property="og:url" content="https://major.io/2015/05/18/keep-old-kernels-with-yum-and-dnf/"><meta property="og:image" content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2015-05-18T14:22:56+00:00"><meta property="article:modified_time" content="2015-05-18T14:22:56+00:00"><meta property="og:site_name" content="Major Hayden's Blog ðŸ¤ "><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta name=twitter:title content="Keep old kernels with yum and dnf"><meta name=twitter:description content="When you upgrade packages on Red Hat, CentOS and Fedora systems, the newer package replaces the older package. That means that files managed by RPM from the old package are removed and replaced with files from the newer package.
There&rsquo;s one exception here: kernel packages.
Upgrading a kernel package with yum and dnf leaves the older kernel package on the system just in case you need it again. This is handy if the new kernel introduces a bug on your system or if you need to work through a compile of a custom kernel module."><meta name=twitter:site content="@mhayden"><meta itemprop=name content="Keep old kernels with yum and dnf"><meta itemprop=description content="When you upgrade packages on Red Hat, CentOS and Fedora systems, the newer package replaces the older package. That means that files managed by RPM from the old package are removed and replaced with files from the newer package.
There&rsquo;s one exception here: kernel packages.
Upgrading a kernel package with yum and dnf leaves the older kernel package on the system just in case you need it again. This is handy if the new kernel introduces a bug on your system or if you need to work through a compile of a custom kernel module."><meta itemprop=datePublished content="2015-05-18T14:22:56+00:00"><meta itemprop=dateModified content="2015-05-18T14:22:56+00:00"><meta itemprop=wordCount content="206"><meta itemprop=image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta itemprop=keywords content="centos,dnf,fedora,kernel,red hat,yum,"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:820px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px}div.highlight code{background-color:unset;color:initial}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style></head><body><header><a href=../../../../ class=title><h2>Major Hayden's Blog ðŸ¤ </h2></a><nav><a href=../../../../>Home</a>
<a href=../../../../ham-radio-faq>Ham Radio</a>
<a href=../../../../icanhazip-com-faq>icanhazip FAQ</a>
<a href=../../../../posts>Posts</a></nav><script async src=https://media.ethicalads.io/media/client/ethicalads.min.js></script><div class="adaptive raised" data-ea-publisher=major-io data-ea-type=text></div></header><main><h1>Keep old kernels with yum and dnf</h1><i><time datetime=2015-05-18 pubdate>2015-05-18</time></i>
<content><p>When you upgrade packages on Red Hat, CentOS and Fedora systems, the newer package replaces the older package. That means that files managed by RPM from the old package are removed and replaced with files from the newer package.</p><p>There&rsquo;s one exception here: kernel packages.</p><p>Upgrading a kernel package with yum and dnf leaves the older kernel package on the system just in case you need it again. This is handy if the new kernel introduces a bug on your system or if you need to work through a compile of a custom kernel module.</p><p>However, yum and dnf will clean up older kernels once you have more than three. The oldest kernel will be removed from the system and the newest three will remain. In some situations, you may want more than three to stay on your system.</p><p>To change the setting, simply open up <code>/etc/yum.conf</code> or <code>/etc/dnf/dnf.conf</code> in your favorite text editor. Look for this line:</p><pre><code>installonly_limit=3
</code></pre><p>To keep five kernels, simply replace the 3 with a 5. If you&rsquo;d like to keep every old kernel on the system forever, just change the 3 to a 0. A zero means you never want &ldquo;installonly&rdquo; packages (like kernels) to ever be removed from your system.</p></content><p><a href=https://major.io/tags/centos/>#centos</a>
<a href=https://major.io/tags/dnf/>#dnf</a>
<a href=https://major.io/tags/fedora/>#fedora</a>
<a href=https://major.io/tags/kernel/>#kernel</a>
<a href=https://major.io/tags/red-hat/>#red hat</a>
<a href=https://major.io/tags/yum/>#yum</a></p></main><footer><hr>CC-BY-SA 4.0 &#187;
Made with <a href=https://gohugo.io/>Hugo</a> &#187;
Theme based on <a href=https://github.com/janraasch/hugo-bearblog/>Hugo Ê•â€¢á´¥â€¢Ê” Bear</a><br></footer></body></html>