<!doctype html><html lang=en-us><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://major.io/favicon.ico><title>MySQL Replication: Breakdown | Major Hayden's Blog ðŸ¤ </title><meta name=title content="MySQL Replication: Breakdown"><meta name=description content="On some occasions, MySQL replication can break down if an statement comes from the master that makes no sense to the slave. For example, if an UPDATE statement arrives from the master server, but the table referenced by the UPDATE no longer exists, then the slave will halt replication and throw an error when SHOW SLAVE STATUS; is run.
The obvious question here is: how can the master and the slave have different data after replication has started?"><meta name=keywords content="database,mysql,"><meta property="og:title" content="MySQL Replication: Breakdown"><meta property="og:description" content="On some occasions, MySQL replication can break down if an statement comes from the master that makes no sense to the slave. For example, if an UPDATE statement arrives from the master server, but the table referenced by the UPDATE no longer exists, then the slave will halt replication and throw an error when SHOW SLAVE STATUS; is run.
The obvious question here is: how can the master and the slave have different data after replication has started?"><meta property="og:type" content="article"><meta property="og:url" content="https://major.io/2008/01/09/mysql-replication-breakdown/"><meta property="og:image" content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2008-01-09T18:24:03+00:00"><meta property="article:modified_time" content="2008-01-09T18:24:03+00:00"><meta property="og:site_name" content="Major Hayden's Blog ðŸ¤ "><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta name=twitter:title content="MySQL Replication: Breakdown"><meta name=twitter:description content="On some occasions, MySQL replication can break down if an statement comes from the master that makes no sense to the slave. For example, if an UPDATE statement arrives from the master server, but the table referenced by the UPDATE no longer exists, then the slave will halt replication and throw an error when SHOW SLAVE STATUS; is run.
The obvious question here is: how can the master and the slave have different data after replication has started?"><meta name=twitter:site content="@mhayden"><meta itemprop=name content="MySQL Replication: Breakdown"><meta itemprop=description content="On some occasions, MySQL replication can break down if an statement comes from the master that makes no sense to the slave. For example, if an UPDATE statement arrives from the master server, but the table referenced by the UPDATE no longer exists, then the slave will halt replication and throw an error when SHOW SLAVE STATUS; is run.
The obvious question here is: how can the master and the slave have different data after replication has started?"><meta itemprop=datePublished content="2008-01-09T18:24:03+00:00"><meta itemprop=dateModified content="2008-01-09T18:24:03+00:00"><meta itemprop=wordCount content="313"><meta itemprop=image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta itemprop=keywords content="database,mysql,"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:820px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px}div.highlight code{background-color:unset;color:initial}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style></head><body><header><a href=../../../../ class=title><h2>Major Hayden's Blog ðŸ¤ </h2></a><nav><a href=../../../../>Home</a>
<a href=../../../../ham-radio-faq>Ham Radio</a>
<a href=../../../../icanhazip-com-faq>icanhazip FAQ</a>
<a href=../../../../posts>Posts</a></nav></header><main><h1>MySQL Replication: Breakdown</h1><i><time datetime=2008-01-09 pubdate>2008-01-09</time></i>
<content><p>On some occasions, MySQL replication can break down if an statement comes from the master that makes no sense to the slave. For example, if an UPDATE statement arrives from the master server, but the table referenced by the UPDATE no longer exists, then the slave will halt replication and throw an error when <code>SHOW SLAVE STATUS;</code> is run.</p><p>The obvious question here is: how can the master and the slave have different data after replication has started? After all, you make a dump file prior to starting replication, so both servers contain the same information. Stray updates can be thrown into the mix from application errors or plain user errors. These kinds of things happen, even though we all try to avoid it.</p><p>Don&rsquo;t worry - this is almost always an easy fix. You have two main options:</p><p><strong>Fix the problem yourself.</strong> If the master sent a query that the slave can&rsquo;t run, fix it manually. For example, if the master wants to run an INSERT on a table that doesn&rsquo;t exist, run a quick <code>SHOW CREATE TABLE;</code> on the master and create the table manually on the slave. When the table is there, run a <code>START SLAVE;</code> on the slave and you should be all set.</p><p><strong>Skip an unnecessary query.</strong> Let&rsquo;s say that the master sent over a <code>DROP TABLE</code> query but the table doesn&rsquo;t exist on the master. It&rsquo;s safe to say that the master won&rsquo;t be sending any write queries to that table in the future, so the query can be skipped. To skip it, run the following statement:</p><p><code>mysql> SET GLOBAL SQL_SLAVE_SKIP_COUNTER = 1;&lt;br /> mysql> START SLAVE;</code></p><p>In short, you&rsquo;re telling MySQL to skip that unnecessary query and keep going with the ones after that. Of course, if you need to skip multiple queries, change the 1 to whatever number you need and then run <code>START SLAVE;</code>.</p></content><p><a href=https://major.io/tags/database/>#database</a>
<a href=https://major.io/tags/mysql/>#mysql</a></p></main><footer><script async src=https://media.ethicalads.io/media/client/ethicalads.min.js></script><div data-ea-publisher=major-io data-ea-type=text></div><hr>CC-BY-SA 4.0 &#187;
Made with <a href=https://gohugo.io/>Hugo</a> &#187;
Theme based on <a href=https://github.com/janraasch/hugo-bearblog/>Hugo Ê•â€¢á´¥â€¢Ê” Bear</a><br></footer></body></html>