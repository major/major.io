<!doctype html><html lang=en-us><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://major.io/favicon.ico><title>MySQL Replication: Delayed Slaves | Major Hayden's Blog ðŸ¤ </title><meta name=title content="MySQL Replication: Delayed Slaves"><meta name=description content="In a perfect world, slaves will contain the same data as the master at all times. The events should be picked up and executed by the slaves in milliseconds. However, in real world scenarios, replication will be held up for different reasons. Whether it&rsquo;s table locks, disk I/O, network saturation, or CPU usage, slaves might become several seconds, minutes or even hours behind the master.
In some situations, delays of less than 30 seconds may not be a big issue."><meta name=keywords content="database,mysql,"><meta property="og:title" content="MySQL Replication: Delayed Slaves"><meta property="og:description" content="In a perfect world, slaves will contain the same data as the master at all times. The events should be picked up and executed by the slaves in milliseconds. However, in real world scenarios, replication will be held up for different reasons. Whether it&rsquo;s table locks, disk I/O, network saturation, or CPU usage, slaves might become several seconds, minutes or even hours behind the master.
In some situations, delays of less than 30 seconds may not be a big issue."><meta property="og:type" content="article"><meta property="og:url" content="https://major.io/2008/01/08/mysql-replication-delayed-slaves/"><meta property="og:image" content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2008-01-09T03:11:11+00:00"><meta property="article:modified_time" content="2008-01-09T03:11:11+00:00"><meta property="og:site_name" content="Major Hayden's Blog ðŸ¤ "><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta name=twitter:title content="MySQL Replication: Delayed Slaves"><meta name=twitter:description content="In a perfect world, slaves will contain the same data as the master at all times. The events should be picked up and executed by the slaves in milliseconds. However, in real world scenarios, replication will be held up for different reasons. Whether it&rsquo;s table locks, disk I/O, network saturation, or CPU usage, slaves might become several seconds, minutes or even hours behind the master.
In some situations, delays of less than 30 seconds may not be a big issue."><meta name=twitter:site content="@mhayden"><meta itemprop=name content="MySQL Replication: Delayed Slaves"><meta itemprop=description content="In a perfect world, slaves will contain the same data as the master at all times. The events should be picked up and executed by the slaves in milliseconds. However, in real world scenarios, replication will be held up for different reasons. Whether it&rsquo;s table locks, disk I/O, network saturation, or CPU usage, slaves might become several seconds, minutes or even hours behind the master.
In some situations, delays of less than 30 seconds may not be a big issue."><meta itemprop=datePublished content="2008-01-09T03:11:11+00:00"><meta itemprop=dateModified content="2008-01-09T03:11:11+00:00"><meta itemprop=wordCount content="385"><meta itemprop=image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta itemprop=keywords content="database,mysql,"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:820px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px}div.highlight code{background-color:unset;color:initial}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style></head><body><header><a href=../../../../ class=title><h2>Major Hayden's Blog ðŸ¤ </h2></a><nav><a href=../../../../>Home</a>
<a href=../../../../ham-radio-faq>Ham Radio</a>
<a href=../../../../icanhazip-com-faq>icanhazip FAQ</a>
<a href=../../../../posts>Posts</a></nav></header><main><h1>MySQL Replication: Delayed Slaves</h1><i><time datetime=2008-01-09 pubdate>2008-01-09</time></i>
<content><p>In a perfect world, slaves will contain the same data as the master at all times. The events should be picked up and executed by the slaves in milliseconds. However, in real world scenarios, replication will be held up for different reasons. Whether it&rsquo;s table locks, disk I/O, network saturation, or CPU usage, slaves might become several seconds, minutes or even hours behind the master.</p><p>In some situations, delays of less than 30 seconds may not be a big issue. Some applications, like social networking applications, would need to have the data match at all times. Lags would not be acceptable.</p><p>For example, review this scenario. Let&rsquo;s say you go to a site and create an account. That would send a write query to the master. Once you&rsquo;ve finished the account creation, the page will depend on a read query. If the slave is behind the master, it won&rsquo;t have any data about your new account, and the application will probably tell you that you don&rsquo;t have an account. That would be pretty annoying for your application&rsquo;s users.</p><p>To check your current lag, simply run <a href=http://dev.mysql.com/doc/refman/5.0/en/show-slave-status.html><code>SHOW SLAVE STATUS;</code></a> in MySQL, and review the number following <code>Seconds_Behind_Master</code>. If everything is running well, it should be followed by 0. If <code>NULL</code> is shown, then there is most likely an issue with replication, and you might want to check <code>Last_Error</code>.</p><p>So, how can replication lags be corrected? Try these methods:</p><p><strong>Review your queries.</strong> When queries keep running in MySQL, the slave may be unable to keep up. Make sure that your read queries are as <a href=http://dev.mysql.com/doc/refman/5.0/en/explain.html>optimized as possible</a> so they complete quickly.</p><p><strong>Optimize your MySQL server variables.</strong> Be sure to <a href=http://rackerhacker.com/mysqltuner/>thoroughly review your MySQL configuration</a> for any bottlenecks.</p><p><strong>Choose the right storage engines.</strong> If you&rsquo;re making a lot of updates to a table, <a href=http://rackerhacker.com/2007/11/06/when-to-use-myisam-or-innodb/>consider using InnoDB</a>. If your tables are not updated often, c<a href=http://rackerhacker.com/2007/11/06/when-to-use-myisam-or-innodb/>onsider using MyISAM tables</a> (or even <a href=http://dev.mysql.com/doc/refman/5.0/en/myisampack.html>compressed MyISAM tables</a>).</p><p><strong>Upgrade your hardware.</strong> Find your hardware bottleneck. If it&rsquo;s the CPU, consider upgrading to a multi-core CPU, or a CPU with a higher clock speed. For I/O bottlenecks, consider a RAID solution with SAS drives. If you&rsquo;re lucky enough to have a network bottleneck (lucky since it means you&rsquo;re doing well with CPU and I/O), use a dedicated switch or upgrade to gigabit (or faster) hardware.</p></content><p><a href=https://major.io/tags/database/>#database</a>
<a href=https://major.io/tags/mysql/>#mysql</a></p></main><footer><hr>CC-BY-SA 4.0 &#187;
Made with <a href=https://gohugo.io/>Hugo</a> &#187;
Theme based on <a href=https://github.com/janraasch/hugo-bearblog/>Hugo Ê•â€¢á´¥â€¢Ê” Bear</a><br><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "aca54cb1322647b89c43a40751f02ce4"}'></script></footer></body></html>