<!doctype html><html lang=en-us><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://major.io/favicon.ico><title>HOWTO: Time Warner Cable and IPv6 | Major Hayden's Blog ðŸ¤ </title><meta name=title content="HOWTO: Time Warner Cable and IPv6"><meta name=description content="Time Warner has gradually rolled out IPv6 connectivity to their Road Runner customers over the past couple of years and it started appearing on my home network earlier this year. I had some issues getting the leases to renew properly after they expired (TWC&rsquo;s default lease length appears to be seven days) and there were some routing problems that cropped up occasionally. However, over the past month, things seem to have settled down on TWC&rsquo;s San Antonio network."><meta name=keywords content="fedora,ipv6,mikrotik,network,networking,"><meta property="og:title" content="HOWTO: Time Warner Cable and IPv6"><meta property="og:description" content="Time Warner has gradually rolled out IPv6 connectivity to their Road Runner customers over the past couple of years and it started appearing on my home network earlier this year. I had some issues getting the leases to renew properly after they expired (TWC&rsquo;s default lease length appears to be seven days) and there were some routing problems that cropped up occasionally. However, over the past month, things seem to have settled down on TWC&rsquo;s San Antonio network."><meta property="og:type" content="article"><meta property="og:url" content="https://major.io/2014/09/11/howto-time-warner-cable-ipv6/"><meta property="og:image" content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-09-11T14:43:03+00:00"><meta property="article:modified_time" content="2014-09-11T14:43:03+00:00"><meta property="og:site_name" content="Major Hayden's Blog ðŸ¤ "><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta name=twitter:title content="HOWTO: Time Warner Cable and IPv6"><meta name=twitter:description content="Time Warner has gradually rolled out IPv6 connectivity to their Road Runner customers over the past couple of years and it started appearing on my home network earlier this year. I had some issues getting the leases to renew properly after they expired (TWC&rsquo;s default lease length appears to be seven days) and there were some routing problems that cropped up occasionally. However, over the past month, things seem to have settled down on TWC&rsquo;s San Antonio network."><meta name=twitter:site content="@mhayden"><meta itemprop=name content="HOWTO: Time Warner Cable and IPv6"><meta itemprop=description content="Time Warner has gradually rolled out IPv6 connectivity to their Road Runner customers over the past couple of years and it started appearing on my home network earlier this year. I had some issues getting the leases to renew properly after they expired (TWC&rsquo;s default lease length appears to be seven days) and there were some routing problems that cropped up occasionally. However, over the past month, things seem to have settled down on TWC&rsquo;s San Antonio network."><meta itemprop=datePublished content="2014-09-11T14:43:03+00:00"><meta itemprop=dateModified content="2014-09-11T14:43:03+00:00"><meta itemprop=wordCount content="1128"><meta itemprop=image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta itemprop=keywords content="fedora,ipv6,mikrotik,network,networking,"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:820px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px}div.highlight code{background-color:unset;color:initial}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style></head><body><header><a href=../../../../ class=title><h2>Major Hayden's Blog ðŸ¤ </h2></a><nav><a href=../../../../>Home</a>
<a href=../../../../ham-radio-faq>Ham Radio</a>
<a href=../../../../icanhazip-com-faq>icanhazip FAQ</a>
<a href=../../../../posts>Posts</a></nav></header><main><h1>HOWTO: Time Warner Cable and IPv6</h1><i><time datetime=2014-09-11 pubdate>2014-09-11</time></i>
<content><p><a href=../../../../wp-content/uploads/2014/09/logo-top.png></a></p><p>Time Warner has <a href=http://www.twcableuntangled.com/2014/03/what-is-ipv6-twc-upgrades-the-internet/>gradually rolled</a> out <a href=https://en.wikipedia.org/wiki/IPv6>IPv6 connectivity</a> to their Road Runner customers over the past couple of years and it started appearing on my home network earlier this year. Â I had some issues getting the leases to renew properly after they expired (TWC&rsquo;s default lease length appears to be seven days) and there were some routing problems that cropped up occasionally. Â However, over the past month, things seem to have settled down on TWC&rsquo;s San Antonio network.</p><h3 id=do-you-have-ipv6-yet>Do you have IPv6 yet?</h3><p>Before you make any adjustments to your network, I&rsquo;d recommend connecting your computer directly to the cable modem briefly to see if you can get an IPv6 address via <a href=https://en.wikipedia.org/wiki/IPv6#Stateless_address_autoconfiguration_.28SLAAC.29>stateless autoconfiguration</a> (SLAAC). Â You&rsquo;ll only get one IPv6 address via SLAAC, but we can get a bigger network block later on (keep reading). Â Check your computer&rsquo;s network status to see if you received an IPv6 address. Â If you have one, try accessing <a href=http://ipv6.google.com/>ipv6.google.com</a>. Â You can always check <a href=http://ipv6.icanhazip.com>ipv6.icanhazip.com</a> or <a href=http://ipv6.icanhaztraceroute.com>ipv6.icanhaztraceroute.com</a> as well.</p><p>There&rsquo;s a chance your computer didn&rsquo;t get an IPv6 address while directly connected to the cable modem. Â Here are some possible solutions:</p><ul><li>Power off the cable modem for 30 seconds, then plug it back in and see if your computer gets an address</li><li>Ensure you have one of TWC&rsquo;s <a href=http://www.timewarnercable.com/en/support/internet/topics/buy-your-modem.html>approved modems</a>.Â <em>(Bear in mind that not all of these modems support IPv6.)</em></li><li>Verify that your computer has IPv6 enabled.Â <em>(Instructions for <a href=http://windows.microsoft.com/en-us/windows/ipv6-faq>Windows</a>, <a href=http://support.apple.com/kb/HT4667>Mac</a> and <a href=http://www.linux.com/learn/tutorials/428331-ipv6-crash-course-for-linux>Linux</a> are available.)</em></li></ul><h3 id=but-i-want-more-addresses>But I want more addresses</h3><p>If you were able to get an IPv6 address, it&rsquo;s now time to allocate a network block for yourself and begin using it! Â We will request an allocation via <a href=https://en.wikipedia.org/wiki/DHCPv6>DHCPv6</a>. Â Every router is a little different, but the overall concept is the same. Â Your router will request an allocation on the network and receive that allocation from Time Warner&rsquo;s network. Â From there, your router will assign that block to an interface (most likely your LAN, more on that in a moment) and begin handing our IPv6 addresses to devices in your home.</p><p>By default, TWC hands out <a href=https://en.wikipedia.org/wiki/IPv6_subnetting_reference>/64 allocations</a>Â regardless of what you request via DHCPv6. Â I had some success in late 2013 when I requested a /56 but it appears that allocations of that size aren&rsquo;t available any longer. Â Sure, a /64 allocation is gigantic (bigger than the entire IPv4 address space), but getting a /56 would allow you to assign multiple /64 allocations to different interfaces. <strong>See the last section of this post on how to get a /56 allocation.</strong> Â Splitting /64&rsquo;s into smaller subnets is a bad idea.</p><h3 id=lets-talk-security>Let&rsquo;s talk security</h3><p>IPv6 eliminates the need forÂ <a href=https://en.wikipedia.org/wiki/Network_address_translation>network address translation</a> (NAT). Â This means that by the time you finish this howto, each device in your network with have a publicly accessible internet address. Â Also, bear in mind that with almost all network devices, firewall rules and ACL&rsquo;s that are configured with IPv4 will have no effect on IPv6. Â This means that you&rsquo;ll end up with devices on your network with all of their ports exposed to the internet.</p><p>In Linux, be sure to use <a href=http://ipset.netfilter.org/ip6tables.man.html>ip6tables</a> (via <a href=https://fedoraproject.org/wiki/FirewallD>firewalld</a>, if applicable). Â For other network devices, review their firewall configuration settings to see how you can filter IPv6 traffic. Â <strong>This is a critical step. Â Please don&rsquo;t skip it.</strong></p><p>On my Mikrotik device, I have a separate IPv6 firewall interface that I can configure. Â Here is my default ruleset:</p><pre><code>/ipv6 firewall filter
/ipv6 firewall filter
add chain=input connection-state=related
add chain=input connection-state=established
add chain=forward connection-state=established
add chain=input in-interface=lanbridge
add chain=forward connection-state=related
add chain=input dst-port=546 protocol=udp
add chain=input protocol=icmpv6
add chain=forward protocol=icmpv6
add chain=forward out-interface=ether1-gateway
add action=drop chain=input
add action=drop chain=forward
</code></pre><p>The first five rules ensure that only related or established connections can make it to my internal LAN. I allow UDP 546 for DHCPv6 connectivity and I&rsquo;m allowing all ICMPv6 traffic to the router and internal devices. Finally, I allow all of my devices inside the network to talk to the internet and block the remainder of the unmatched traffic.</p><h3 id=configuring-the-router>Configuring the router</h3><p>It&rsquo;s no secret that I&rsquo;m a big fan of <a href=https://www.roc-noc.com/Mikrotik-Desktop-Routers/>Mikrotik</a> devices and I&rsquo;ll guide you through the setup of IPv6 on the Mikrotik in this post. Â <strong>Before starting this step, ensure that your firewall is configured (see previous section).</strong></p><p>On the Mikrotik, just add a simple DHCPv6 configuration. I&rsquo;ll call mine &lsquo;twc&rsquo;:</p><pre><code>/ipv6 dhcp-client
add add-default-route=yes interface=ether1-gateway pool-name=twc
</code></pre><p>After that, you should see an allocation pop up within a few seconds (run <code>ipv6 dhcp-client print</code>):</p><pre><code>#    INTERFACE     STATUS        PREFIX                                      EXPIRES-AFTER
0    ether1-gat... bound         2605:xxxx:xxxx:xxxx::/64                    6d9h15m45s
</code></pre><p>Check that a new address pool was allocated by running <code>ipv6 pool print</code>:</p><pre><code>#   NAME      PREFIX                                      PREFIX-LENGTH EXPIRES-AFTER
0 D twc       2605:xxxx:xxxx:xxxx::/64                               64 6d9h13m33s
</code></pre><p>You can now assign that address pool to an interface. Be sure to assign the block to your LAN interface. In my case, that&rsquo;s called <em>lanbridge</em>:</p><pre><code>/ipv6 address
add address=2605:xxxx:xxxx:xxxx:: from-pool=twc interface=lanbridge
</code></pre><p>By default, the Mikrotik device will now begin announcing that network allocation on your internal network. Some of your devices may already be picking up IPv6 addresses via SLAAC! Try accessing the Google or icanhazip IPv6 addresses from earlier in the post.</p><p>Checking a Linux machine for IPv6 connectivity is easy. Here&rsquo;s an example from a Fedora 20 server I have at home:</p><pre><code>$ ip -6 addr
2: em1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qlen 1000
    inet6 2605:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx/64 scope global mngtmpaddr dynamic
       valid_lft 2591998sec preferred_lft 604798sec
    inet6 2605:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx/64 scope global deprecated mngtmpaddr dynamic
       valid_lft 1871064sec preferred_lft 0sec
</code></pre><p>If you only see an address that starts with <em>fe80</em>, that&rsquo;s your <a href=https://en.wikipedia.org/wiki/Link-local_address>link local</a> address. It&rsquo;s not an address that can be accessed from the internet.</p><h3 id=troubleshooting>Troubleshooting</h3><p>If you run into some problems or your router can&rsquo;t pull an allocation via DHCPv6, try the troubleshooting steps from the first section of this post.</p><p>Getting assistance from Time Warner is a real challenge. Everyone I&rsquo;ve contacted via phone or Twitter has not been able to help and many of them don&rsquo;t even know what IPv6 is. I was even told &ldquo;we have plenty of regular IPv4 addresses left, don&rsquo;t worry&rdquo; when I asked for help. Even my unusual methods haven&rsquo;t worked:</p><p>My old <a href=http://www.timewarnercable.com/en/residential-home/support/faqs/faqs-equipment-and-instruction-manuals/modems/motorola/motorola-surfboard-sbg6580.html>SBG6580</a> that was issued by Time Warner wouldn&rsquo;t ever do IPv6 reliably. I ended up buying a <a href="http://www.newegg.com/Product/Product.aspx?Item=N82E16825122015">SB6121</a> and I was able to get IPv6 connectivity fairly easily. The SB6121 only does 172mb/sec down - I&rsquo;ll be upgrading it if TWC MAXX shows up in San Antonio.</p><h3 id=get-a-56>Get a /56</h3><p>You can get a /56 block of IP addresses from Time Warner by adding <code>prefix-hint=::/56</code> onto your IPv6 dhcp client configuration. You&rsquo;ll need to carve out some /64 subnets on your own for your internal network and that&rsquo;s outside the scope of this post. The prefix hint configuration isn&rsquo;t available in the graphical interface or on the web (at the time of this post&rsquo;s writing).</p></content><p><a href=https://major.io/tags/fedora/>#fedora</a>
<a href=https://major.io/tags/ipv6/>#ipv6</a>
<a href=https://major.io/tags/mikrotik/>#mikrotik</a>
<a href=https://major.io/tags/network/>#network</a>
<a href=https://major.io/tags/networking/>#networking</a></p></main><footer><script async src=https://media.ethicalads.io/media/client/ethicalads.min.js></script><div data-ea-publisher=major-io data-ea-type=text></div><hr>CC-BY-SA 4.0 &#187;
Made with <a href=https://gohugo.io/>Hugo</a> &#187;
Theme based on <a href=https://github.com/janraasch/hugo-bearblog/>Hugo Ê•â€¢á´¥â€¢Ê” Bear</a><br></footer></body></html>