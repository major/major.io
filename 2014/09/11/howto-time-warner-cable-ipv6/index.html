<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="Major Hayden"><meta name=description content="Time Warner has gradually rolled out IPv6 connectivity to their Road Runner customers over the past couple of years and it started appearing on my home network earlier this year. I had some issues getting the leases to renew properly after they expired (TWC&amp;rsquo;s default lease length appears to be seven days) and there were some routing problems that cropped up occasionally. However, over the past month, things seem to have settled down on TWC&amp;rsquo;s San Antonio network."><meta name=keywords content=",fedora,ipv6,mikrotik,network,networking"><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://major.io/2014/09/11/howto-time-warner-cable-ipv6/><title>HOWTO: Time Warner Cable and IPv6 :: Major Hayden ðŸ¤  â€” Words of wisdom from a social nerd</title><link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css rel=stylesheet type=text/css><link rel=stylesheet href=../../../../main.89fa80e2143f71bd5c96a7c94e531dec3276a367e22f87e74a76026ab64680bf.css><link rel=apple-touch-icon sizes=180x180 href=../../../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../../../favicon-16x16.png><link rel=manifest href=../../../../site.webmanifest><link rel=mask-icon href=../../../../safari-pinned-tab.svg color=#252627><link rel="shortcut icon" href=../../../../favicon.ico><meta name=msapplication-TileColor content="#252627"><meta name=theme-color content="#252627"><meta itemprop=name content="HOWTO: Time Warner Cable and IPv6"><meta itemprop=description content="Time Warner has gradually rolled out IPv6 connectivity to their Road Runner customers over the past couple of years and it started appearing on my home network earlier this year. I had some issues getting the leases to renew properly after they expired (TWC&rsquo;s default lease length appears to be seven days) and there were some routing problems that cropped up occasionally. However, over the past month, things seem to have settled down on TWC&rsquo;s San Antonio network."><meta itemprop=datePublished content="2014-09-11T14:43:03+00:00"><meta itemprop=dateModified content="2014-09-11T14:43:03+00:00"><meta itemprop=wordCount content="1128"><meta itemprop=image content="https://major.io"><meta itemprop=keywords content="fedora,ipv6,mikrotik,network,networking,"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://major.io"><meta name=twitter:title content="HOWTO: Time Warner Cable and IPv6"><meta name=twitter:description content="Time Warner has gradually rolled out IPv6 connectivity to their Road Runner customers over the past couple of years and it started appearing on my home network earlier this year. I had some issues getting the leases to renew properly after they expired (TWC&rsquo;s default lease length appears to be seven days) and there were some routing problems that cropped up occasionally. However, over the past month, things seem to have settled down on TWC&rsquo;s San Antonio network."><meta name=twitter:site content="@mhayden"><meta property="article:section" content="Blog Posts"><meta property="article:published_time" content="2014-09-11 14:43:03 +0000 UTC"><style type=text/css>html{letter-spacing:unset}</style></head><body><div class=container><header class=header><span class=header__inner><a href=../../../../ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>$ echo major.io</span>
<span class=logo__cursor style=visibility:hidden></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=../../../../ham-radio-faq>hamradio</a></li><li><a href=../../../../icanhazip-com-faq>icanhazip</a></li><li><a href=../../../../posts/>posts</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info></p></div><article><h2 class=post-title><a href=https://major.io/2014/09/11/howto-time-warner-cable-ipv6/>HOWTO: Time Warner Cable and IPv6</a></h2><div class=post-content><p><a href=../../../../wp-content/uploads/2014/09/logo-top.png></a></p><p>Time Warner has <a href=http://www.twcableuntangled.com/2014/03/what-is-ipv6-twc-upgrades-the-internet/>gradually rolled</a> out <a href=https://en.wikipedia.org/wiki/IPv6>IPv6 connectivity</a> to their Road Runner customers over the past couple of years and it started appearing on my home network earlier this year. Â I had some issues getting the leases to renew properly after they expired (TWC&rsquo;s default lease length appears to be seven days) and there were some routing problems that cropped up occasionally. Â However, over the past month, things seem to have settled down on TWC&rsquo;s San Antonio network.</p><h3 id=do-you-have-ipv6-yet>Do you have IPv6 yet?</h3><p>Before you make any adjustments to your network, I&rsquo;d recommend connecting your computer directly to the cable modem briefly to see if you can get an IPv6 address via <a href=https://en.wikipedia.org/wiki/IPv6#Stateless_address_autoconfiguration_.28SLAAC.29>stateless autoconfiguration</a> (SLAAC). Â You&rsquo;ll only get one IPv6 address via SLAAC, but we can get a bigger network block later on (keep reading). Â Check your computer&rsquo;s network status to see if you received an IPv6 address. Â If you have one, try accessing <a href=http://ipv6.google.com/>ipv6.google.com</a>. Â You can always check <a href=http://ipv6.icanhazip.com>ipv6.icanhazip.com</a> or <a href=http://ipv6.icanhaztraceroute.com>ipv6.icanhaztraceroute.com</a> as well.</p><p>There&rsquo;s a chance your computer didn&rsquo;t get an IPv6 address while directly connected to the cable modem. Â Here are some possible solutions:</p><ul><li>Power off the cable modem for 30 seconds, then plug it back in and see if your computer gets an address</li><li>Ensure you have one of TWC&rsquo;s <a href=http://www.timewarnercable.com/en/support/internet/topics/buy-your-modem.html>approved modems</a>.Â <em>(Bear in mind that not all of these modems support IPv6.)</em></li><li>Verify that your computer has IPv6 enabled.Â <em>(Instructions for <a href=http://windows.microsoft.com/en-us/windows/ipv6-faq>Windows</a>, <a href=http://support.apple.com/kb/HT4667>Mac</a> and <a href=http://www.linux.com/learn/tutorials/428331-ipv6-crash-course-for-linux>Linux</a> are available.)</em></li></ul><h3 id=but-i-want-more-addresses>But I want more addresses</h3><p>If you were able to get an IPv6 address, it&rsquo;s now time to allocate a network block for yourself and begin using it! Â We will request an allocation via <a href=https://en.wikipedia.org/wiki/DHCPv6>DHCPv6</a>. Â Every router is a little different, but the overall concept is the same. Â Your router will request an allocation on the network and receive that allocation from Time Warner&rsquo;s network. Â From there, your router will assign that block to an interface (most likely your LAN, more on that in a moment) and begin handing our IPv6 addresses to devices in your home.</p><p>By default, TWC hands out <a href=https://en.wikipedia.org/wiki/IPv6_subnetting_reference>/64 allocations</a>Â regardless of what you request via DHCPv6. Â I had some success in late 2013 when I requested a /56 but it appears that allocations of that size aren&rsquo;t available any longer. Â Sure, a /64 allocation is gigantic (bigger than the entire IPv4 address space), but getting a /56 would allow you to assign multiple /64 allocations to different interfaces. <strong>See the last section of this post on how to get a /56 allocation.</strong> Â Splitting /64&rsquo;s into smaller subnets is a bad idea.</p><h3 id=lets-talk-security>Let&rsquo;s talk security</h3><p>IPv6 eliminates the need forÂ <a href=https://en.wikipedia.org/wiki/Network_address_translation>network address translation</a> (NAT). Â This means that by the time you finish this howto, each device in your network with have a publicly accessible internet address. Â Also, bear in mind that with almost all network devices, firewall rules and ACL&rsquo;s that are configured with IPv4 will have no effect on IPv6. Â This means that you&rsquo;ll end up with devices on your network with all of their ports exposed to the internet.</p><p>In Linux, be sure to use <a href=http://ipset.netfilter.org/ip6tables.man.html>ip6tables</a> (via <a href=https://fedoraproject.org/wiki/FirewallD>firewalld</a>, if applicable). Â For other network devices, review their firewall configuration settings to see how you can filter IPv6 traffic. Â <strong>This is a critical step. Â Please don&rsquo;t skip it.</strong></p><p>On my Mikrotik device, I have a separate IPv6 firewall interface that I can configure. Â Here is my default ruleset:</p><pre><code>/ipv6 firewall filter
/ipv6 firewall filter
add chain=input connection-state=related
add chain=input connection-state=established
add chain=forward connection-state=established
add chain=input in-interface=lanbridge
add chain=forward connection-state=related
add chain=input dst-port=546 protocol=udp
add chain=input protocol=icmpv6
add chain=forward protocol=icmpv6
add chain=forward out-interface=ether1-gateway
add action=drop chain=input
add action=drop chain=forward
</code></pre><p>The first five rules ensure that only related or established connections can make it to my internal LAN. I allow UDP 546 for DHCPv6 connectivity and I&rsquo;m allowing all ICMPv6 traffic to the router and internal devices. Finally, I allow all of my devices inside the network to talk to the internet and block the remainder of the unmatched traffic.</p><h3 id=configuring-the-router>Configuring the router</h3><p>It&rsquo;s no secret that I&rsquo;m a big fan of <a href=https://www.roc-noc.com/Mikrotik-Desktop-Routers/>Mikrotik</a> devices and I&rsquo;ll guide you through the setup of IPv6 on the Mikrotik in this post. Â <strong>Before starting this step, ensure that your firewall is configured (see previous section).</strong></p><p>On the Mikrotik, just add a simple DHCPv6 configuration. I&rsquo;ll call mine &lsquo;twc&rsquo;:</p><pre><code>/ipv6 dhcp-client
add add-default-route=yes interface=ether1-gateway pool-name=twc
</code></pre><p>After that, you should see an allocation pop up within a few seconds (run <code>ipv6 dhcp-client print</code>):</p><pre><code>#    INTERFACE     STATUS        PREFIX                                      EXPIRES-AFTER
0    ether1-gat... bound         2605:xxxx:xxxx:xxxx::/64                    6d9h15m45s
</code></pre><p>Check that a new address pool was allocated by running <code>ipv6 pool print</code>:</p><pre><code>#   NAME      PREFIX                                      PREFIX-LENGTH EXPIRES-AFTER
0 D twc       2605:xxxx:xxxx:xxxx::/64                               64 6d9h13m33s
</code></pre><p>You can now assign that address pool to an interface. Be sure to assign the block to your LAN interface. In my case, that&rsquo;s called <em>lanbridge</em>:</p><pre><code>/ipv6 address
add address=2605:xxxx:xxxx:xxxx:: from-pool=twc interface=lanbridge
</code></pre><p>By default, the Mikrotik device will now begin announcing that network allocation on your internal network. Some of your devices may already be picking up IPv6 addresses via SLAAC! Try accessing the Google or icanhazip IPv6 addresses from earlier in the post.</p><p>Checking a Linux machine for IPv6 connectivity is easy. Here&rsquo;s an example from a Fedora 20 server I have at home:</p><pre><code>$ ip -6 addr
2: em1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qlen 1000
    inet6 2605:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx/64 scope global mngtmpaddr dynamic
       valid_lft 2591998sec preferred_lft 604798sec
    inet6 2605:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx/64 scope global deprecated mngtmpaddr dynamic
       valid_lft 1871064sec preferred_lft 0sec
</code></pre><p>If you only see an address that starts with <em>fe80</em>, that&rsquo;s your <a href=https://en.wikipedia.org/wiki/Link-local_address>link local</a> address. It&rsquo;s not an address that can be accessed from the internet.</p><h3 id=troubleshooting>Troubleshooting</h3><p>If you run into some problems or your router can&rsquo;t pull an allocation via DHCPv6, try the troubleshooting steps from the first section of this post.</p><p>Getting assistance from Time Warner is a real challenge. Everyone I&rsquo;ve contacted via phone or Twitter has not been able to help and many of them don&rsquo;t even know what IPv6 is. I was even told &ldquo;we have plenty of regular IPv4 addresses left, don&rsquo;t worry&rdquo; when I asked for help. Even my unusual methods haven&rsquo;t worked:</p><p>My old <a href=http://www.timewarnercable.com/en/residential-home/support/faqs/faqs-equipment-and-instruction-manuals/modems/motorola/motorola-surfboard-sbg6580.html>SBG6580</a> that was issued by Time Warner wouldn&rsquo;t ever do IPv6 reliably. I ended up buying a <a href="http://www.newegg.com/Product/Product.aspx?Item=N82E16825122015">SB6121</a> and I was able to get IPv6 connectivity fairly easily. The SB6121 only does 172mb/sec down - I&rsquo;ll be upgrading it if TWC MAXX shows up in San Antonio.</p><h3 id=get-a-56>Get a /56</h3><p>You can get a /56 block of IP addresses from Time Warner by adding <code>prefix-hint=::/56</code> onto your IPv6 dhcp client configuration. You&rsquo;ll need to carve out some /64 subnets on your own for your internal network and that&rsquo;s outside the scope of this post. The prefix hint configuration isn&rsquo;t available in the graphical interface or on the web (at the time of this post&rsquo;s writing).</p></div></article><hr><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://major.io/tags/fedora/>fedora</a></span>
<span class=tag><a href=https://major.io/tags/ipv6/>ipv6</a></span>
<span class=tag><a href=https://major.io/tags/mikrotik/>mikrotik</a></span>
<span class=tag><a href=https://major.io/tags/network/>network</a></span>
<span class=tag><a href=https://major.io/tags/networking/>networking</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-folder meta-icon"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg><span class=tag><a href=https://major.io/categories/blog-posts/>Blog Posts</a></span></p></div></main></div><footer class=footer><div class=footer__inner><div class=footer__content><span>&copy; 2021</span>
<span><a href=https://major.io>Major Hayden</a></span>
<span><a href=https://creativecommons.org/licenses/by-sa/2.0/ target=_blank rel=noopener>CC BY-SA 2.0</a></span><span><a href=https://major.io/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></span></div></div><div class=footer__inner><div class=footer__content><span>Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>Made with &#10084; by <a href=https://github.com/rhazdon>Djordje Atlialp</a></span></div></div></footer></div><script type=text/javascript src=../../../../bundle.min.e9f93b80e78a22e6f04cbb5f73e0f9c4ba60ff73a2a0ef85965c688f93dd1f2722a282e30e485603e4c65b1b346720e35f213435ec5556e196a97a68d097c80f.js integrity="sha512-6fk7gOeKIubwTLtfc+D5xLpg/3OioO+Fllxoj5PdHyciooLjDkhWA+TGWxs0ZyDjXyE0NexVVuGWqXpo0JfIDw=="></script></body></html>