<!doctype html><html lang=en-us><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://major.io/favicon.ico><title>Install sysstat on Fedora 21 | Major Hayden's Blog ðŸ¤ </title><meta name=title content="Install sysstat on Fedora 21"><meta name=description content="One of the first tools I learned about after working with Red Hat was sysstat. It can write down historical records about your server at regular intervals. This can help you diagnose CPU usage, RAM usage, or network usage problems. In addition, sysstat also provides some handy command line utilities like vmstat, iostat, and pidstat that give you a live view of what your system is doing.
On Debian-based systems (including Ubuntu), you install the sysstat package and enable it with a quick edit to /etc/default/sysstat and the cron job takes it from there."><meta name=keywords content="centos,command line,debian,fedora,red hat,sysadmin,ubuntu,"><meta property="og:title" content="Install sysstat on Fedora 21"><meta property="og:description" content="One of the first tools I learned about after working with Red Hat was sysstat. It can write down historical records about your server at regular intervals. This can help you diagnose CPU usage, RAM usage, or network usage problems. In addition, sysstat also provides some handy command line utilities like vmstat, iostat, and pidstat that give you a live view of what your system is doing.
On Debian-based systems (including Ubuntu), you install the sysstat package and enable it with a quick edit to /etc/default/sysstat and the cron job takes it from there."><meta property="og:type" content="article"><meta property="og:url" content="https://major.io/2014/12/12/install-sysstat-fedora-21/"><meta property="og:image" content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-12-12T17:55:57+00:00"><meta property="article:modified_time" content="2014-12-12T17:55:57+00:00"><meta property="og:site_name" content="Major Hayden's Blog ðŸ¤ "><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta name=twitter:title content="Install sysstat on Fedora 21"><meta name=twitter:description content="One of the first tools I learned about after working with Red Hat was sysstat. It can write down historical records about your server at regular intervals. This can help you diagnose CPU usage, RAM usage, or network usage problems. In addition, sysstat also provides some handy command line utilities like vmstat, iostat, and pidstat that give you a live view of what your system is doing.
On Debian-based systems (including Ubuntu), you install the sysstat package and enable it with a quick edit to /etc/default/sysstat and the cron job takes it from there."><meta name=twitter:site content="@mhayden"><meta itemprop=name content="Install sysstat on Fedora 21"><meta itemprop=description content="One of the first tools I learned about after working with Red Hat was sysstat. It can write down historical records about your server at regular intervals. This can help you diagnose CPU usage, RAM usage, or network usage problems. In addition, sysstat also provides some handy command line utilities like vmstat, iostat, and pidstat that give you a live view of what your system is doing.
On Debian-based systems (including Ubuntu), you install the sysstat package and enable it with a quick edit to /etc/default/sysstat and the cron job takes it from there."><meta itemprop=datePublished content="2014-12-12T17:55:57+00:00"><meta itemprop=dateModified content="2014-12-12T17:55:57+00:00"><meta itemprop=wordCount content="366"><meta itemprop=image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta itemprop=keywords content="centos,command line,debian,fedora,red hat,sysadmin,ubuntu,"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:820px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px}div.highlight code{background-color:unset;color:initial}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style></head><body><header><a href=../../../../ class=title><h2>Major Hayden's Blog ðŸ¤ </h2></a><nav><a href=../../../../>Home</a>
<a href=../../../../ham-radio-faq>Ham Radio</a>
<a href=../../../../icanhazip-com-faq>icanhazip FAQ</a>
<a href=../../../../posts>Posts</a></nav></header><main><h1>Install sysstat on Fedora 21</h1><i><time datetime=2014-12-12 pubdate>2014-12-12</time></i>
<content><p>One of the first tools I learned about after working with Red Hat was <a href=http://sebastien.godard.pagesperso-orange.fr/>sysstat</a>. It can write down historical records about your server at regular intervals. This can help you diagnose CPU usage, RAM usage, or network usage problems. In addition, sysstat also provides some handy command line utilities like <a href=http://linux.die.net/man/8/vmstat>vmstat</a>, <a href=http://linux.die.net/man/1/iostat>iostat</a>, and <a href=http://linux.die.net/man/1/pidstat>pidstat</a> that give you a live view of what your system is doing.</p><p>On Debian-based systems (including Ubuntu), you install the sysstat package and enable it with a quick edit to <code>/etc/default/sysstat</code> and the cron job takes it from there. CentOS and Fedora systems call the collector process using a cron job in <code>/etc/cron.d</code> and it&rsquo;s enabled by default.</p><p>Fedora 21 comes with sysstat 11 and there are now systemd unit files to control the collection and management of stats. You can find the unit files by listing the files in the sysstat RPM:</p><pre><code>$ rpm -ql sysstat | grep systemd
/usr/lib/systemd/system/sysstat-collect.service
/usr/lib/systemd/system/sysstat-collect.timer
/usr/lib/systemd/system/sysstat-summary.service
/usr/lib/systemd/system/sysstat-summary.timer
/usr/lib/systemd/system/sysstat.service
</code></pre><p>These services and timers <strong>aren&rsquo;t enabled by default</strong> in Fedora 21. If you run <code>sar</code> after installing sysstat, you&rsquo;ll see something like this:</p><pre><code># sar
Cannot open /var/log/sa/sa12: No such file or directory
Please check if data collecting is enabled
</code></pre><p>All you need to do is enable and start the main sysstat service:</p><pre><code>systemctl enable sysstat
systemctl start sysstat
</code></pre><p>From there, systemd will automatically call for collection and management of the statistics using its <a href=http://www.freedesktop.org/software/systemd/man/systemd.timer.html>internal timers</a>. Opening up <code>/usr/lib/systemd/system/sysstat-collect.timer</code> reveals the following:</p><div class=highlight><pre style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=color:#93a1a1;font-style:italic># /usr/lib/systemd/system/sysstat-collect.timer</span>
<span style=color:#93a1a1;font-style:italic># (C) 2014 Tomasz Torcz &lt;tomek@pipebreaker.pl&gt;</span>
<span style=color:#93a1a1;font-style:italic>#</span>
<span style=color:#93a1a1;font-style:italic># sysstat-11.0.0 systemd unit file:</span>
<span style=color:#93a1a1;font-style:italic>#        Activates activity collector every 10 minutes</span>

<span style=color:#859900>[Unit]</span>
<span style=color:#268bd2>Description</span>=<span style=color:#2aa198>Run system activity accounting tool every 10 minutes</span>

<span style=color:#859900>[Timer]</span>
<span style=color:#268bd2>OnCalendar</span>=<span style=color:#2aa198>*:00/10</span>

<span style=color:#859900>[Install]</span>
<span style=color:#268bd2>WantedBy</span>=<span style=color:#2aa198>sysstat.service</span>
</code></pre></div><p>The timer unit file ensures that the sysstat-collect.service is called every 10 minutes based on the real time provided by the system clock. (There are other options to set timers based on relative time of when the server booted or when a user logged into the system). The familiar <code>sa1</code> command appears in <code>/usr/lib/systemd/system/sysstat-collect.service</code>:</p><div class=highlight><pre style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=color:#93a1a1;font-style:italic># /usr/lib/systemd/system/sysstat-collect.service</span>
<span style=color:#93a1a1;font-style:italic># (C) 2014 Tomasz Torcz &lt;tomek@pipebreaker.pl&gt;</span>
<span style=color:#93a1a1;font-style:italic>#</span>
<span style=color:#93a1a1;font-style:italic># sysstat-11.0.0 systemd unit file:</span>
<span style=color:#93a1a1;font-style:italic>#        Collects system activity data</span>
<span style=color:#93a1a1;font-style:italic>#        Activated by sysstat-collect.timer unit</span>

<span style=color:#859900>[Unit]</span>
<span style=color:#268bd2>Description</span>=<span style=color:#2aa198>system activity accounting tool</span>
<span style=color:#268bd2>Documentation</span>=<span style=color:#2aa198>man:sa1(8)</span>

<span style=color:#859900>[Service]</span>
<span style=color:#268bd2>Type</span>=<span style=color:#2aa198>oneshot</span>
<span style=color:#268bd2>User</span>=<span style=color:#2aa198>root</span>
<span style=color:#268bd2>ExecStart</span>=<span style=color:#2aa198>/usr/lib64/sa/sa1 1 1</span>
</code></pre></div></content><p><a href=https://major.io/tags/centos/>#centos</a>
<a href=https://major.io/tags/command-line/>#command line</a>
<a href=https://major.io/tags/debian/>#debian</a>
<a href=https://major.io/tags/fedora/>#fedora</a>
<a href=https://major.io/tags/red-hat/>#red hat</a>
<a href=https://major.io/tags/sysadmin/>#sysadmin</a>
<a href=https://major.io/tags/ubuntu/>#ubuntu</a></p></main><footer><hr>CC-BY-SA 4.0 &#187;
Made with <a href=https://gohugo.io/>Hugo</a> &#187;
Theme based on <a href=https://github.com/janraasch/hugo-bearblog/>Hugo Ê•â€¢á´¥â€¢Ê” Bear</a><br><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "aca54cb1322647b89c43a40751f02ce4"}'></script></footer></body></html>