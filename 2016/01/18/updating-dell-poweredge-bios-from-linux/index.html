<!doctype html><html lang=en-us><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://major.io/favicon.ico><title>Updating Dell PowerEdge BIOS from Linux | Major Hayden's Blog ðŸ¤ </title><meta name=title content="Updating Dell PowerEdge BIOS from Linux"><meta name=description content="Updating Dell PowerEdge firmware from Linux is quite easy, but it isn&rsquo;t documented very well. I ended up with a set of PowerEdge R710&rsquo;s at work for a lab environment and the BIOS versions were different on each server.
Downloading the latest firmware Start by heading over to Dell&rsquo;s support site and enter your system&rsquo;s service tag. You can use lshw to find your service tag:
# lshw | head lab05 description: Rack Mount Chassis product: PowerEdge R710 () vendor: Dell Inc."><meta name=keywords content="centos,dell,fedora,hardware,redhat,ubuntu,"><meta property="og:title" content="Updating Dell PowerEdge BIOS from Linux"><meta property="og:description" content="Updating Dell PowerEdge firmware from Linux is quite easy, but it isn&rsquo;t documented very well. I ended up with a set of PowerEdge R710&rsquo;s at work for a lab environment and the BIOS versions were different on each server.
Downloading the latest firmware Start by heading over to Dell&rsquo;s support site and enter your system&rsquo;s service tag. You can use lshw to find your service tag:
# lshw | head lab05 description: Rack Mount Chassis product: PowerEdge R710 () vendor: Dell Inc."><meta property="og:type" content="article"><meta property="og:url" content="https://major.io/2016/01/18/updating-dell-poweredge-bios-from-linux/"><meta property="og:image" content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-01-18T20:53:38+00:00"><meta property="article:modified_time" content="2016-01-18T20:53:38+00:00"><meta property="og:site_name" content="Major Hayden's Blog ðŸ¤ "><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta name=twitter:title content="Updating Dell PowerEdge BIOS from Linux"><meta name=twitter:description content="Updating Dell PowerEdge firmware from Linux is quite easy, but it isn&rsquo;t documented very well. I ended up with a set of PowerEdge R710&rsquo;s at work for a lab environment and the BIOS versions were different on each server.
Downloading the latest firmware Start by heading over to Dell&rsquo;s support site and enter your system&rsquo;s service tag. You can use lshw to find your service tag:
# lshw | head lab05 description: Rack Mount Chassis product: PowerEdge R710 () vendor: Dell Inc."><meta name=twitter:site content="@mhayden"><meta itemprop=name content="Updating Dell PowerEdge BIOS from Linux"><meta itemprop=description content="Updating Dell PowerEdge firmware from Linux is quite easy, but it isn&rsquo;t documented very well. I ended up with a set of PowerEdge R710&rsquo;s at work for a lab environment and the BIOS versions were different on each server.
Downloading the latest firmware Start by heading over to Dell&rsquo;s support site and enter your system&rsquo;s service tag. You can use lshw to find your service tag:
# lshw | head lab05 description: Rack Mount Chassis product: PowerEdge R710 () vendor: Dell Inc."><meta itemprop=datePublished content="2016-01-18T20:53:38+00:00"><meta itemprop=dateModified content="2016-01-18T20:53:38+00:00"><meta itemprop=wordCount content="439"><meta itemprop=image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta itemprop=keywords content="centos,dell,fedora,hardware,redhat,ubuntu,"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:820px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px}div.highlight code{background-color:unset;color:initial}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style></head><body><header><a href=../../../../ class=title><h2>Major Hayden's Blog ðŸ¤ </h2></a><nav><a href=../../../../>Home</a>
<a href=../../../../ham-radio-faq>Ham Radio</a>
<a href=../../../../icanhazip-com-faq>icanhazip FAQ</a>
<a href=../../../../posts>Posts</a></nav></header><main><h1>Updating Dell PowerEdge BIOS from Linux</h1><i><time datetime=2016-01-18 pubdate>2016-01-18</time></i>
<content><p><img src=../../../../wp-content/uploads/2016/01/2466171910_7d18907322_o-e1453148385165.jpg alt=cover></p><p>Updating Dell PowerEdge firmware from Linux is quite easy, but it isn&rsquo;t documented very well. I ended up with a set of PowerEdge R710&rsquo;s at work for a lab environment and the BIOS versions were different on each server.</p><h2 id=downloading-the-latest-firmware>Downloading the latest firmware</h2><p>Start by heading over to <a href=http://support.dell.com/>Dell&rsquo;s support site</a> and enter your system&rsquo;s service tag. You can use <code>lshw</code> to find your service tag:</p><pre><code># lshw | head
lab05
    description: Rack Mount Chassis
    product: PowerEdge R710 ()
    vendor: Dell Inc.
    serial: [service tag should be here]
    width: 64 bits
    capabilities: smbios-2.6 dmi-2.6 vsyscall32
    configuration: boot=normal chassis=rackmount uuid=44454C4C-3700-104A-8052-B2C04F564831
  *-core
       description: Motherboard
</code></pre><p>After entering the service tag, follow these steps:</p><ul><li>Click <strong>Drivers & downloads</strong> on the left</li><li>Click <strong>Change OS</strong> at the top right and choose <strong>Red Hat Enterprise Linux 7</strong></li><li>Click the <strong>BIOS</strong> dropdown in the list</li><li>Click <strong>Other file formats available</strong></li><li>Look for the file ending in <strong>BIN</strong> and click <strong>Download file</strong> underneath it</li></ul><p>Copy that file to your server that needs a BIOS update.</p><h2 id=installing-firmware-update-tools>Installing firmware update tools</h2><p>Start by getting the right packages installed. I&rsquo;ll cover the CentOS/RHEL and Ubuntu methods here. At the moment, Fedora doesn&rsquo;t build kernels with the <code>dell_rbu</code> module enabled, but there&rsquo;s a <a href=https://lists.fedoraproject.org/archives/list/kernel@lists.fedoraproject.org/thread/L623WBK7HAAQWD5FG2MFBD7SIGNGXXVJ/>discussion about getting that fixed</a>.</p><p>For CentOS, you&rsquo;ll need to get the Dell Linux repository configured first:</p><pre><code>wget http://linux.dell.com/repo/hardware/latest/bootstrap.cgi
sh bootstrap.cgi
yum -y install firmware-addon-dell
</code></pre><p>For Ubuntu, the package is in the upstream repositories already:</p><pre><code>apt-get -y install firmware-addon-dell
</code></pre><h2 id=extract-and-flash-the-bios-header>Extract and flash the BIOS header</h2><p>Dell packages up a BIOS header (the actual firmware blob that needs to be flashed) within the BIN file you downloaded earlier. The latest version of the BIOS for my R710 is 6.4.0, so my file is called <code>R710_BIOS_4HKX2_LN_6.4.0.BIN</code>. Let&rsquo;s start by extracting the header file:</p><pre><code>bash R710_BIOS_4HKX2_LN_6.4.0.BIN --extract bios
</code></pre><p>You should now have a directory in your current directory called <code>bios</code>. The header file is within <code>bios/payload/</code> and you&rsquo;ll use that to flash the BIOS:</p><pre><code># modprobe dell_rbu
# dellBiosUpdate-compat --hdr bios/payload/R710-060400.hdr --update
Supported RBU type for this system: (MONOLITHIC, PACKET)
Using RBU v2 driver. Initializing Driver.
Setting RBU type in v2 driver to: PACKET
writing (4096) to file: /sys/devices/platform/dell_rbu/packet_size
Writing RBU data (4096bytes/dot): ...........................
Done writing packet data.
Activate CMOS bit to notify BIOS that update is ready on next boot.
Update staged sucessfully. BIOS update will occur on next reboot.
</code></pre><p>It&rsquo;s now time to reboot! If you watch the console via iDRAC, you&rsquo;ll see a 3-4 minute delay on the next reboot while the staged BIOS image is flashed. When the server boots, use <code>lshw</code> to verify that the BIOS version has been updated.</p><p><em>Photo Credit: <a href=https://www.flickr.com/photos/21881956@N05/2466171910/>vaxomatic</a> via <a href=http://compfight.com>Compfight</a> <a href=https://creativecommons.org/licenses/by/2.0/>cc</a></em></p></content><p><a href=https://major.io/tags/centos/>#centos</a>
<a href=https://major.io/tags/dell/>#dell</a>
<a href=https://major.io/tags/fedora/>#fedora</a>
<a href=https://major.io/tags/hardware/>#hardware</a>
<a href=https://major.io/tags/redhat/>#redhat</a>
<a href=https://major.io/tags/ubuntu/>#ubuntu</a></p></main><footer><hr>CC-BY-SA 4.0 &#187;
Made with <a href=https://gohugo.io/>Hugo</a> &#187;
Theme based on <a href=https://github.com/janraasch/hugo-bearblog/>Hugo Ê•â€¢á´¥â€¢Ê” Bear</a><br></footer></body></html>