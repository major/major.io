<!doctype html><html lang=en-us><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://major.io/favicon.ico><title>Changing your ssh serverâ€™s port from the default: Is it worth it? | Major Hayden's Blog ðŸ¤ </title><meta name=title content="Changing your ssh serverâ€™s port from the default: Is it worth it?"><meta name=description content="Changing my ssh port from the default port (22) has been one of my standard processes for quite some time when I build new servers or virtual machines. However, I see arguments crop up regularly about it (like this reddit thread or this other one).
Before I go any further, let&rsquo;s settle the &ldquo;security through obscurity&rdquo; argument. (This could probably turn into its own post but I&rsquo;ll be brief for now."><meta name=keywords content="command line,fedora,general advice,linux,network,networking,red hat,security,ssh,sysadmin,virtualization,web,"><meta property="og:title" content="Changing your ssh serverâ€™s port from the default: Is it worth it?"><meta property="og:description" content="Changing my ssh port from the default port (22) has been one of my standard processes for quite some time when I build new servers or virtual machines. However, I see arguments crop up regularly about it (like this reddit thread or this other one).
Before I go any further, let&rsquo;s settle the &ldquo;security through obscurity&rdquo; argument. (This could probably turn into its own post but I&rsquo;ll be brief for now."><meta property="og:type" content="article"><meta property="og:url" content="https://major.io/2013/05/14/changing-your-ssh-servers-port-from-the-default-is-it-worth-it/"><meta property="og:image" content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2013-05-15T04:43:41+00:00"><meta property="article:modified_time" content="2013-05-15T04:43:41+00:00"><meta property="og:site_name" content="Major Hayden's Blog ðŸ¤ "><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta name=twitter:title content="Changing your ssh serverâ€™s port from the default: Is it worth it?"><meta name=twitter:description content="Changing my ssh port from the default port (22) has been one of my standard processes for quite some time when I build new servers or virtual machines. However, I see arguments crop up regularly about it (like this reddit thread or this other one).
Before I go any further, let&rsquo;s settle the &ldquo;security through obscurity&rdquo; argument. (This could probably turn into its own post but I&rsquo;ll be brief for now."><meta name=twitter:site content="@mhayden"><meta itemprop=name content="Changing your ssh serverâ€™s port from the default: Is it worth it?"><meta itemprop=description content="Changing my ssh port from the default port (22) has been one of my standard processes for quite some time when I build new servers or virtual machines. However, I see arguments crop up regularly about it (like this reddit thread or this other one).
Before I go any further, let&rsquo;s settle the &ldquo;security through obscurity&rdquo; argument. (This could probably turn into its own post but I&rsquo;ll be brief for now."><meta itemprop=datePublished content="2013-05-15T04:43:41+00:00"><meta itemprop=dateModified content="2013-05-15T04:43:41+00:00"><meta itemprop=wordCount content="544"><meta itemprop=image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta itemprop=keywords content="command line,fedora,general advice,linux,network,networking,red hat,security,ssh,sysadmin,virtualization,web,"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:820px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px}div.highlight code{background-color:unset;color:initial}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style></head><body><header><a href=../../../../ class=title><h2>Major Hayden's Blog ðŸ¤ </h2></a><nav><a href=../../../../>Home</a>
<a href=../../../../ham-radio-faq>Ham Radio</a>
<a href=../../../../icanhazip-com-faq>icanhazip FAQ</a>
<a href=../../../../posts>Posts</a></nav></header><main><h1>Changing your ssh serverâ€™s port from the default: Is it worth it?</h1><i><time datetime=2013-05-15 pubdate>2013-05-15</time></i>
<content><p>Changing my ssh port from the default port (22) has been one of my standard processes for quite some time when I build new servers or virtual machines. However, I see arguments crop up regularly about it (like <a href=http://redd.it/1ebe0d>this reddit thread</a> or <a href=http://redd.it/fnz1h>this other one</a>).</p><p>Before I go any further, let&rsquo;s settle the &ldquo;security through obscurity&rdquo; argument. <em>(This could probably turn into its own post but I&rsquo;ll be brief for now.)</em> Security should always be applied in layers. This provides multiple levels of protection from initial attacks, like information gathering attempts or casual threats against known vulnerabilities. In addition, these layers of security should be applied <strong>within</strong> the environment so that breaking into one server after getting a pivot point in the environment should be just as difficult (if not more difficult) than the original attack that created the pivot point. If &ldquo;security through obscurity&rdquo; tactics make up <em>one layer</em> of a <em>multi-layered solution</em>, I&rsquo;d encourage you to obscure your environment as long as it doesn&rsquo;t <a href=http://security.blogoverflow.com/2012/08/confidentiality-integrity-availability-the-three-components-of-the-cia-triad/>affect your availability</a>.</p><p>The key takeaway is:</p><blockquote><p>Security through obscurity is effective if it&rsquo;s one layer in a multi-layer security solution</p></blockquote><p>Let&rsquo;s get back to the original purpose of the post.</p><p><strong>The biggest benefit to changing the port is to avoid being seen by casual scans.</strong> The vast majority of people hunting for any open ssh servers will look for port 22. Some will try the usual variants, like 222 and 2222, but those are few and far between. I ran an experiment with a virtual machine exposed to the internet which had sshd listening on port 22. The server stayed online for one week and then I changed the ssh port to 222. <strong>The number of attacks dropped by 98%.</strong> Even though this is solely empirical evidence, it&rsquo;s clear that moving off the standard ssh port reduces your server&rsquo;s profile.</p><p>If it&rsquo;s more difficult to scan for your ssh server, your chances of being attacked with an ssh server exploit are reduced. A determined attacker can still find the port if they know your server&rsquo;s IP address via another means (perhaps via a website you host) and they can launch attacks once they find it. Paranoid server administrators might want to check into <a href=https://wiki.archlinux.org/index.php/Port_Knocking>port knocking</a> to reduce that probability even further.</p><p>Remembering the non-standard ssh port can be annoying, but if you have a standard set of workstations that you use for access your servers, just utilize your <code>~/.ssh/config</code> file to specify certain ports for certain servers. For example:</p><pre><code>Host *.mycompany.com
  Port 4321

Host nonstandard.mypersonalstuff.com
  Port 2345

Host *.mypersonalstuff.com
  Port 5432
</code></pre><p>If you run into SELinux problems with a non-standard ssh port, there are <a href=../../../../2011/09/15/receive-e-mail-reports-for-selinux-avc-denials/>plenty of guides on this topic.</a>. The <code>setroubleshoot-server</code> package helps out with this as well.</p><pre><code># semanage port -a -t ssh_port_t -p tcp 4321
# semanage port -l | grep ssh
ssh_port_t                     tcp      4321,22
</code></pre><p>Here is my list of ssh lockdown practices when I build a new server:</p><ul><li>Update the ssh server package and ensure that automatic updates are configured</li><li>Enable SELinux and allow a non-standard ssh port</li><li>Add my ssh public key to the server</li><li>Disable password logins for ssh</li><li>Adjust my <code>AllowUsers</code> setting in sshd_config to only allow my user</li><li>Disable root logins</li><li>For servers with sensitive data, I install <a href=http://www.fail2ban.org/>fail2ban</a></li></ul></content><p><a href=https://major.io/tags/command-line/>#command line</a>
<a href=https://major.io/tags/fedora/>#fedora</a>
<a href=https://major.io/tags/general-advice/>#general advice</a>
<a href=https://major.io/tags/linux/>#linux</a>
<a href=https://major.io/tags/network/>#network</a>
<a href=https://major.io/tags/networking/>#networking</a>
<a href=https://major.io/tags/red-hat/>#red hat</a>
<a href=https://major.io/tags/security/>#security</a>
<a href=https://major.io/tags/ssh/>#ssh</a>
<a href=https://major.io/tags/sysadmin/>#sysadmin</a>
<a href=https://major.io/tags/virtualization/>#virtualization</a>
<a href=https://major.io/tags/web/>#web</a></p></main><footer><hr>CC-BY-SA 4.0 &#187;
Made with <a href=https://gohugo.io/>Hugo</a> &#187;
Theme based on <a href=https://github.com/janraasch/hugo-bearblog/>Hugo Ê•â€¢á´¥â€¢Ê” Bear</a><br><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "aca54cb1322647b89c43a40751f02ce4"}'></script></footer></body></html>