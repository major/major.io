<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="Major Hayden"><meta name=description content="It&amp;rsquo;s been a little while since I last posted about installing Xen on Fedora, so I figured that Fedora 19&amp;rsquo;s beta release was as good a time as any to write a new post. To get started, you&amp;rsquo;ll need to get Fedora 19 installed on your favorite hardware (or virtual machine).
Install the Xen hypervisor and tools. Also, ensure that both of the necessary daemons are running on each boot:"><meta name=keywords content=",command line,fedora,kernel,linux,security,selinux,sysadmin,virtualization,xen,yum"><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://major.io/2013/06/02/installing-the-xen-hypervisor-on-fedora-19/><title>Installing the Xen hypervisor on Fedora 19 :: Major Hayden ðŸ¤  â€” Words of wisdom from a social nerd</title><link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css rel=stylesheet type=text/css><link rel=stylesheet href=../../../../main.89fa80e2143f71bd5c96a7c94e531dec3276a367e22f87e74a76026ab64680bf.css><link rel=apple-touch-icon sizes=180x180 href=../../../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../../../favicon-16x16.png><link rel=manifest href=../../../../site.webmanifest><link rel=mask-icon href=../../../../safari-pinned-tab.svg color=#252627><link rel="shortcut icon" href=../../../../favicon.ico><meta name=msapplication-TileColor content="#252627"><meta name=theme-color content="#252627"><meta itemprop=name content="Installing the Xen hypervisor on Fedora 19"><meta itemprop=description content="It&rsquo;s been a little while since I last posted about installing Xen on Fedora, so I figured that Fedora 19&rsquo;s beta release was as good a time as any to write a new post. To get started, you&rsquo;ll need to get Fedora 19 installed on your favorite hardware (or virtual machine).
Install the Xen hypervisor and tools. Also, ensure that both of the necessary daemons are running on each boot:"><meta itemprop=datePublished content="2013-06-03T04:27:43+00:00"><meta itemprop=dateModified content="2013-06-03T04:27:43+00:00"><meta itemprop=wordCount content="595"><meta itemprop=image content="https://major.io"><meta itemprop=keywords content="command line,fedora,kernel,linux,security,selinux,sysadmin,virtualization,xen,yum,"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://major.io"><meta name=twitter:title content="Installing the Xen hypervisor on Fedora 19"><meta name=twitter:description content="It&rsquo;s been a little while since I last posted about installing Xen on Fedora, so I figured that Fedora 19&rsquo;s beta release was as good a time as any to write a new post. To get started, you&rsquo;ll need to get Fedora 19 installed on your favorite hardware (or virtual machine).
Install the Xen hypervisor and tools. Also, ensure that both of the necessary daemons are running on each boot:"><meta name=twitter:site content="@mhayden"><meta property="article:section" content="Blog Posts"><meta property="article:published_time" content="2013-06-03 04:27:43 +0000 UTC"><style type=text/css>html{letter-spacing:unset}</style></head><body><div class=container><header class=header><span class=header__inner><a href=../../../../ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>$ echo major.io</span>
<span class=logo__cursor style=visibility:hidden></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=../../../../ham-radio-faq>hamradio</a></li><li><a href=../../../../icanhazip-com-faq>icanhazip</a></li><li><a href=../../../../posts/>posts</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info></p></div><article><h2 class=post-title><a href=https://major.io/2013/06/02/installing-the-xen-hypervisor-on-fedora-19/>Installing the Xen hypervisor on Fedora 19</a></h2><div class=post-content><p>It&rsquo;s been a little while <a href=../../../../2011/08/05/xen-4-1-on-fedora-15-with-linux-3-0/>since I last posted about installing Xen on Fedora</a>, so I figured that Fedora 19&rsquo;s beta release was as good a time as any to write a new post. To get started, you&rsquo;ll need to get Fedora 19 installed on your favorite hardware (or virtual machine).</p><p>Install the Xen hypervisor and tools. Also, ensure that both of the necessary daemons are running on each boot:</p><pre><code>yum -y install xen xen-hypervisor xen-libs xen-runtime
chkconfig xend on
chkconfig xendomains on
</code></pre><p>You&rsquo;ll notice that I didn&rsquo;t start the daemons quite yet. We will need the xen hypervisor running before they will be of any use.</p><p>Now, let&rsquo;s configure GRUB2. I wrote a <a href=../../../../2012/07/16/boot-the-xen-hypervisor-by-default-in-fedora-17-with-grub-2/>quick post about these steps</a> last year. The Xen kernel entry should already be configured (by grubby), but it&rsquo;s not the default. Fixing that is a quick process:</p><pre><code># grep ^menuentry /boot/grub2/grub.cfg | cut -d &quot;'&quot; -f2
Fedora, with Linux 3.9.4-300.fc19.x86_64
Fedora, with Linux 0-rescue-4ea51ecfff4f4e64a5ec903c495ee5b6
Fedora, with Xen hypervisor
# grub2-set-default 'Fedora, with Xen hypervisor'
# grub2-editenv list
saved_entry=Fedora, with Xen hypervisor
</code></pre><p>At this point, you&rsquo;re ready to reboot. After the reboot, verify that Xen is running:</p><pre><code># xm dmesg | head
 __  __            _  _    ____    ____    ____    __      _  ___
 \ \/ /___ _ __   | || |  |___ \  |___ \  | ___|  / _| ___/ |/ _ \
  \  // _ \ '_ \  | || |_   __) |   __) |_|___ \ | |_ / __| | (_) |
  /  \  __/ | | | |__   _| / __/ _ / __/|__|__) ||  _| (__| |\__, |
 /_/\_\___|_| |_|    |_|(_)_____(_)_____| |____(_)_|  \___|_|  /_/

(XEN) Xen version 4.2.2 (mockbuild@phx2.fedoraproject.org) (gcc (GCC) 4.8.0 20130412 (Red Hat 4.8.0-2)) Fri May 17 19:39:53 UTC 2013
(XEN) Latest ChangeSet: unavailable
(XEN) Bootloader: GRUB 2.00
(XEN) Command line: placeholder
</code></pre><p>If you&rsquo;re adventurous on the command line, you&rsquo;re done here. However, I enjoy using virt-manager for quick access to virtual machines and I also like all of the scripting and remote administration capabilities that libvirt delivers. Let&rsquo;s get the tools and daemons installed and running:</p><pre><code>yum -y install virt-manager dejavu* xorg-x11-xauth
yum -y install libvirt-daemon-driver-network libvirt-daemon-driver-storage libvirt-daemon-xen
chkconfig libvirtd on
service libvirtd start
</code></pre><p>You&rsquo;re now ready to use virt-manager to manage your virtual machines. Simply ssh to your hypervisor with X forwarding enabled (<code>ssh -X hypervisor.mydomain.com</code>) and run <code>virt-manager</code>. You won&rsquo;t have a virtual network or bridge to use for virtual machines quite yet. You have two options: NAT your VM&rsquo;s or configure a network bridge. I prefer the bridge but you may require something different in your environment.</p><p>For the NAT option (the easiest for beginners):</p><pre><code>yum -y install libvirt-daemon-config-network libvirt-daemon-config-nwfilter
service libvirtd restart
</code></pre><p>For the network-bridge option, you&rsquo;ll need to adjust your network scripts to create a bridge and add your primary network interface to the bridge. That&rsquo;s a bit outside the scope of this post, but the <a href=http://fedoraproject.org/wiki/Networking/Bridging>Fedora Wiki</a> and <a href=http://www.howtoforge.com/virtualization-with-kvm-on-a-fedora-17-server>HowtoForge</a> (ignore the KVM parts of their guide).</p><p><strong>You now have a working Xen installation on Fedora 19!</strong></p><p>FOR THOSE WHO EMBRACE SECURITY:</p><p>If you run SELinux in Enforcing mode, there&rsquo;s still a lingering issue where SELinux prevents python (running under xend) from talking to block devices (like logical volumes). I <a href="https://bugzilla.redhat.com/show_bug.cgi?id=839287">opened a bug</a> about a similar problem before but I need to open another one for the block device issue. If you&rsquo;re itching for a workaround, you can force SELinux into permissive mode for the xend_t context only:</p><pre><code>yum -y install selinux-policy-devel
semanage permissive -a xend_t
</code></pre><p>That&rsquo;s not the best option for now, but it&rsquo;s certainly better than <code>setenforce 0</code>. ;)</p></div></article><hr><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://major.io/tags/command-line/>command line</a></span>
<span class=tag><a href=https://major.io/tags/fedora/>fedora</a></span>
<span class=tag><a href=https://major.io/tags/kernel/>kernel</a></span>
<span class=tag><a href=https://major.io/tags/linux/>linux</a></span>
<span class=tag><a href=https://major.io/tags/security/>security</a></span>
<span class=tag><a href=https://major.io/tags/selinux/>selinux</a></span>
<span class=tag><a href=https://major.io/tags/sysadmin/>sysadmin</a></span>
<span class=tag><a href=https://major.io/tags/virtualization/>virtualization</a></span>
<span class=tag><a href=https://major.io/tags/xen/>xen</a></span>
<span class=tag><a href=https://major.io/tags/yum/>yum</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-folder meta-icon"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg><span class=tag><a href=https://major.io/categories/blog-posts/>Blog Posts</a></span></p></div></main></div><footer class=footer><div class=footer__inner><div class=footer__content><span>&copy; 2021</span>
<span><a href=https://major.io>Major Hayden</a></span>
<span><a href=https://creativecommons.org/licenses/by-sa/2.0/ target=_blank rel=noopener>CC BY-SA 2.0</a></span><span><a href=https://major.io/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></span></div></div><div class=footer__inner><div class=footer__content><span>Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>Made with &#10084; by <a href=https://github.com/rhazdon>Djordje Atlialp</a></span></div></div></footer></div><script type=text/javascript src=../../../../bundle.min.e9f93b80e78a22e6f04cbb5f73e0f9c4ba60ff73a2a0ef85965c688f93dd1f2722a282e30e485603e4c65b1b346720e35f213435ec5556e196a97a68d097c80f.js integrity="sha512-6fk7gOeKIubwTLtfc+D5xLpg/3OioO+Fllxoj5PdHyciooLjDkhWA+TGWxs0ZyDjXyE0NexVVuGWqXpo0JfIDw=="></script></body></html>