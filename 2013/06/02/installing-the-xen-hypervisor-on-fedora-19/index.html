<!doctype html><html lang=en-us><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://major.io/favicon.ico><title>Installing the Xen hypervisor on Fedora 19 | Major Hayden's Blog ðŸ¤ </title><meta name=title content="Installing the Xen hypervisor on Fedora 19"><meta name=description content="It&rsquo;s been a little while since I last posted about installing Xen on Fedora, so I figured that Fedora 19&rsquo;s beta release was as good a time as any to write a new post. To get started, you&rsquo;ll need to get Fedora 19 installed on your favorite hardware (or virtual machine).
Install the Xen hypervisor and tools. Also, ensure that both of the necessary daemons are running on each boot:"><meta name=keywords content="command line,fedora,kernel,linux,security,selinux,sysadmin,virtualization,xen,yum,"><meta property="og:title" content="Installing the Xen hypervisor on Fedora 19"><meta property="og:description" content="It&rsquo;s been a little while since I last posted about installing Xen on Fedora, so I figured that Fedora 19&rsquo;s beta release was as good a time as any to write a new post. To get started, you&rsquo;ll need to get Fedora 19 installed on your favorite hardware (or virtual machine).
Install the Xen hypervisor and tools. Also, ensure that both of the necessary daemons are running on each boot:"><meta property="og:type" content="article"><meta property="og:url" content="https://major.io/2013/06/02/installing-the-xen-hypervisor-on-fedora-19/"><meta property="og:image" content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2013-06-03T04:27:43+00:00"><meta property="article:modified_time" content="2013-06-03T04:27:43+00:00"><meta property="og:site_name" content="Major Hayden's Blog ðŸ¤ "><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta name=twitter:title content="Installing the Xen hypervisor on Fedora 19"><meta name=twitter:description content="It&rsquo;s been a little while since I last posted about installing Xen on Fedora, so I figured that Fedora 19&rsquo;s beta release was as good a time as any to write a new post. To get started, you&rsquo;ll need to get Fedora 19 installed on your favorite hardware (or virtual machine).
Install the Xen hypervisor and tools. Also, ensure that both of the necessary daemons are running on each boot:"><meta name=twitter:site content="@mhayden"><meta itemprop=name content="Installing the Xen hypervisor on Fedora 19"><meta itemprop=description content="It&rsquo;s been a little while since I last posted about installing Xen on Fedora, so I figured that Fedora 19&rsquo;s beta release was as good a time as any to write a new post. To get started, you&rsquo;ll need to get Fedora 19 installed on your favorite hardware (or virtual machine).
Install the Xen hypervisor and tools. Also, ensure that both of the necessary daemons are running on each boot:"><meta itemprop=datePublished content="2013-06-03T04:27:43+00:00"><meta itemprop=dateModified content="2013-06-03T04:27:43+00:00"><meta itemprop=wordCount content="595"><meta itemprop=image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta itemprop=keywords content="command line,fedora,kernel,linux,security,selinux,sysadmin,virtualization,xen,yum,"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:820px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px}div.highlight code{background-color:unset;color:initial}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style></head><body><header><a href=../../../../ class=title><h2>Major Hayden's Blog ðŸ¤ </h2></a><nav><a href=../../../../>Home</a>
<a href=../../../../ham-radio-faq>Ham Radio</a>
<a href=../../../../icanhazip-com-faq>icanhazip FAQ</a>
<a href=../../../../posts>Posts</a></nav></header><main><h1>Installing the Xen hypervisor on Fedora 19</h1><i><time datetime=2013-06-03 pubdate>2013-06-03</time></i>
<content><p>It&rsquo;s been a little while <a href=../../../../2011/08/05/xen-4-1-on-fedora-15-with-linux-3-0/>since I last posted about installing Xen on Fedora</a>, so I figured that Fedora 19&rsquo;s beta release was as good a time as any to write a new post. To get started, you&rsquo;ll need to get Fedora 19 installed on your favorite hardware (or virtual machine).</p><p>Install the Xen hypervisor and tools. Also, ensure that both of the necessary daemons are running on each boot:</p><pre><code>yum -y install xen xen-hypervisor xen-libs xen-runtime
chkconfig xend on
chkconfig xendomains on
</code></pre><p>You&rsquo;ll notice that I didn&rsquo;t start the daemons quite yet. We will need the xen hypervisor running before they will be of any use.</p><p>Now, let&rsquo;s configure GRUB2. I wrote a <a href=../../../../2012/07/16/boot-the-xen-hypervisor-by-default-in-fedora-17-with-grub-2/>quick post about these steps</a> last year. The Xen kernel entry should already be configured (by grubby), but it&rsquo;s not the default. Fixing that is a quick process:</p><pre><code># grep ^menuentry /boot/grub2/grub.cfg | cut -d &quot;'&quot; -f2
Fedora, with Linux 3.9.4-300.fc19.x86_64
Fedora, with Linux 0-rescue-4ea51ecfff4f4e64a5ec903c495ee5b6
Fedora, with Xen hypervisor
# grub2-set-default 'Fedora, with Xen hypervisor'
# grub2-editenv list
saved_entry=Fedora, with Xen hypervisor
</code></pre><p>At this point, you&rsquo;re ready to reboot. After the reboot, verify that Xen is running:</p><pre><code># xm dmesg | head
 __  __            _  _    ____    ____    ____    __      _  ___
 \ \/ /___ _ __   | || |  |___ \  |___ \  | ___|  / _| ___/ |/ _ \
  \  // _ \ '_ \  | || |_   __) |   __) |_|___ \ | |_ / __| | (_) |
  /  \  __/ | | | |__   _| / __/ _ / __/|__|__) ||  _| (__| |\__, |
 /_/\_\___|_| |_|    |_|(_)_____(_)_____| |____(_)_|  \___|_|  /_/

(XEN) Xen version 4.2.2 (mockbuild@phx2.fedoraproject.org) (gcc (GCC) 4.8.0 20130412 (Red Hat 4.8.0-2)) Fri May 17 19:39:53 UTC 2013
(XEN) Latest ChangeSet: unavailable
(XEN) Bootloader: GRUB 2.00
(XEN) Command line: placeholder
</code></pre><p>If you&rsquo;re adventurous on the command line, you&rsquo;re done here. However, I enjoy using virt-manager for quick access to virtual machines and I also like all of the scripting and remote administration capabilities that libvirt delivers. Let&rsquo;s get the tools and daemons installed and running:</p><pre><code>yum -y install virt-manager dejavu* xorg-x11-xauth
yum -y install libvirt-daemon-driver-network libvirt-daemon-driver-storage libvirt-daemon-xen
chkconfig libvirtd on
service libvirtd start
</code></pre><p>You&rsquo;re now ready to use virt-manager to manage your virtual machines. Simply ssh to your hypervisor with X forwarding enabled (<code>ssh -X hypervisor.mydomain.com</code>) and run <code>virt-manager</code>. You won&rsquo;t have a virtual network or bridge to use for virtual machines quite yet. You have two options: NAT your VM&rsquo;s or configure a network bridge. I prefer the bridge but you may require something different in your environment.</p><p>For the NAT option (the easiest for beginners):</p><pre><code>yum -y install libvirt-daemon-config-network libvirt-daemon-config-nwfilter
service libvirtd restart
</code></pre><p>For the network-bridge option, you&rsquo;ll need to adjust your network scripts to create a bridge and add your primary network interface to the bridge. That&rsquo;s a bit outside the scope of this post, but the <a href=http://fedoraproject.org/wiki/Networking/Bridging>Fedora Wiki</a> and <a href=http://www.howtoforge.com/virtualization-with-kvm-on-a-fedora-17-server>HowtoForge</a> (ignore the KVM parts of their guide).</p><p><strong>You now have a working Xen installation on Fedora 19!</strong></p><p>FOR THOSE WHO EMBRACE SECURITY:</p><p>If you run SELinux in Enforcing mode, there&rsquo;s still a lingering issue where SELinux prevents python (running under xend) from talking to block devices (like logical volumes). I <a href="https://bugzilla.redhat.com/show_bug.cgi?id=839287">opened a bug</a> about a similar problem before but I need to open another one for the block device issue. If you&rsquo;re itching for a workaround, you can force SELinux into permissive mode for the xend_t context only:</p><pre><code>yum -y install selinux-policy-devel
semanage permissive -a xend_t
</code></pre><p>That&rsquo;s not the best option for now, but it&rsquo;s certainly better than <code>setenforce 0</code>. ;)</p></content><p><a href=https://major.io/tags/command-line/>#command line</a>
<a href=https://major.io/tags/fedora/>#fedora</a>
<a href=https://major.io/tags/kernel/>#kernel</a>
<a href=https://major.io/tags/linux/>#linux</a>
<a href=https://major.io/tags/security/>#security</a>
<a href=https://major.io/tags/selinux/>#selinux</a>
<a href=https://major.io/tags/sysadmin/>#sysadmin</a>
<a href=https://major.io/tags/virtualization/>#virtualization</a>
<a href=https://major.io/tags/xen/>#xen</a>
<a href=https://major.io/tags/yum/>#yum</a></p></main><footer><hr>CC-BY-SA 4.0 &#187;
Made with <a href=https://gohugo.io/>Hugo</a> &#187;
Theme based on <a href=https://github.com/janraasch/hugo-bearblog/>Hugo Ê•â€¢á´¥â€¢Ê” Bear</a><br><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "aca54cb1322647b89c43a40751f02ce4"}'></script></footer></body></html>