<!doctype html><html lang=en-us><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://major.io/favicon.ico><title>Reprint: Stop Disabling SELinux! | Major Hayden's Blog ðŸ¤ </title><meta name=title content="Reprint: Stop Disabling SELinux!"><meta name=description content="This article appeared in SC Magazine and I&rsquo;ve posted it here as well. For those of you who were left wanting more from my previous SELinux post, this should help. If it doesn&rsquo;t help, leave a comment. ;)
 The push to cloud transforms the way we apply information security principles to systems and applications. Perimeters of the past, secured heavily with traditional network devices in the outermost ring, lose effectiveness day by day."><meta name=keywords content="centos,fedora,general advice,red hat,security,selinux,writing,"><meta property="og:title" content="Reprint: Stop Disabling SELinux!"><meta property="og:description" content="This article appeared in SC Magazine and I&rsquo;ve posted it here as well. For those of you who were left wanting more from my previous SELinux post, this should help. If it doesn&rsquo;t help, leave a comment. ;)
 The push to cloud transforms the way we apply information security principles to systems and applications. Perimeters of the past, secured heavily with traditional network devices in the outermost ring, lose effectiveness day by day."><meta property="og:type" content="article"><meta property="og:url" content="https://major.io/2013/04/19/reprint-stop-disabling-selinux/"><meta property="og:image" content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2013-04-19T05:52:23+00:00"><meta property="article:modified_time" content="2013-04-19T05:52:23+00:00"><meta property="og:site_name" content="Major Hayden's Blog ðŸ¤ "><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta name=twitter:title content="Reprint: Stop Disabling SELinux!"><meta name=twitter:description content="This article appeared in SC Magazine and I&rsquo;ve posted it here as well. For those of you who were left wanting more from my previous SELinux post, this should help. If it doesn&rsquo;t help, leave a comment. ;)
 The push to cloud transforms the way we apply information security principles to systems and applications. Perimeters of the past, secured heavily with traditional network devices in the outermost ring, lose effectiveness day by day."><meta name=twitter:site content="@mhayden"><meta itemprop=name content="Reprint: Stop Disabling SELinux!"><meta itemprop=description content="This article appeared in SC Magazine and I&rsquo;ve posted it here as well. For those of you who were left wanting more from my previous SELinux post, this should help. If it doesn&rsquo;t help, leave a comment. ;)
 The push to cloud transforms the way we apply information security principles to systems and applications. Perimeters of the past, secured heavily with traditional network devices in the outermost ring, lose effectiveness day by day."><meta itemprop=datePublished content="2013-04-19T05:52:23+00:00"><meta itemprop=dateModified content="2013-04-19T05:52:23+00:00"><meta itemprop=wordCount content="708"><meta itemprop=image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta itemprop=keywords content="centos,fedora,general advice,red hat,security,selinux,writing,"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:820px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px}div.highlight code{background-color:unset;color:initial}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style></head><body><header><a href=../../../../ class=title><h2>Major Hayden's Blog ðŸ¤ </h2></a><nav><a href=../../../../>Home</a>
<a href=../../../../ham-radio-faq>Ham Radio</a>
<a href=../../../../icanhazip-com-faq>icanhazip FAQ</a>
<a href=../../../../posts>Posts</a></nav><script async src=https://media.ethicalads.io/media/client/ethicalads.min.js></script><div data-ea-publisher=major-io data-ea-type=text></div></header><main><h1>Reprint: Stop Disabling SELinux!</h1><i><time datetime=2013-04-19 pubdate>2013-04-19</time></i>
<content><p><em>This article appeared in <a href=http://www.scmagazine.com.au/News/340475,stop-disabling-selinux.aspx>SC Magazine</a> and I&rsquo;ve posted it here as well. For those of you who were left wanting more from my <a href=../../../../2013/04/15/seriously-stop-disabling-selinux/>previous SELinux post</a>, this should help. If it doesn&rsquo;t help, leave a comment. ;)</em></p><hr><p>The push to cloud transforms the way we apply information security principles to systems and applications. Perimeters of the past, secured heavily with traditional network devices in the outermost ring, lose effectiveness day by day. Shifting the focus to &ldquo;defense in depth&rdquo; brings the perimeter down to the individual cloud instances running your application. Security-Enhanced Linux, or SELinux, forms an effective part of that perimeter.</p><p>SELinux operates in the realm of mandatory access control, or MAC. The design of MAC involves placing constraints on what a user (a <em>subject</em>) can do to a particular object (a <em>target</em>) on the system. In contrast, discretionary access control, or DAC, allows a user with certain access to use discretion to limit or allow access to certain files, directories, or devices. You can set any file system permissions that you want but SELinux can override them with ease at the operating system level.</p><p>Consider a typical server running a web application. An attacker compromises the web application and executes malicious code via the web server daemon itself. SELinux has default policies that prevent the daemon from initiating communication on the network. That limits the attackerâ€™s options to attack other services or servers.</p><p>In addition, SELinux sets policies on which files and directories the web server can access, regardless of any file system permissions. This protection limits the attackerâ€™s access to other sensitive parts of the file system even if the administrator set the files to be readable to the world.</p><p>This is where SELinux shines. Oddly enough, this is the point where many system administrators actually <em>disable SELinux</em> on their systems.</p><p>Troubleshooting these events, called AVC denials, without some helpful tools is challenging and frustrating. Each denial flows into to your audit log as a cryptic message. Most administrators will check the usual suspects, like firewall rules and file system permissions. As frustration builds, they disable SELinux and notice that their application begins working as expected. SELinux remains disabled and hundreds of helpful policies lie dormant solely because one policy caused a problem.</p><p>Disabling SELinux without investigation frustrated me to the point where I started a site at <a href=http://stopdisablingselinux.com>stopdisablingselinux.com</a>. The site is a snarky response to Linux administrators who reach for the disable switch as soon as SELinux gets in their way.</p><p>All jokes aside, here are some helpful tips to use SELinux effectively:</p><p><strong>Use the <em>setroubleshoot</em> helpers to understand denials</strong></p><p>Working through denials is easy with the <em>setroubleshoot-server</em> package. When a denial occurs, you still receive a cryptic log message in your audit logs. However, you also receive a message via syslog that is very easy to read. Your server can email you these messages as well. The message contains guidance about adjusting SELinux booleans, setting contexts, or generating new SELinux policies to work around a really unusual problem. When I say guidance, I mean that the tools give you commands to copy and paste to adjust your policies, booleans and contexts.</p><p><strong>Review SELinux booleans for quick adjustments</strong></p><p>Although the myriad of SELinux user-space tools isnâ€™t within the scope of this article, <em>getsebool</em> and <em>togglesebool</em> deserve a mention. Frequently adjusted policies are controlled by booleans that are toggled on and off with <em>togglesebool</em>. Start with <em>getsebool â€“a</em> for a full list of booleans and then use <em>togglesebool</em> to enable or disable the policy.</p><p><strong>Quickly restore file or directory contexts</strong></p><p>Shuffling files or directories around a server can cause SELinux denials due to contexts not matching their original values. This happens to me frequently if I move a configuration file from one system to another. Correcting the context problem involves one of two simple commands. The <em>restorecon</em> command applies the default contexts specific to the file or directory. If you have a file in the directory with the correct context, use <em>chcon</em> to fix the context on the wrong file by giving it the path to the file with the correct context.</p><p>Here are some additional links with helpful SELinux documentation:</p><ul><li><a href=http://selinuxproject.org/page/Main_Page>SELinux Project Wiki</a></li><li><a href=https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Security-Enhanced_Linux/>Red Hat Enterprise Linux 6 SELinux Guide</a></li><li><a href=http://danwalsh.livejournal.com/>Dan Walsh&rsquo;s Blog</a></li></ul></content><p><a href=https://major.io/tags/centos/>#centos</a>
<a href=https://major.io/tags/fedora/>#fedora</a>
<a href=https://major.io/tags/general-advice/>#general advice</a>
<a href=https://major.io/tags/red-hat/>#red hat</a>
<a href=https://major.io/tags/security/>#security</a>
<a href=https://major.io/tags/selinux/>#selinux</a>
<a href=https://major.io/tags/writing/>#writing</a></p></main><footer><hr>CC-BY-SA 4.0 &#187;
Made with <a href=https://gohugo.io/>Hugo</a> &#187;
Theme based on <a href=https://github.com/janraasch/hugo-bearblog/>Hugo Ê•â€¢á´¥â€¢Ê” Bear</a><br></footer></body></html>