<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="Major Hayden"><meta name=description content="This article appeared in SC Magazine and I&amp;rsquo;ve posted it here as well. For those of you who were left wanting more from my previous SELinux post, this should help. If it doesn&amp;rsquo;t help, leave a comment. ;)
 The push to cloud transforms the way we apply information security principles to systems and applications. Perimeters of the past, secured heavily with traditional network devices in the outermost ring, lose effectiveness day by day."><meta name=keywords content=",centos,fedora,general advice,red hat,security,selinux,writing"><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://major.io/2013/04/19/reprint-stop-disabling-selinux/><title>Reprint: Stop Disabling SELinux! :: Major Hayden ðŸ¤  â€” Words of wisdom from a social nerd</title><link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css rel=stylesheet type=text/css><link rel=stylesheet href=../../../../main.89fa80e2143f71bd5c96a7c94e531dec3276a367e22f87e74a76026ab64680bf.css><link rel=apple-touch-icon sizes=180x180 href=../../../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../../../favicon-16x16.png><link rel=manifest href=../../../../site.webmanifest><link rel=mask-icon href=../../../../safari-pinned-tab.svg color=#252627><link rel="shortcut icon" href=../../../../favicon.ico><meta name=msapplication-TileColor content="#252627"><meta name=theme-color content="#252627"><meta itemprop=name content="Reprint: Stop Disabling SELinux!"><meta itemprop=description content="This article appeared in SC Magazine and I&rsquo;ve posted it here as well. For those of you who were left wanting more from my previous SELinux post, this should help. If it doesn&rsquo;t help, leave a comment. ;)
 The push to cloud transforms the way we apply information security principles to systems and applications. Perimeters of the past, secured heavily with traditional network devices in the outermost ring, lose effectiveness day by day."><meta itemprop=datePublished content="2013-04-19T05:52:23+00:00"><meta itemprop=dateModified content="2013-04-19T05:52:23+00:00"><meta itemprop=wordCount content="708"><meta itemprop=image content="https://major.io"><meta itemprop=keywords content="centos,fedora,general advice,red hat,security,selinux,writing,"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://major.io"><meta name=twitter:title content="Reprint: Stop Disabling SELinux!"><meta name=twitter:description content="This article appeared in SC Magazine and I&rsquo;ve posted it here as well. For those of you who were left wanting more from my previous SELinux post, this should help. If it doesn&rsquo;t help, leave a comment. ;)
 The push to cloud transforms the way we apply information security principles to systems and applications. Perimeters of the past, secured heavily with traditional network devices in the outermost ring, lose effectiveness day by day."><meta name=twitter:site content="@mhayden"><meta property="article:section" content="Blog Posts"><meta property="article:published_time" content="2013-04-19 05:52:23 +0000 UTC"><style type=text/css>html{letter-spacing:unset}</style></head><body><div class=container><header class=header><span class=header__inner><a href=../../../../ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>$ echo major.io</span>
<span class=logo__cursor style=visibility:hidden></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=../../../../ham-radio-faq>hamradio</a></li><li><a href=../../../../icanhazip-com-faq>icanhazip</a></li><li><a href=../../../../posts/>posts</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info></p></div><article><h2 class=post-title><a href=https://major.io/2013/04/19/reprint-stop-disabling-selinux/>Reprint: Stop Disabling SELinux!</a></h2><div class=post-content><p><em>This article appeared in <a href=http://www.scmagazine.com.au/News/340475,stop-disabling-selinux.aspx>SC Magazine</a> and I&rsquo;ve posted it here as well. For those of you who were left wanting more from my <a href=../../../../2013/04/15/seriously-stop-disabling-selinux/>previous SELinux post</a>, this should help. If it doesn&rsquo;t help, leave a comment. ;)</em></p><hr><p>The push to cloud transforms the way we apply information security principles to systems and applications. Perimeters of the past, secured heavily with traditional network devices in the outermost ring, lose effectiveness day by day. Shifting the focus to &ldquo;defense in depth&rdquo; brings the perimeter down to the individual cloud instances running your application. Security-Enhanced Linux, or SELinux, forms an effective part of that perimeter.</p><p>SELinux operates in the realm of mandatory access control, or MAC. The design of MAC involves placing constraints on what a user (a <em>subject</em>) can do to a particular object (a <em>target</em>) on the system. In contrast, discretionary access control, or DAC, allows a user with certain access to use discretion to limit or allow access to certain files, directories, or devices. You can set any file system permissions that you want but SELinux can override them with ease at the operating system level.</p><p>Consider a typical server running a web application. An attacker compromises the web application and executes malicious code via the web server daemon itself. SELinux has default policies that prevent the daemon from initiating communication on the network. That limits the attackerâ€™s options to attack other services or servers.</p><p>In addition, SELinux sets policies on which files and directories the web server can access, regardless of any file system permissions. This protection limits the attackerâ€™s access to other sensitive parts of the file system even if the administrator set the files to be readable to the world.</p><p>This is where SELinux shines. Oddly enough, this is the point where many system administrators actually <em>disable SELinux</em> on their systems.</p><p>Troubleshooting these events, called AVC denials, without some helpful tools is challenging and frustrating. Each denial flows into to your audit log as a cryptic message. Most administrators will check the usual suspects, like firewall rules and file system permissions. As frustration builds, they disable SELinux and notice that their application begins working as expected. SELinux remains disabled and hundreds of helpful policies lie dormant solely because one policy caused a problem.</p><p>Disabling SELinux without investigation frustrated me to the point where I started a site at <a href=http://stopdisablingselinux.com>stopdisablingselinux.com</a>. The site is a snarky response to Linux administrators who reach for the disable switch as soon as SELinux gets in their way.</p><p>All jokes aside, here are some helpful tips to use SELinux effectively:</p><p><strong>Use the <em>setroubleshoot</em> helpers to understand denials</strong></p><p>Working through denials is easy with the <em>setroubleshoot-server</em> package. When a denial occurs, you still receive a cryptic log message in your audit logs. However, you also receive a message via syslog that is very easy to read. Your server can email you these messages as well. The message contains guidance about adjusting SELinux booleans, setting contexts, or generating new SELinux policies to work around a really unusual problem. When I say guidance, I mean that the tools give you commands to copy and paste to adjust your policies, booleans and contexts.</p><p><strong>Review SELinux booleans for quick adjustments</strong></p><p>Although the myriad of SELinux user-space tools isnâ€™t within the scope of this article, <em>getsebool</em> and <em>togglesebool</em> deserve a mention. Frequently adjusted policies are controlled by booleans that are toggled on and off with <em>togglesebool</em>. Start with <em>getsebool â€“a</em> for a full list of booleans and then use <em>togglesebool</em> to enable or disable the policy.</p><p><strong>Quickly restore file or directory contexts</strong></p><p>Shuffling files or directories around a server can cause SELinux denials due to contexts not matching their original values. This happens to me frequently if I move a configuration file from one system to another. Correcting the context problem involves one of two simple commands. The <em>restorecon</em> command applies the default contexts specific to the file or directory. If you have a file in the directory with the correct context, use <em>chcon</em> to fix the context on the wrong file by giving it the path to the file with the correct context.</p><p>Here are some additional links with helpful SELinux documentation:</p><ul><li><a href=http://selinuxproject.org/page/Main_Page>SELinux Project Wiki</a></li><li><a href=https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Security-Enhanced_Linux/>Red Hat Enterprise Linux 6 SELinux Guide</a></li><li><a href=http://danwalsh.livejournal.com/>Dan Walsh&rsquo;s Blog</a></li></ul></div></article><hr><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://major.io/tags/centos/>centos</a></span>
<span class=tag><a href=https://major.io/tags/fedora/>fedora</a></span>
<span class=tag><a href=https://major.io/tags/general-advice/>general advice</a></span>
<span class=tag><a href=https://major.io/tags/red-hat/>red hat</a></span>
<span class=tag><a href=https://major.io/tags/security/>security</a></span>
<span class=tag><a href=https://major.io/tags/selinux/>selinux</a></span>
<span class=tag><a href=https://major.io/tags/writing/>writing</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-folder meta-icon"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg><span class=tag><a href=https://major.io/categories/blog-posts/>Blog Posts</a></span></p></div></main></div><footer class=footer><div class=footer__inner><div class=footer__content><span>&copy; 2021</span>
<span><a href=https://major.io>Major Hayden</a></span>
<span><a href=https://creativecommons.org/licenses/by-sa/2.0/ target=_blank rel=noopener>CC BY-SA 2.0</a></span><span><a href=https://major.io/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></span></div></div><div class=footer__inner><div class=footer__content><span>Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>Made with &#10084; by <a href=https://github.com/rhazdon>Djordje Atlialp</a></span></div></div></footer></div><script type=text/javascript src=../../../../bundle.min.e9f93b80e78a22e6f04cbb5f73e0f9c4ba60ff73a2a0ef85965c688f93dd1f2722a282e30e485603e4c65b1b346720e35f213435ec5556e196a97a68d097c80f.js integrity="sha512-6fk7gOeKIubwTLtfc+D5xLpg/3OioO+Fllxoj5PdHyciooLjDkhWA+TGWxs0ZyDjXyE0NexVVuGWqXpo0JfIDw=="></script></body></html>