<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>selinux on Major Hayden's Blog ðŸ¤ </title><link>https://major.io/tags/selinux/</link><description>Recent content in selinux on Major Hayden's Blog ðŸ¤ </description><generator>Hugo -- gohugo.io</generator><lastBuildDate>Thu, 16 Jun 2016 21:22:52 +0000</lastBuildDate><atom:link href="https://major.io/tags/selinux/index.xml" rel="self" type="application/rss+xml"/><item><title>New SELinux shirts are available</title><link>https://major.io/2016/06/16/new-selinux-shirts-available/</link><pubDate>Thu, 16 Jun 2016 21:22:52 +0000</pubDate><guid>https://major.io/2016/06/16/new-selinux-shirts-available/</guid><description>With the upcoming Red Hat Summit 2016 in San Francisco almost upon us, I decided to update the old SELinux shirts with two new designs:
You can buy these now over at Spreadshirt! There are styles there for men and women and I&amp;rsquo;ve priced them as low as the store will allow.
Spreadshirt is also running a sale for 15% off T-shirts until June 21st with the code TSHIRT16. Let&amp;rsquo;s make SELinux enforcing again!</description></item><item><title>What I learned while securing Ubuntu</title><link>https://major.io/2015/10/14/what-i-learned-while-securing-ubuntu/</link><pubDate>Wed, 14 Oct 2015 20:53:12 +0000</pubDate><guid>https://major.io/2015/10/14/what-i-learned-while-securing-ubuntu/</guid><description>The blog posts have slowed down a bit lately because I&amp;rsquo;ve been heads down on a security project at work. I&amp;rsquo;m working with people in the OpenStack community to create a new Ansible role called openstack-ansible-security. The role aims to improve host security by using hardening standards to improve the configuration of various parts of the operating system.
This means applying security hardening to Ubuntu 14.04 systems since that&amp;rsquo;s the only host operating system supported by openstack-ansible at the moment.</description></item><item><title>systemd in Fedora 22: Failed to restart service: Access Denied</title><link>https://major.io/2015/09/18/systemd-in-fedora-22-failed-to-restart-service-access-denied/</link><pubDate>Fri, 18 Sep 2015 19:43:35 +0000</pubDate><guid>https://major.io/2015/09/18/systemd-in-fedora-22-failed-to-restart-service-access-denied/</guid><description>If you&amp;rsquo;re running Fedora 22 and you&amp;rsquo;ve recently updated to systemd-219-24.fc22, you might see errors like these:
# systemctl restart postfix Failed to restart postfix.service: Access denied Your audit logs will have entries like these:
type=USER_AVC msg=audit(1442602150.292:763): pid=1 uid=0 auid=4294967295 ses=4294967295 subj=system_u:system_r:init_t:s0 msg='avc: denied { start } for auid=n/a uid=0 gid=0 path=&amp;quot;/run/systemd/system/session-4.scope&amp;quot; cmdline=&amp;quot;/usr/lib/systemd/systemd-logind&amp;quot; scontext=system_u:system_r:systemd_logind_t:s0 tcontext=system_u:object_r:systemd_unit_file_t:s0 tclass=service exe=&amp;quot;/usr/lib/systemd/systemd&amp;quot; sauid=0 hostname=? addr=? terminal=?' type=USER_AVC msg=audit(1442602150.437:768): pid=1 uid=0 auid=4294967295 ses=4294967295 subj=system_u:system_r:init_t:s0 msg='avc: denied { start } for auid=n/a uid=0 gid=0 path=&amp;quot;/usr/lib/systemd/system/user@.</description></item><item><title>Chronicles of SELinux: Dealing with web content in unusual directories</title><link>https://major.io/2015/09/10/chronicles-of-selinux-dealing-with-web-content-in-unusual-directories/</link><pubDate>Thu, 10 Sep 2015 13:40:35 +0000</pubDate><guid>https://major.io/2015/09/10/chronicles-of-selinux-dealing-with-web-content-in-unusual-directories/</guid><description>I&amp;rsquo;ve decided to start a series of posts called &amp;ldquo;Chronicles of SELinux&amp;rdquo; where I hope to educate more users on how to handle SELinux denials with finesse rather than simply disabling it entirely. To kick things off, I&amp;rsquo;ll be talking about dealing with web content in the first post.
First steps If you&amp;rsquo;d like to follow along, simply hop onto a system running Fedora 21 (or later), CentOS 7 or Red Hat Enterprise Linux 7.</description></item><item><title>AVC: denied dyntransition from sshd</title><link>https://major.io/2014/07/03/avc-denied-dyntransition-from-sshd/</link><pubDate>Thu, 03 Jul 2014 19:52:51 +0000</pubDate><guid>https://major.io/2014/07/03/avc-denied-dyntransition-from-sshd/</guid><description>I&amp;rsquo;ve been working with some Fedora environments in chroots and I ran into a peculiar SELinux AVC denial a short while ago:
avc: denied { dyntransition } for pid=809 comm=&amp;quot;sshd&amp;quot; scontext=system_u:system_r:kernel_t:s0 tcontext=system_u:system_r:sshd_net_t:s0 tclass=process The ssh daemon is running on a non-standard port but I verified that the port is allowed with semanage port -l. The target context of sshd_net_t from the AVC seems sensible for the ssh daemon. I started to wonder if a context wasn&amp;rsquo;t applied correctly to the sshd excutable itself, so I checked within the chroot:</description></item><item><title>Fixing broken DNS lookups in spamassassin</title><link>https://major.io/2014/06/20/fixing-broken-dns-lookups-in-spamassassin/</link><pubDate>Fri, 20 Jun 2014 13:20:56 +0000</pubDate><guid>https://major.io/2014/06/20/fixing-broken-dns-lookups-in-spamassassin/</guid><description>I talked about the joys of running my own mail server last week only to find that my mail server was broken yesterday. Spamassassin stopped doing DNS lookups for RBL and SPF checks.
I had one of these moments:
My logs looked like this:
plugin: eval failed: available_nameservers: No DNS servers available! plugin: eval failed: available_nameservers: No DNS servers available! rules: failed to run NO_DNS_FOR_FROM RBL test, skipping: (available_nameservers: [.</description></item><item><title>Text missing in chrome on Linux</title><link>https://major.io/2014/05/17/text-missing-in-chrome-on-linux/</link><pubDate>Sun, 18 May 2014 04:33:14 +0000</pubDate><guid>https://major.io/2014/05/17/text-missing-in-chrome-on-linux/</guid><description>I&amp;rsquo;m in the process of trying Fedora 20 on my retina MacBook and I ran into a peculiar issue with Chrome. Some sites would load up normally and I could read everything on the page. Other sites would load up and only some of the text would be displayed. Images were totally unaffected.
It wasn&amp;rsquo;t this way on the initial installation of Fedora but it cropped up somewhere along the way as I installed software.</description></item><item><title>Launch secure LXC containers on Fedora 20 using SELinux and sVirt</title><link>https://major.io/2014/04/21/launch-secure-lxc-containers-on-fedora-20-using-selinux-and-svirt/</link><pubDate>Tue, 22 Apr 2014 04:11:00 +0000</pubDate><guid>https://major.io/2014/04/21/launch-secure-lxc-containers-on-fedora-20-using-selinux-and-svirt/</guid><description>Getting started with LXC is a bit awkward and I&amp;rsquo;ve assembled this guide for anyone who wants to begin experimenting with LXC containers in Fedora 20. As an added benefit, you can follow almost every step shown here when creating LXC containers on Red Hat Enterprise Linux 7 Beta (which is based on Fedora 19).
You&amp;rsquo;ll need a physical machine or a VM running Fedora 20 to get started. (You could put a container in a container, but things get a little dicey with that setup.</description></item><item><title>Come and get your SELinux shirts!</title><link>https://major.io/2013/07/18/come-and-get-your-selinux-shirts/</link><pubDate>Thu, 18 Jul 2013 12:14:45 +0000</pubDate><guid>https://major.io/2013/07/18/come-and-get-your-selinux-shirts/</guid><description>After my podcast interview at the 2013 Red Hat Summit, Dan Walsh posted a photo of himself in the SELinux shirt that I gave him at the Summit:
Needless to say, I was flooded with requests for shirts after that. Someone suggested using the Overpass font and I have new shirts ready for purchase on Spreadshirt.
I set all the prices as low as the vendor will allow and I&amp;rsquo;m not making any profit for each purchase.</description></item><item><title>Confine untrusted users (including your children) with SELinux</title><link>https://major.io/2013/07/05/confine-untrusted-users-including-your-children-with-selinux/</link><pubDate>Fri, 05 Jul 2013 18:50:43 +0000</pubDate><guid>https://major.io/2013/07/05/confine-untrusted-users-including-your-children-with-selinux/</guid><description>The confined user support in SELinux is handy for ensuring that users aren&amp;rsquo;t able to do something that they shouldn&amp;rsquo;t. It seems more effective and easier to use than most of the other methods I&amp;rsquo;ve seen before. Thanks to Dan for reminding me about this during his SELinux in the Enterprise talk from this year&amp;rsquo;s Red Hat Summit.
There are five main SELinux user types (and a handy chart in the Fedora documentation):</description></item><item><title>My interview on the Dave and Gunnar Show</title><link>https://major.io/2013/06/19/my-interview-on-the-dave-and-gunnar-show/</link><pubDate>Wed, 19 Jun 2013 12:04:06 +0000</pubDate><guid>https://major.io/2013/06/19/my-interview-on-the-dave-and-gunnar-show/</guid><description>David Egts and Gunnar Hellekson were kind enough to invite me to participate in their Dave and Gunnar Show podcast during the 2013 Red Hat Summit. We talked about Red Hat Enterprise Linux and my takeaways from the Summit.
The podcast episode [32MB] is about 34 minutes long and my interview starts after the 21 minute mark. I&amp;rsquo;m always nervous when I do these things so you&amp;rsquo;re certainly not allowed to poke fun at my accent.</description></item><item><title>Installing the Xen hypervisor on Fedora 19</title><link>https://major.io/2013/06/02/installing-the-xen-hypervisor-on-fedora-19/</link><pubDate>Mon, 03 Jun 2013 04:27:43 +0000</pubDate><guid>https://major.io/2013/06/02/installing-the-xen-hypervisor-on-fedora-19/</guid><description>It&amp;rsquo;s been a little while since I last posted about installing Xen on Fedora, so I figured that Fedora 19&amp;rsquo;s beta release was as good a time as any to write a new post. To get started, you&amp;rsquo;ll need to get Fedora 19 installed on your favorite hardware (or virtual machine).
Install the Xen hypervisor and tools. Also, ensure that both of the necessary daemons are running on each boot:</description></item><item><title>Presentation: Demystifying SELinux</title><link>https://major.io/2013/05/28/presentation-demystifying-selinux/</link><pubDate>Wed, 29 May 2013 01:01:09 +0000</pubDate><guid>https://major.io/2013/05/28/presentation-demystifying-selinux/</guid><description>While rolling through my RSS feeds, I found a great presentation by David Quigley titled &amp;ldquo;Demystifying SELinux&amp;rdquo;. He makes come good comparisons between discretionary/mandatory access controls and dives into what makes SELinux useful. Basic troubleshooting commands are covered within the presentation as well.
You can find the presentation over on Speaker Deck. I&amp;rsquo;ve also mirrored a PDF copy here on the site.
UPDATE: If you&amp;rsquo;re going to OSCON 2013 this year, it appears that David will be presenting this topic during the event.</description></item><item><title>Reprint: Stop Disabling SELinux!</title><link>https://major.io/2013/04/19/reprint-stop-disabling-selinux/</link><pubDate>Fri, 19 Apr 2013 05:52:23 +0000</pubDate><guid>https://major.io/2013/04/19/reprint-stop-disabling-selinux/</guid><description>This article appeared in SC Magazine and I&amp;rsquo;ve posted it here as well. For those of you who were left wanting more from my previous SELinux post, this should help. If it doesn&amp;rsquo;t help, leave a comment. ;)
The push to cloud transforms the way we apply information security principles to systems and applications. Perimeters of the past, secured heavily with traditional network devices in the outermost ring, lose effectiveness day by day.</description></item><item><title>Seriously, stop disabling SELinux</title><link>https://major.io/2013/04/15/seriously-stop-disabling-selinux/</link><pubDate>Tue, 16 Apr 2013 04:40:10 +0000</pubDate><guid>https://major.io/2013/04/15/seriously-stop-disabling-selinux/</guid><description>After many discussions with fellow Linux users, I&amp;rsquo;ve come to realize that most seem to disable SELinux rather than understand why it&amp;rsquo;s denying access. In an effort to turn the tide, I&amp;rsquo;ve created a new site as a public service to SELinux cowards everywhere: stopdisablingselinux.com.
Here are some relatively useful SELinux posts from the blog:
Getting started with SELinux Receive email reports for SELinux AVC denials Edit: The goal of the post was to poke some fun at system administrators who disable SELinux immediately without learning how it works or why they&amp;rsquo;re seeing certain operations being denied.</description></item><item><title>SELinux, Xen, and block devices in Fedora 17</title><link>https://major.io/2012/07/10/selinux-xen-and-block-devices-in-fedora-17/</link><pubDate>Tue, 10 Jul 2012 05:05:33 +0000</pubDate><guid>https://major.io/2012/07/10/selinux-xen-and-block-devices-in-fedora-17/</guid><description>If you try to run Xen without libvirt on Fedora 17 with SELinux in enforcing mode, you&amp;rsquo;ll be butting heads with SELinux in no time. You&amp;rsquo;ll probably be staring at something like this:
# xm create -c fedora17 Using config file &amp;quot;/etc/xen/fedora17&amp;quot;. Error: Disk isn't accessible If you have setroubleshoot and setroubleshoot-server installed, you should have a friendly message in /var/log/messages telling you the source of the problem:
setroubleshoot: SELinux is preventing /usr/bin/python2.</description></item><item><title>Red Hat Summit 2012: Thursday</title><link>https://major.io/2012/06/28/red-hat-summit-2012-thursday/</link><pubDate>Fri, 29 Jun 2012 04:54:41 +0000</pubDate><guid>https://major.io/2012/06/28/red-hat-summit-2012-thursday/</guid><description>Thursday has felt like the busiest, most jam-packed day of the week. The morning started off with three keynotes from HP, Intel, and Red Hat&amp;rsquo;s CTO, Brian Stevens.
HP&amp;rsquo;s message centered around converged cloud and that customers don&amp;rsquo;t need an all or nothing solution. They can pull the best pieces from every type of hosting to do what&amp;rsquo;s best for their business. The presentation from Intel was extremely heavy on the marketing side and didn&amp;rsquo;t have much to do with Red Hat.</description></item><item><title>Red Hat Summit 2012: Wednesday</title><link>https://major.io/2012/06/28/red-hat-summit-2012-wednesday/</link><pubDate>Thu, 28 Jun 2012 06:03:51 +0000</pubDate><guid>https://major.io/2012/06/28/red-hat-summit-2012-wednesday/</guid><description>Wednesday was action-packed with dramatic keynotes and great sessions. The morning was kicked off by Paul Cormier and he talked about some new products coming from Red Hat. Much of the product releases were centered around cloud offerings (like Openshift) and his talk was mainly aimed at CIO&amp;rsquo;s and decision makers. There wasn&amp;rsquo;t a lot of technical detail within his talk but it was refreshing to hear a Linux vendor talk about their products as being revolutionary steps in pulling away from vendor lock-in and proprietary solutions.</description></item><item><title>SELinux and .forward files</title><link>https://major.io/2012/01/02/selinux-and-forward-files/</link><pubDate>Mon, 02 Jan 2012 22:44:43 +0000</pubDate><guid>https://major.io/2012/01/02/selinux-and-forward-files/</guid><description>If you want to forward e-mail from root to another user, you can usually place a .forward file in root&amp;rsquo;s home directory and your mail server will take care of the rest:
/root/.forward With SELinux, you&amp;rsquo;ll end up getting an AVC denial each time your mail server tries to read the contents of the .forward file:
type=AVC msg=audit(1325543823.787:7416): avc: denied { open } for pid=9850 comm=&amp;quot;local&amp;quot; name=&amp;quot;.forward&amp;quot; dev=md0 ino=17694734 scontext=system_u:system_r:postfix_local_t:s0 tcontext=unconfined_u:object_r:admin_home_t:s0 tclass=file The reason is that your .</description></item><item><title>Receive e-mail reports for SELinux AVC denials</title><link>https://major.io/2011/09/15/receive-e-mail-reports-for-selinux-avc-denials/</link><pubDate>Fri, 16 Sep 2011 04:17:04 +0000</pubDate><guid>https://major.io/2011/09/15/receive-e-mail-reports-for-selinux-avc-denials/</guid><description>SELinux isn&amp;rsquo;t a technology that&amp;rsquo;s easy to tackle for newcomers. However, there&amp;rsquo;s been a lot of work to smooth out the rough edges while still keeping a tight grip on what applications and users are allowed to do on a Linux system. One of the biggest efforts has been around setroubleshoot.
The purpose behind setroubleshoot is to let users know when access has been denied, help them resolve it if necessary, and to reduce overall frustration while working through tight security restrictions in the default SELinux policies.</description></item><item><title>Getting apache, PHP, and memcached working with SELinux</title><link>https://major.io/2011/09/07/getting-apache-php-and-memcached-working-with-selinux/</link><pubDate>Thu, 08 Sep 2011 03:55:00 +0000</pubDate><guid>https://major.io/2011/09/07/getting-apache-php-and-memcached-working-with-selinux/</guid><description>I&amp;rsquo;m using SELinux more often now on my Fedora 15 installations and I came up against a peculiar issue today on a new server. My PHP installation is configured to store its sessions in memcached and I brought over some working configurations from another server. However, each time I accessed a page which tried to initiate a session, the page load would hang for about a minute and I&amp;rsquo;d find this in my apache error logs:</description></item></channel></rss>