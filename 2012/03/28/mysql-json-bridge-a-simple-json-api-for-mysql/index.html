<!doctype html><html lang=en-us><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://major.io/favicon.ico><title>mysql-json-bridge: a simple JSON API for MySQL | Major Hayden's Blog ðŸ¤ </title><meta name=title content="mysql-json-bridge: a simple JSON API for MySQL"><meta name=description content="My quest to get better at Python led me to create a new project on GitHub. It&rsquo;s called mysql-json-bridge and it&rsquo;s ready for you to use.
Why do we need a JSON API for MySQL?
The real need sprang from a situation I was facing daily at Rackspace. We have a lot of production and pre-production environments which are in flux but we need a way to query data from various MySQL servers for multiple purposes."><meta name=keywords content="development,github,json,mysql,python,rackspace,web,"><meta property="og:title" content="mysql-json-bridge: a simple JSON API for MySQL"><meta property="og:description" content="My quest to get better at Python led me to create a new project on GitHub. It&rsquo;s called mysql-json-bridge and it&rsquo;s ready for you to use.
Why do we need a JSON API for MySQL?
The real need sprang from a situation I was facing daily at Rackspace. We have a lot of production and pre-production environments which are in flux but we need a way to query data from various MySQL servers for multiple purposes."><meta property="og:type" content="article"><meta property="og:url" content="https://major.io/2012/03/28/mysql-json-bridge-a-simple-json-api-for-mysql/"><meta property="og:image" content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2012-03-29T02:34:53+00:00"><meta property="article:modified_time" content="2020-02-12T16:36:14-06:00"><meta property="og:site_name" content="Major Hayden's Blog ðŸ¤ "><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta name=twitter:title content="mysql-json-bridge: a simple JSON API for MySQL"><meta name=twitter:description content="My quest to get better at Python led me to create a new project on GitHub. It&rsquo;s called mysql-json-bridge and it&rsquo;s ready for you to use.
Why do we need a JSON API for MySQL?
The real need sprang from a situation I was facing daily at Rackspace. We have a lot of production and pre-production environments which are in flux but we need a way to query data from various MySQL servers for multiple purposes."><meta name=twitter:site content="@mhayden"><meta itemprop=name content="mysql-json-bridge: a simple JSON API for MySQL"><meta itemprop=description content="My quest to get better at Python led me to create a new project on GitHub. It&rsquo;s called mysql-json-bridge and it&rsquo;s ready for you to use.
Why do we need a JSON API for MySQL?
The real need sprang from a situation I was facing daily at Rackspace. We have a lot of production and pre-production environments which are in flux but we need a way to query data from various MySQL servers for multiple purposes."><meta itemprop=datePublished content="2012-03-29T02:34:53+00:00"><meta itemprop=dateModified content="2020-02-12T16:36:14-06:00"><meta itemprop=wordCount content="450"><meta itemprop=image content="https://major.io/images/2019-05-24-cranes-skycrapers.jpg"><meta itemprop=keywords content="development,github,json,mysql,python,rackspace,web,"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:820px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px}div.highlight code{background-color:unset;color:initial}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style></head><body><header><a href=../../../../ class=title><h2>Major Hayden's Blog ðŸ¤ </h2></a><nav><a href=../../../../>Home</a>
<a href=../../../../ham-radio-faq>Ham Radio</a>
<a href=../../../../icanhazip-com-faq>icanhazip FAQ</a>
<a href=../../../../posts>Posts</a></nav><script async src=https://media.ethicalads.io/media/client/ethicalads.min.js></script><div class="adaptive raised" data-ea-publisher=major-io data-ea-type=text></div></header><main><h1>mysql-json-bridge: a simple JSON API for MySQL</h1><i><time datetime=2012-03-29 pubdate>2012-03-29</time></i>
<content><p>My quest to get better at <a href=http://python.org>Python</a> led me to create a new project on GitHub. It&rsquo;s called <a href=https://github.com/rackerhacker/mysql-json-bridge>mysql-json-bridge</a> and it&rsquo;s ready for you to use.</p><p><strong>Why do we need a JSON API for MySQL?</strong></p><p>The real need sprang from a situation I was facing daily at <a href=http://rackspace.com/>Rackspace</a>. We have a lot of production and pre-production environments which are in flux but we need a way to query data from various MySQL servers for multiple purposes. Some folks need data in ruby or python scripts while others need to drag in data with .NET and Java. Wrestling with the various adapters and all of the user privileges on disparate database servers behind different firewalls on different networks was less than enjoyable.</p><p>That&rsquo;s where this bridge comes in.</p><p>The bridge essentially gives anyone the ability to talk to multiple database servers across different environments by talking to a single endpoint with easily configurable security and encryption. As long as the remote user can make an HTTP POST and parse some JSON, they can query data from multiple MySQL endpoints.</p><p><strong>How does it work?</strong></p><p>It all starts with a simple HTTP POST. I&rsquo;ve become a big fan of the Python <a href=http://python-requests.org>requests</a> module. If you&rsquo;re using it, this is all you need to submit a query:</p><pre><code>import requests
payload = {'sql': 'SELECT * FROM some_tables WHERE some_column=some_value'}
url = &quot;http://localhost:5000/my_environment/my_database&quot;
r = requests.post(url, data=payload)
print r.text
</code></pre><p>The bridge takes your query and feeds it into the corresponding MySQL server. When the results come back, they&rsquo;re converted to JSON and returned via the same HTTP connection.</p><p><strong>What technology does it use?</strong></p><p><a href=http://flask.pocoo.org/>Flask</a> does the heavy lifting for the HTTP requests and <a href=https://github.com/facebook/tornado/blob/master/tornado/database.py>Facebook&rsquo;s Tornado database class</a> wraps the <a href=http://mysql-python.sourceforge.net/>MySQLdb</a> module in something a little more user friendly. Other than those modules, <a href=http://pyyaml.org/>PyYAML</a> and <a href=http://python-requests.org>requests</a> are the only other modules not provided by the standard Python libraries.</p><p><strong>Is it fast?</strong></p><p>Yes. I haven&rsquo;t done any detailed benchmarks on it yet, but the overhead is quite low even with a lot of concurrency. The biggest slowdowns come from network latency between you and the bridge or between the bridge and the database server. Keep in mind that gigantic result sets will take a longer time to transfer across the network and get transformed into JSON.</p><p><strong>I found a bug. I have an idea for an improvement. You&rsquo;re terrible at Python.</strong></p><p>All feedback (and every pull request) is welcome. I&rsquo;m still getting the hang of Python (hey, I&rsquo;ve only been writing in it seriously for a few weeks!) and I&rsquo;m always eager to learn a new or better way to accomplish something. Feel free to create an issue in GitHub or submit a pull request with a patch.</p></content><p><a href=https://major.io/tags/development/>#development</a>
<a href=https://major.io/tags/github/>#github</a>
<a href=https://major.io/tags/json/>#json</a>
<a href=https://major.io/tags/mysql/>#mysql</a>
<a href=https://major.io/tags/python/>#python</a>
<a href=https://major.io/tags/rackspace/>#rackspace</a>
<a href=https://major.io/tags/web/>#web</a></p></main><footer><hr>CC-BY-SA 4.0 &#187;
Made with <a href=https://gohugo.io/>Hugo</a> &#187;
Theme based on <a href=https://github.com/janraasch/hugo-bearblog/>Hugo Ê•â€¢á´¥â€¢Ê” Bear</a> &#187;
<a href=https://github.com/major/major.io/commit/84372fb2198913a5e498b8d32ffc77fb813f0a48>84372fb2</a></footer></body></html>