<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="Major Hayden"><meta name=description content="My quest to get better at Python led me to create a new project on GitHub. It&amp;rsquo;s called mysql-json-bridge and it&amp;rsquo;s ready for you to use.
Why do we need a JSON API for MySQL?
The real need sprang from a situation I was facing daily at Rackspace. We have a lot of production and pre-production environments which are in flux but we need a way to query data from various MySQL servers for multiple purposes."><meta name=keywords content=",development,github,json,mysql,python,rackspace,web"><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://major.io/2012/03/28/mysql-json-bridge-a-simple-json-api-for-mysql/><title>mysql-json-bridge: a simple JSON API for MySQL :: Major Hayden ðŸ¤  â€” Words of wisdom from a social nerd</title><link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css rel=stylesheet type=text/css><link rel=stylesheet href=../../../../main.89fa80e2143f71bd5c96a7c94e531dec3276a367e22f87e74a76026ab64680bf.css><link rel=apple-touch-icon sizes=180x180 href=../../../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../../../favicon-16x16.png><link rel=manifest href=../../../../site.webmanifest><link rel=mask-icon href=../../../../safari-pinned-tab.svg color=#252627><link rel="shortcut icon" href=../../../../favicon.ico><meta name=msapplication-TileColor content="#252627"><meta name=theme-color content="#252627"><meta itemprop=name content="mysql-json-bridge: a simple JSON API for MySQL"><meta itemprop=description content="My quest to get better at Python led me to create a new project on GitHub. It&rsquo;s called mysql-json-bridge and it&rsquo;s ready for you to use.
Why do we need a JSON API for MySQL?
The real need sprang from a situation I was facing daily at Rackspace. We have a lot of production and pre-production environments which are in flux but we need a way to query data from various MySQL servers for multiple purposes."><meta itemprop=datePublished content="2012-03-29T02:34:53+00:00"><meta itemprop=dateModified content="2012-03-29T02:34:53+00:00"><meta itemprop=wordCount content="450"><meta itemprop=image content="https://major.io"><meta itemprop=keywords content="development,github,json,mysql,python,rackspace,web,"><meta property="article:section" content="Blog Posts"><meta property="article:published_time" content="2012-03-29 02:34:53 +0000 UTC"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="mysql-json-bridge: a simple JSON API for MySQL :: Major Hayden ðŸ¤ "><meta name=twitter:description content><meta name=twitter:site content="https://major.io"><meta name=twitter:creator content="Major Hayden"><meta name=twitter:image content><style type=text/css>html{letter-spacing:unset}</style></head><body class=dark-theme><div class=container><header class=header><span class=header__inner><a href=../../../../ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>$ echo major.io</span>
<span class=logo__cursor style=visibility:hidden></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=../../../../ham-radio-faq>hamradio</a></li><li><a href=../../../../icanhazip-com-faq>icanhazip</a></li><li><a href=../../../../posts/>posts</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info></p></div><article><h2 class=post-title><a href=https://major.io/2012/03/28/mysql-json-bridge-a-simple-json-api-for-mysql/>mysql-json-bridge: a simple JSON API for MySQL</a></h2><div class=post-content><p>My quest to get better at <a href=http://python.org>Python</a> led me to create a new project on GitHub. It&rsquo;s called <a href=https://github.com/rackerhacker/mysql-json-bridge>mysql-json-bridge</a> and it&rsquo;s ready for you to use.</p><p><strong>Why do we need a JSON API for MySQL?</strong></p><p>The real need sprang from a situation I was facing daily at <a href=http://rackspace.com/>Rackspace</a>. We have a lot of production and pre-production environments which are in flux but we need a way to query data from various MySQL servers for multiple purposes. Some folks need data in ruby or python scripts while others need to drag in data with .NET and Java. Wrestling with the various adapters and all of the user privileges on disparate database servers behind different firewalls on different networks was less than enjoyable.</p><p>That&rsquo;s where this bridge comes in.</p><p>The bridge essentially gives anyone the ability to talk to multiple database servers across different environments by talking to a single endpoint with easily configurable security and encryption. As long as the remote user can make an HTTP POST and parse some JSON, they can query data from multiple MySQL endpoints.</p><p><strong>How does it work?</strong></p><p>It all starts with a simple HTTP POST. I&rsquo;ve become a big fan of the Python <a href=http://python-requests.org>requests</a> module. If you&rsquo;re using it, this is all you need to submit a query:</p><pre><code>import requests
payload = {'sql': 'SELECT * FROM some_tables WHERE some_column=some_value'}
url = &quot;http://localhost:5000/my_environment/my_database&quot;
r = requests.post(url, data=payload)
print r.text
</code></pre><p>The bridge takes your query and feeds it into the corresponding MySQL server. When the results come back, they&rsquo;re converted to JSON and returned via the same HTTP connection.</p><p><strong>What technology does it use?</strong></p><p><a href=http://flask.pocoo.org/>Flask</a> does the heavy lifting for the HTTP requests and <a href=https://github.com/facebook/tornado/blob/master/tornado/database.py>Facebook&rsquo;s Tornado database class</a> wraps the <a href=http://mysql-python.sourceforge.net/>MySQLdb</a> module in something a little more user friendly. Other than those modules, <a href=http://pyyaml.org/>PyYAML</a> and <a href=http://python-requests.org>requests</a> are the only other modules not provided by the standard Python libraries.</p><p><strong>Is it fast?</strong></p><p>Yes. I haven&rsquo;t done any detailed benchmarks on it yet, but the overhead is quite low even with a lot of concurrency. The biggest slowdowns come from network latency between you and the bridge or between the bridge and the database server. Keep in mind that gigantic result sets will take a longer time to transfer across the network and get transformed into JSON.</p><p><strong>I found a bug. I have an idea for an improvement. You&rsquo;re terrible at Python.</strong></p><p>All feedback (and every pull request) is welcome. I&rsquo;m still getting the hang of Python (hey, I&rsquo;ve only been writing in it seriously for a few weeks!) and I&rsquo;m always eager to learn a new or better way to accomplish something. Feel free to create an issue in GitHub or submit a pull request with a patch.</p></div></article><hr><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://major.io/tags/development/>development</a></span>
<span class=tag><a href=https://major.io/tags/github/>github</a></span>
<span class=tag><a href=https://major.io/tags/json/>json</a></span>
<span class=tag><a href=https://major.io/tags/mysql/>mysql</a></span>
<span class=tag><a href=https://major.io/tags/python/>python</a></span>
<span class=tag><a href=https://major.io/tags/rackspace/>rackspace</a></span>
<span class=tag><a href=https://major.io/tags/web/>web</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-folder meta-icon"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg><span class=tag><a href=https://major.io/categories/blog-posts/>Blog Posts</a></span></p></div></main></div><footer class=footer><div class=footer__inner><div class=footer__content><span>&copy; 2021</span>
<span><a href=https://major.io>Major Hayden</a></span>
<span><a href=https://creativecommons.org/licenses/by-sa/2.0/ target=_blank rel=noopener>CC BY-SA 2.0</a></span><span><a href=https://major.io/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></span></div></div><div class=footer__inner><div class=footer__content><span>Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>Made with &#10084; by <a href=https://github.com/rhazdon>Djordje Atlialp</a></span></div></div></footer></div><script type=text/javascript src=../../../../bundle.min.e9f93b80e78a22e6f04cbb5f73e0f9c4ba60ff73a2a0ef85965c688f93dd1f2722a282e30e485603e4c65b1b346720e35f213435ec5556e196a97a68d097c80f.js integrity="sha512-6fk7gOeKIubwTLtfc+D5xLpg/3OioO+Fllxoj5PdHyciooLjDkhWA+TGWxs0ZyDjXyE0NexVVuGWqXpo0JfIDw=="></script></body></html>